(this.webpackJsonpforum=this.webpackJsonpforum||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(50),o=n.n(c),u=(n(59),n(60),n(52)),i=n(1),s=n(7),l=n.n(s),m=n(16),p=n(8),d=n(27),f=n.n(d),h=n(51),w=n.n(h),b=f.a.query,v=new f.a.Client({secret:"fnAD1yQ6nyACATcGUq8PXJ39ZoIVPdQIngRkw6j6"}),y=new w.a({APIUrl:"https://forum-wtchs.netlify.app/.netlify/identity",audience:"",setCookie:!1});var E=function(){var e=Object(a.useState)(),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(),u=Object(p.a)(o,2),i=u[0],s=u[1],d=Object(a.useState)(),f=Object(p.a)(d,2),h=f[0],w=f[1],E=Object(a.useState)(),x=Object(p.a)(E,2),g=x[0],j=x[1],O=Object(a.useState)(),q=Object(p.a)(O,2),k=q[0],C=q[1],P=Object(a.useState)(),S=Object(p.a)(P,2),I=S[0],U=S[1],A=Object(a.useState)(),F=Object(p.a)(A,2),_=F[0],J=F[1],M=function(){var e=Object(m.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,new Promise(function(){var e=Object(m.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.query(b.Exists(b.Match(b.Index("users_by_handle"),b.Casefold(i))));case 2:!0===e.sent?(C(!1),t(!1)):(C(!0),t(!0));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return a=e.sent,e.next=6,new Promise(function(){var e=Object(m.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.query(b.Exists(b.Match(b.Index("users_by_email"),b.Casefold(n))));case 2:!0===e.sent?(U(!1),t(!1)):(U(!0),t(!0));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 6:if(r=e.sent,!(a&&r&&(h===g?(J(!0),1):(J(!1),0)))){e.next=12;break}return e.next=10,y.signup(n,h);case 10:return e.next=12,new Promise(function(){var e=Object(m.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.query(b.Create(b.Collection("users"),{data:{handle:i,email:n,imageUrl:"imageUrl1.com"}}));case 3:r=e.sent,t(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:function(e){M(e)},method:"post"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){U(void 0),c(e.target.value)},required:"required"}),!1===I?r.a.createElement("p",null,"This email is already in use"):null,r.a.createElement("label",{htmlFor:"handle"},"Username:"),r.a.createElement("input",{type:"text",name:"handle",id:"handle",onChange:function(e){C(void 0),s(e.target.value)},required:"required"}),!1===k?r.a.createElement("p",null,"This handle is already in use"):null,r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){w(e.target.value),J(!0)},required:"required"}),r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm password:"),r.a.createElement("input",{type:"password",name:"confirmPassword",id:"confirmPassword",onChange:function(e){j(e.target.value),J(!0)},required:"required"}),!1===_?r.a.createElement("p",null,"Passwords don't match"):null,r.a.createElement("button",{type:"submit"},"Signup"))};var x=function(){return r.a.createElement("div",null,"Home")};var g=function(){return r.a.createElement(u.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:x}),r.a.createElement(i.a,{path:"/signup",component:E})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){e.exports=n(103)},59:function(e,t,n){},60:function(e,t,n){},79:function(e,t){},81:function(e,t){}},[[54,1,2]]]);
//# sourceMappingURL=main.00b2f03c.chunk.js.map