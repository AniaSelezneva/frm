{"version":3,"sources":["pages/Home/styles/Home.module.scss","utils/faunaDB.js","HOCs/WithLoader.js","utils/store.js","modules/header/notifications/utils/store.js","modules/header/notifications/removeOneNotification.js","modules/header/notifications/notification.js","modules/header/notifications/pagination.js","modules/header/notifications/removeAllNotifications.js","modules/header/notifications/container.js","modules/header/notifications/bell.js","modules/header/notifications/index.js","modules/header/Search.js","modules/header/index.js","modules/footer/img/footer_kitty.js","modules/footer/index.js","modules/login_prompt/LoginPromptImage.js","HOCs/Layout.js","pages/GetInvitation/index.js","utils/auth.js","pages/Signup/utils/removeSpaces.js","pages/Signup/SignupWithInvitation.js","HOCs/WithError.js","utils/config.js","modules/user_card/UploadImage.js","modules/user_card/AddInfo.js","modules/user_card/Logout.js","modules/user_card/index.js","modules/login_prompt/LoginPromptTrigger.js","modules/post_info/PostInfo.js","pages/Home/posts_container/Post.js","pages/Home/posts_container/LoadMore.js","pages/Home/posts_container/index.js","pages/Home/posts_container/NewPost.js","pages/Home/index.js","pages/Signup/Signup.js","pages/Login/index.js","pages/Post/comments_container/NewComment.js","pages/Post/comments_container/Comment.js","pages/Post/comments_container/index.js","pages/Post/FullScreenImage.js","pages/Post/DeletePostModal.js","pages/Post/index.js","pages/RestorePassword/RestorePassword.js","pages/ResetPassword/ResetPassword.js","pages/404/img/PageNotFoundImg.js","pages/404/PageNotFound.js","App.js","serviceWorker.js","index.js","pages/Home/styles/Posts_container.module.scss","pages/Login/styles/Login.module.scss","modules/post_info/styles/Post_info.module.scss","pages/Signup/styles/Signup.module.scss","pages/GetInvitation/styles/GetInvitation.module.scss","pages/Post/styles/Post.module.scss","modules/user_card/styles/index.module.scss"],"names":["module","exports","q","faunadb","query","adminClient","Client","secret","process","WithLoader","ComponentToWrap","props","useState","isLoading","setIsLoading","src","alt","id","initialState","size","loggedIn","user","email","handle","imageUrl","userDbRef","likes","otherUser","undefined","posts","post","showLoginPrompt","waitToShowLoginPrompt","path","pendingPostLike","pendingPostUnlike","store","createContext","Provider","StateProvider","children","useReducer","state","action","type","payload","data","ref","location","hobbies","occupation","newState","trim","postId","Object","keys","length","postsData","postIndex","findIndex","splice","fieldToRemove","after","newLikeCount","likeCount","like","push","likeIndex","comments","commentId","commentsData","commentIndex","comment","dispatch","value","context","notifications","before","total","totalCurrentPage","isError","isOpen","isLast","isFirst","index","notification","RemoveNotification","useContext","removeNotification","a","Delete","console","log","className","data-dont-detect-click","tabIndex","onClick","Notification","to","sender","Pagination","globalState","changePage","direction","params","Map","Paginate","Reverse","Match","Index","Lambda","Get","Var","response","autoChangePage","useEffect","nextButton","document","getElementById","prevButton","setAttribute","removeAttribute","RemoveAll","getAllNotifications","Promise","resolve","reject","allNotifications","removeAllNotifications","forEach","notificationRef","NotificationsContainer","getUserNotifications","body","addEventListener","e","target","dataset","dontDetectClick","map","key","Bell","setIsError","Count","dealWithNotifications","window","pathname","height","Notifications","Search","tooShort","setTooShort","setQuery","formRef","useRef","inputRef","form","current","input","style","borderBottom","onSubmit","preventDefault","htmlFor","placeholder","onChange","setTimeout","errorMsg","animationDuration","animationName","href","Header","shouldShowSearch","split","FooterKitty","xmlns","width","transform","stroke","strokeWidth","fill","d","fillRule","strokeLinecap","paintOrder","cx","cy","rx","ry","fillOpacity","opacity","lineHeight","fontVariantLigatures","fontVariantPosition","fontVariantCaps","fontVariantNumeric","fontVariantAlternates","fontVariantEastAsian","fontFeatureSettings","fontVariationSettings","WebkitTextIndent","textIndent","WebkitTextAlign","textAlign","WebkitTextDecorationLine","textDecorationLine","WebkitTextDecorationStyle","textDecorationStyle","WebkitTextDecorationColor","textDecorationColor","WebkitTextTransform","textTransform","WebkitTextOrientation","textOrientation","whiteSpace","shapePadding","shapeMargin","inlineSize","isolation","mixBlendMode","solidColor","solidOpacity","color","fontFamily","fontWeight","overflow","Footer","timeoutId","footer","eyesClosed","setEyesClosed","shouldWait","setShouldWait","subscribed","observer","IntersectionObserver","entries","isIntersecting","clearTimeout","currentObserver","observe","unobserve","cat","tongue","eyes","getElementsByTagName","tongueAction","animation","eyesAction","i","handler","onmouseenter","onclick","LoginPromptImage","Layout","wait","callback","timeout","throttle","distance","scrollY","arrow","display","scrollTo","setEmail","error","setError","confirmationSent","setConfirmationSent","addUser","Exists","Casefold","emailExists","emailExistsInUsers","result","Create","Collection","overflowX","getInvitationStyles","confirmation_message","method","name","auth","GoTrue","APIUrl","audience","setCookie","arr","arrNoSpaces","str","join","setHandle","password","setPassword","confirmPassword","setConfirmPassword","handleUnique","setHandleUnique","passwordsMatch","setPasswordsMatch","inviteToken","decodeURIComponent","hash","substring","signup","acceptInvite","then","LowerCase","removeSpaces","res","catch","inputs","labels","onfocus","inputName","getAttribute","j","onblur","getElementsByName","label","border","passwordLabel","confirmPasswordLabel","signupStyles","required","WithError","getElementsByClassName","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","image","setImage","imageFileName","setImageFileName","uploadImage","firebase","apps","initializeApp","imageExtension","pop","uuid","storageRef","storage","imageRef","child","put","updateUserImageUrl","updateUserImageInPosts","updateUserImageInComments","img","Update","updateInComments","allComments","promises","commentRef","promise","userImageUrl","all","updateInPosts","allPosts","postRef","userCardStyles","upload_image_form","encType","message","onKeyDown","click","choose_image","accept","files","change_image_button","setIsAddInfoOpen","setLocation","setHobbies","setOccupation","isSubscribed","addInfoToDb","fetch","headers","JSON","stringify","userHandle","status","removeInfo","info","emptyField","buttons_container","Logout","logout","currentUser","logout_button","User","isAddInfoOpen","isCardOpen","setIsCardOpen","getOwnUserInfo","getLikes","userLikes","getUserInfo","shouldShowCard","button","innerWidth","card","container","open_card_button","login_signup_buttons_container","LoginPromptTrigger","hide","timer","control_showing_login_prompt","dayjs","extend","relativeTime","PostInfo","isLiked","setIsLiked","readyToLike","setReadyToLike","readyToUnlike","setReadyToUnlike","zeroLikes","setZeroLikes","time","setTime","createdAt","fromNow","handleClickLike","recepient","handleClickUnlike","postsInfoStyles","post_info","user_image","lang","commentCount","red_heart","blue_heart","Post","setBody","cutString","postsContainerStyles","post_main_body","image_link","image_container","post_image","loading","LoadMore","setLoading","URLSearchParams","search","get","loadMore","load_more_button","PostsContainer","load_more","loading_message","imageDbName","setImageDbName","imageName","setImageName","AbortController","abort","submitPost","reload","handleSubmit","homeStyles","slideuperror","new_post","rows","minLength","new_post_buttons_container","choose_image_container","setPath","userName","tokens","confirmationToken","recoveryToken","fetchPosts","slice","checkPath","confirm","localStorage","setItem","replace","posts_container","posts_header","emailUnique","setEmailUnique","json","credentialsCorrect","setCredentialsCorrect","login","emailLabel","loginStyles","setComment","addComment","postStyles","new_comment_form","Comment","deleteComment","Date","ts","comment_info","user_info","element","setElement","acontroller","loader","currentElement","end_message","FullScreenImage","url","toggleShow","closeButtonRef","overlay","stopPropagation","onkeydown","image_full_screen_overlay","full_screen_image","close_button","DeletePostModal","setShowModal","deletePost","history","back","modal_container","modal_window","button_container","match","showModal","showFullPageImage","setShowFullPageImage","onmouseleave","content","emailCorrect","setEmailCorrect","emailSent","setEmailSent","restore","requestPasswordRecovery","restore_password_message","passwordUpdated","setPasswordUpdated","userNotFound","setUserNotFound","recover","err","resetPassword","update","disabled","PageNotFoundImg","svgRef","x","y","fontSize","PageNotFound","start","speed","requestAnimationFrame","step","rotate","App","exact","component","Home","Signup","Login","RestorePassword","ResetPassword","Boolean","hostname","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7b10884b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__2x8ZR\",\"posts_container\":\"Home_posts_container__2c1kG\",\"new_post\":\"Home_new_post__1rdmf\",\"new_post_buttons_container\":\"Home_new_post_buttons_container__1wrR5\",\"choose_image_container\":\"Home_choose_image_container__1agZx\",\"posts_header\":\"Home_posts_header__13w6s\",\"slideuperror\":\"Home_slideuperror__PwZyG\"};","import faunadb from \"faunadb\";\r\n\r\nexport const q = faunadb.query;\r\nexport const adminClient = new faunadb.Client({\r\n  secret: process.env.REACT_APP_FAUNA_SECRET,\r\n});\r\n","import React, { useState } from \"react\";\r\n\r\nconst WithLoader = (ComponentToWrap) => {\r\n  return function ComponentWithLoader(props) {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    return (\r\n      <>\r\n        {isLoading && (\r\n          <img\r\n            src=\"/img/loading/loading_kitty.svg\"\r\n            alt=\"loading\"\r\n            id=\"loading_kitty\"\r\n          />\r\n        )}\r\n        <ComponentToWrap {...props} setIsLoading={setIsLoading} />\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\nexport default WithLoader;\r\n\r\n// WithLoader returns a functional component ComponentWithLoader.\r\n// ComponentWithLoader returns ComponentToWrap and passes\r\n// setIsLoading to it, so ComponentToWrap can control it.\r\n","import React, { createContext, useReducer } from \"react\";\r\n\r\nconst initialState = {\r\n  size: 5,\r\n  loggedIn: false,\r\n  user: {\r\n    email: null,\r\n    handle: null,\r\n    imageUrl: null,\r\n    userDbRef: null,\r\n    likes: [],\r\n  },\r\n  otherUser: undefined,\r\n  posts: {},\r\n  post: null,\r\n  showLoginPrompt: false,\r\n  waitToShowLoginPrompt: false,\r\n  path: \"\",\r\n  pendingPostLike: null,\r\n  pendingPostUnlike: null,\r\n};\r\n// store has Provider and Consumer components\r\nconst store = createContext(initialState);\r\nconst { Provider } = store;\r\n\r\nconst StateProvider = ({ children }) => {\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case \"LOG_IN\":\r\n        return { ...state, loggedIn: true };\r\n      case \"SET_USER\": {\r\n        const { data, ref } = action.payload;\r\n        return { ...state, user: { ...state.user, ...data, userDbRef: ref } };\r\n      }\r\n      case \"SET_SHOW_LOGIN_PROMPT\": {\r\n        return { ...state, showLoginPrompt: action.payload };\r\n      }\r\n      case \"SET_OTHER_USER\": {\r\n        return { ...state, otherUser: action.payload };\r\n      }\r\n      case \"SET_WAIT_TO_SHOW_LOGIN_PROMPT\": {\r\n        return { ...state, waitToShowLoginPrompt: action.payload };\r\n      }\r\n      case \"SET_PATH\": {\r\n        return { ...state, path: action.payload };\r\n      }\r\n\r\n      case \"ADD_INFO\": {\r\n        const { location, hobbies, occupation } = action.payload;\r\n\r\n        const newState = {\r\n          ...state,\r\n          user: { ...state.user, location, hobbies, occupation },\r\n        };\r\n\r\n        // If empty...\r\n        if (location === undefined || location.trim() === \"\") {\r\n          delete newState.user.location;\r\n        }\r\n        if (hobbies === undefined || hobbies.trim() === \"\") {\r\n          delete newState.user.hobbies;\r\n        }\r\n        if (occupation === undefined || occupation.trim() === \"\") {\r\n          delete newState.user.occupation;\r\n        }\r\n\r\n        return newState;\r\n      }\r\n\r\n      case \"CHANGE_IMAGE\": {\r\n        return { ...state, user: action.payload };\r\n      }\r\n\r\n      case \"REMOVE_POST\": {\r\n        const postId = action.payload;\r\n        // If there are posts in store...\r\n        if (Object.keys(state.posts).length > 0) {\r\n          const postsData = state.posts.data;\r\n          // 1. find its index,\r\n          const postIndex = postsData.findIndex((post) => {\r\n            return post.data.postId === postId;\r\n          });\r\n\r\n          // 2. delete post from store.\r\n          if (postIndex >= 0) {\r\n            postsData.splice(postIndex, 1);\r\n          }\r\n\r\n          return { ...state, posts: { ...state.posts, data: postsData } };\r\n        }\r\n      }\r\n\r\n      case \"REMOVE_INFO\": {\r\n        const fieldToRemove = action.payload;\r\n\r\n        const newState = {\r\n          ...state,\r\n        };\r\n\r\n        delete newState.user[fieldToRemove];\r\n\r\n        return newState;\r\n      }\r\n\r\n      case \"SET_POSTS\": {\r\n        return {\r\n          ...state,\r\n          posts: action.payload,\r\n        };\r\n      }\r\n      case \"ADD_POSTS\": {\r\n        return {\r\n          ...state,\r\n          posts: {\r\n            ...state.posts,\r\n            data: [...state.posts.data, ...action.payload.data],\r\n            after: action.payload.after,\r\n          },\r\n        };\r\n      }\r\n      case \"SET_CURRENT_POST\": {\r\n        return { ...state, post: action.payload };\r\n      }\r\n      case \"SET_LIKES\": {\r\n        return { ...state, user: { ...state.user, likes: action.payload } };\r\n      }\r\n      case \"CHANGE_LIKE_COUNT\": {\r\n        const { newLikeCount, postId } = action.payload;\r\n\r\n        let postsData;\r\n        if (state.posts && state.posts.data && state.posts.length !== 0) {\r\n          postsData = state.posts.data;\r\n          const postIndex = state.posts.data.findIndex((post) => {\r\n            return post.data.postId === postId;\r\n          });\r\n\r\n          if (postIndex >= 0) {\r\n            postsData[postIndex].data.likeCount = newLikeCount;\r\n          }\r\n        } else {\r\n          postsData = [];\r\n        }\r\n\r\n        // Refresh total likeCount in post in store if it's there.\r\n        if (state.post !== null && state.post !== undefined) {\r\n          return {\r\n            ...state,\r\n            post: {\r\n              ...state.post,\r\n              data: {\r\n                ...state.post.data,\r\n                likeCount: newLikeCount,\r\n              },\r\n            },\r\n            posts: { ...state.posts, data: postsData },\r\n          };\r\n        } else {\r\n          return {\r\n            ...state,\r\n            posts: { ...state.posts, data: postsData },\r\n          };\r\n        }\r\n      }\r\n\r\n      case \"LIKE_POST\": {\r\n        const { like, postId } = action.payload;\r\n\r\n        // Add new like.\r\n        const likes = state.user.likes;\r\n        if (likes.length > 0) {\r\n          // If it's not already there...\r\n          const index = likes.findIndex((like) => {\r\n            return like.data.postId === postId;\r\n          });\r\n          if (index < 0) {\r\n            likes.push(like);\r\n          }\r\n        } else {\r\n          likes.push(like);\r\n        }\r\n\r\n        return {\r\n          ...state,\r\n          user: {\r\n            ...state.user,\r\n            likes,\r\n          },\r\n        };\r\n      }\r\n      case \"UNLIKE_POST\": {\r\n        const { postId } = action.payload;\r\n\r\n        // Find like ref.\r\n        const likeIndex = state.user.likes.findIndex((like) => {\r\n          return like.data.postId === postId;\r\n        });\r\n\r\n        const likes = state.user.likes;\r\n        // Remove like if it exists.\r\n        if (likeIndex >= 0) {\r\n          likes.splice(likeIndex, 1);\r\n        }\r\n\r\n        return {\r\n          ...state,\r\n          user: {\r\n            ...state.user,\r\n            likes,\r\n          },\r\n        };\r\n      }\r\n\r\n      case \"SET_PENDING_POST_LIKE\": {\r\n        const postId = action.payload;\r\n\r\n        return {\r\n          ...state,\r\n          pendingPostLike: postId,\r\n          pendingPostUnlike: null,\r\n        };\r\n      }\r\n\r\n      case \"SET_PENDING_POST_UNLIKE\": {\r\n        const postId = action.payload;\r\n\r\n        return {\r\n          ...state,\r\n          pendingPostUnlike: postId,\r\n          pendingPostLike: null,\r\n        };\r\n      }\r\n\r\n      case \"SET_COMMENTS\": {\r\n        return {\r\n          ...state,\r\n          post: { ...state.post, comments: action.payload },\r\n        };\r\n      }\r\n      case \"ADD_COMMENTS\": {\r\n        return {\r\n          ...state,\r\n          post: {\r\n            ...state.post,\r\n            comments: {\r\n              data: [...state.post.comments.data, ...action.payload.data],\r\n              after: action.payload.after,\r\n            },\r\n          },\r\n        };\r\n      }\r\n      case \"CHANGE_AVATAR\": {\r\n        const { imageUrl } = action.payload;\r\n        return {\r\n          ...state,\r\n          user: { ...state.user, imageUrl },\r\n        };\r\n      }\r\n      case \"SET_POST_ID\": {\r\n        return {\r\n          ...state,\r\n          post: { ...state.post, postId: action.payload },\r\n        };\r\n      }\r\n      case \"DELETE_COMMENT\": {\r\n        const commentId = action.payload;\r\n        const commentsData = state.post.comments.data;\r\n\r\n        // Find comment index.\r\n        const commentIndex = commentsData.findIndex((comment) => {\r\n          return comment.data.commentId === commentId;\r\n        });\r\n\r\n        // Remove comment if it exists.\r\n        if (commentIndex >= 0) {\r\n          commentsData.splice(commentIndex, 1);\r\n        }\r\n\r\n        return {\r\n          ...state,\r\n          post: {\r\n            ...state.post,\r\n            comments: { ...state.post.comments, data: commentsData },\r\n          },\r\n        };\r\n      }\r\n      case \"LOGOUT\": {\r\n        return {\r\n          ...state,\r\n          loggedIn: false,\r\n          user: {\r\n            email: null,\r\n            handle: null,\r\n            imageUrl: null,\r\n            userDbRef: null,\r\n          },\r\n        };\r\n      }\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\r\n};\r\n\r\nexport { store, StateProvider };\r\n\r\n// Provider sends state and dispatch to all the lower components.\r\n// Lower components will access it through useContext(store).\r\n// Store is created here.\r\n","import React, { createContext, useReducer } from \"react\";\r\n\r\nconst context = createContext(undefined);\r\nconst { Provider } = context;\r\n\r\nconst initialState = {\r\n  size: 3,\r\n  notifications: { data: [], before: undefined, after: undefined },\r\n  total: undefined,\r\n  totalCurrentPage: undefined,\r\n  isError: undefined,\r\n  isOpen: undefined,\r\n  isLoading: undefined,\r\n  isLast: undefined,\r\n  isFirst: undefined,\r\n};\r\n\r\nfunction StateProvider({ children }) {\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case \"SET_NOTIFICATIONS\":\r\n        return {\r\n          ...state,\r\n          notifications: { ...state.notifications, data: action.payload },\r\n        };\r\n\r\n      case \"SET_AFTER\":\r\n        return {\r\n          ...state,\r\n          notifications: { ...state.notifications, after: action.payload },\r\n        };\r\n\r\n      case \"SET_BEFORE\":\r\n        return {\r\n          ...state,\r\n          notifications: { ...state.notifications, before: action.payload },\r\n        };\r\n\r\n      case \"REMOVE_NOTIFICATION\":\r\n        const id = action.payload;\r\n        let data = state.notifications.data;\r\n        const index = data.findIndex(\r\n          (notification) => notification.data.id === id\r\n        );\r\n        if (index >= 0) {\r\n          data.splice(index, 1);\r\n        }\r\n        return { ...state, notifications: { ...state.notifications, data } };\r\n\r\n      case \"SET_TOTAL\":\r\n        return { ...state, total: action.payload };\r\n\r\n      case \"SET_TOTAL_CURRENT_PAGE\":\r\n        return { ...state, totalCurrentPage: action.payload };\r\n\r\n      case \"SET_IS_ERROR\":\r\n        return { ...state, isError: action.payload };\r\n\r\n      case \"SET_IS_OPEN\":\r\n        return { ...state, isOpen: action.payload };\r\n\r\n      case \"SET_IS_LOADING\":\r\n        return { ...state, isLoading: action.payload };\r\n\r\n      case \"REMOVE_ALL\":\r\n        return { ...state, notifications: {} };\r\n\r\n      // Remove before (to disable arrow).\r\n      case \"REMOVE_BEFORE\":\r\n        return {\r\n          ...state,\r\n          notifications: { ...state.notifications, before: undefined },\r\n        };\r\n      // Remove after (to disable arrow).\r\n      case \"REMOVE_AFTER\":\r\n        return {\r\n          ...state,\r\n          notifications: { ...state.notifications, after: undefined },\r\n        };\r\n\r\n      case \"SET_IS_LAST_PAGE\":\r\n        return {\r\n          ...state,\r\n          isLast: action.payload,\r\n        };\r\n\r\n      case \"SET_IS_FIRST_PAGE\":\r\n        return {\r\n          ...state,\r\n          isFirst: action.payload,\r\n        };\r\n    }\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\r\n}\r\n\r\nexport { context, StateProvider };\r\n","import React, { useContext } from \"react\";\r\n// Store\r\nimport { context } from \"./utils/store\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n\r\nfunction RemoveNotification({ notification }) {\r\n  const { state, dispatch } = useContext(context);\r\n\r\n  // Remove one notification.\r\n  const removeNotification = async () => {\r\n    try {\r\n      // Remove notification from db.\r\n      await adminClient.query(q.Delete(notification.ref));\r\n\r\n      //Remove notification from the store.\r\n      dispatch({\r\n        type: \"REMOVE_NOTIFICATION\",\r\n        payload: notification.data.id,\r\n      });\r\n\r\n      dispatch({ type: \"SET_TOTAL\", payload: state.total - 1 });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <input\r\n      id=\"remove_notification\"\r\n      type=\"image\"\r\n      src=\"/img/header/remove.svg\"\r\n      className=\"remove_notification_button\"\r\n      data-dont-detect-click=\"true\"\r\n      tabIndex=\"0\"\r\n      onClick={removeNotification}\r\n    />\r\n  );\r\n}\r\n\r\nexport default RemoveNotification;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// Components\r\nimport RemoveNotification from \"./removeOneNotification\";\r\n\r\nfunction Notification({ notification }) {\r\n  return (\r\n    <li data-dont-detect-click=\"true\">\r\n      <Link to={`/user/${notification.data.sender}`}>\r\n        {notification.data.sender}\r\n      </Link>\r\n      {notification.data.type === \"like\" ? \" liked \" : \" commented on \"}\r\n      <Link to={`/post/${notification.data.postId}`}>your post</Link>\r\n      &nbsp;&nbsp;&nbsp;&nbsp;\r\n      <RemoveNotification notification={notification} />\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Notification;\r\n","import React, { useContext, useEffect } from \"react\";\r\n// Store\r\nimport { context } from \"./utils/store\";\r\nimport { store } from \"../../../utils/store\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n\r\nfunction Pagination() {\r\n  const { state: globalState } = useContext(store);\r\n  const { state, dispatch } = useContext(context);\r\n\r\n  // ********************** FUNCTIONS *******************\r\n  // Load new page with notifications\r\n  const changePage = async (direction) => {\r\n    dispatch({ type: \"SET_IS_LOADING\", payload: true });\r\n    let params;\r\n\r\n    if (direction === \"forward\") {\r\n      params = {\r\n        size: state.size,\r\n        after: state.notifications.after,\r\n      };\r\n    } else if (direction === \"back\") {\r\n      params = {\r\n        size: state.size,\r\n        before: state.notifications.before,\r\n      };\r\n    }\r\n\r\n    try {\r\n      const response = await adminClient.query(\r\n        q.Map(\r\n          q.Paginate(\r\n            q.Reverse(\r\n              q.Match(\r\n                q.Index(\"notifications_by_recepient\"),\r\n                globalState.user.handle\r\n              )\r\n            ),\r\n            params\r\n          ),\r\n          q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n        )\r\n      );\r\n\r\n      dispatch({ type: \"SET_NOTIFICATIONS\", payload: response.data });\r\n      dispatch({ type: \"SET_BEFORE\", payload: response.before });\r\n      dispatch({ type: \"SET_AFTER\", payload: response.after });\r\n\r\n      dispatch({ type: \"SET_IS_LOADING\", payload: false });\r\n    } catch (error) {\r\n      console.log(error);\r\n      dispatch({ type: \"SET_IS_LOADING\", payload: false });\r\n    }\r\n  };\r\n\r\n  // Load new page with notifications when all notifications are\r\n  // removed from the current page.\r\n  const autoChangePage = async (direction) => {\r\n    dispatch({ type: \"SET_IS_LOADING\", payload: true });\r\n    let params;\r\n\r\n    if (direction === \"forward\") {\r\n      params = {\r\n        size: state.size,\r\n        after: state.notifications.after,\r\n      };\r\n    } else if (direction === \"back\") {\r\n      params = {\r\n        size: state.size,\r\n        before: state.notifications.before,\r\n      };\r\n    }\r\n\r\n    try {\r\n      const response = await adminClient.query(\r\n        q.Map(\r\n          q.Paginate(\r\n            q.Reverse(\r\n              q.Match(\r\n                q.Index(\"notifications_by_recepient\"),\r\n                globalState.user.handle\r\n              )\r\n            ),\r\n            params\r\n          ),\r\n          q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n        )\r\n      );\r\n\r\n      dispatch({ type: \"SET_NOTIFICATIONS\", payload: response.data });\r\n\r\n      if (!state.isFirst) {\r\n        dispatch({ type: \"SET_BEFORE\", payload: response.before });\r\n      }\r\n\r\n      if (!state.isLast) {\r\n        dispatch({ type: \"SET_AFTER\", payload: response.after });\r\n      }\r\n\r\n      dispatch({ type: \"SET_IS_LOADING\", payload: false });\r\n    } catch (error) {\r\n      console.log(error);\r\n      dispatch({ type: \"SET_IS_LOADING\", payload: false });\r\n    }\r\n  };\r\n\r\n  // ******************************* EFFECTS **************\r\n  // Go to next or prev page when all the notifications on the current page are removed.\r\n  useEffect(() => {\r\n    if (state.totalCurrentPage !== undefined) {\r\n      if (state.totalCurrentPage <= 0) {\r\n        // First try to go forward.\r\n        if (state.notifications.after) {\r\n          autoChangePage(\"forward\");\r\n        } else if (state.notifications.before) {\r\n          autoChangePage(\"back\");\r\n        }\r\n      }\r\n    }\r\n  }, [state.totalCurrentPage]);\r\n\r\n  // Check if page is first or last.\r\n  useEffect(() => {\r\n    if (state.notifications.before) {\r\n      dispatch({ type: \"SET_IS_FIRST_PAGE\", payload: false });\r\n    } else if (!state.notifications.before) {\r\n      dispatch({ type: \"SET_IS_FIRST_PAGE\", payload: true });\r\n    }\r\n\r\n    if (state.notifications.after) {\r\n      dispatch({ type: \"SET_IS_LAST_PAGE\", payload: false });\r\n    } else if (!state.notifications.after) {\r\n      dispatch({ type: \"SET_IS_LAST_PAGE\", payload: true });\r\n    }\r\n  }, [state.notifications]);\r\n\r\n  // Disable next and prev buttons.\r\n  useEffect(() => {\r\n    const nextButton = document.getElementById(\"next_notifications\");\r\n    const prevButton = document.getElementById(\"prev_notifications\");\r\n\r\n    if (state.isLast) {\r\n      nextButton.setAttribute(\"disabled\", \"true\");\r\n    } else if (!state.isLast) {\r\n      nextButton.removeAttribute(\"disabled\");\r\n    }\r\n\r\n    if (state.isFirst) {\r\n      prevButton.setAttribute(\"disabled\", \"true\");\r\n    } else if (!state.isFirst) {\r\n      prevButton.removeAttribute(\"disabled\");\r\n    }\r\n  }, [state.isLast, state.isFirst]);\r\n\r\n  // Close notifications when there are none left.\r\n  useEffect(() => {\r\n    if (state.total <= 0) {\r\n      dispatch({ type: \"SET_IS_OPEN\", payload: false });\r\n    }\r\n  }, [state.total]);\r\n\r\n  // ***************** RETURN *****************************\r\n  return (\r\n    <div id=\"navigation_container\" data-dont-detect-click=\"true\">\r\n      <input\r\n        type=\"image\"\r\n        src=\"/img/header/arrow.svg\"\r\n        tabIndex={!state.notifications.before ? \"-1\" : \"0\"}\r\n        className={`notifications_arrow ${\r\n          !state.notifications.before ? \"inactive\" : null\r\n        }`}\r\n        data-dont-detect-click=\"true\"\r\n        id=\"prev_notifications\"\r\n        onClick={() => {\r\n          changePage(\"back\");\r\n        }}\r\n      />\r\n      &nbsp;\r\n      <input\r\n        type=\"image\"\r\n        src=\"/img/header/arrow.svg\"\r\n        className={`notifications_arrow ${\r\n          !state.notifications.after ? \"inactive\" : null\r\n        }`}\r\n        data-dont-detect-click=\"true\"\r\n        tabIndex={!state.notifications.after ? \"-1\" : \"0\"}\r\n        id=\"next_notifications\"\r\n        onClick={() => {\r\n          changePage(\"forward\");\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pagination;\r\n","import React, { useContext, useEffect } from \"react\";\r\n// Store\r\nimport { store } from \"../../../utils/store\";\r\nimport { context } from \"./utils/store\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n// Components\r\nimport Notification from \"./notification\";\r\nimport Pagination from \"./pagination\";\r\n\r\nfunction RemoveAll() {\r\n  const { state, dispatch } = useContext(context);\r\n  const { state: globalState } = useContext(store);\r\n\r\n  //  ******************** FUNCTIONS *************************\r\n  // Get all user's notifications to remove all of them\r\n  const getAllNotifications = async () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const allNotifications = await adminClient.query(\r\n          q.Paginate(\r\n            q.Match(\r\n              q.Index(\"notifications_by_recepient\"),\r\n              globalState.user.handle\r\n            )\r\n          )\r\n        );\r\n\r\n        resolve(allNotifications.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Remove all notifications\r\n  const removeAllNotifications = async () => {\r\n    try {\r\n      // Get all user's notifications.\r\n      const allNotifications = await getAllNotifications();\r\n      //Remove all notifications from db.\r\n      allNotifications.forEach(async (notificationRef) => {\r\n        await adminClient.query(q.Delete(notificationRef));\r\n      });\r\n\r\n      // Remove all notifications from state.\r\n      dispatch({\r\n        type: \"REMOVE_ALL\",\r\n      });\r\n      // Close notifications.\r\n      dispatch({ type: \"SET_TOTAL\", payload: 0 });\r\n      dispatch({ type: \"SET_IS_OPEN\", payload: false });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  //   *********************** RETURN *****************\r\n  return (\r\n    <div\r\n      id=\"mark_read_buttons_container\"\r\n      className={state.total <= 0 ? \"disabled\" : null}\r\n      data-dont-detect-click=\"true\"\r\n    >\r\n      <button\r\n        id=\"mark_all_read\"\r\n        tabIndex=\"0\"\r\n        onClick={removeAllNotifications}\r\n        data-dont-detect-click=\"true\"\r\n      >\r\n        mark all read\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RemoveAll;\r\n","import React, { useContext, useEffect } from \"react\";\r\n// Store\r\nimport { store } from \"../../../utils/store\";\r\nimport { context } from \"./utils/store\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n// Components\r\nimport Notification from \"./notification\";\r\nimport Pagination from \"./pagination\";\r\nimport RemoveAll from \"./removeAllNotifications\";\r\n\r\nfunction NotificationsContainer() {\r\n  const { state, dispatch } = useContext(context);\r\n  const { state: globalState } = useContext(store);\r\n\r\n  //  *********************** FUNCTIONS ***********\r\n\r\n  //  Get user's notifications.\r\n  const getUserNotifications = (handle) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const response = await adminClient.query(\r\n          q.Map(\r\n            q.Paginate(\r\n              q.Reverse(q.Match(q.Index(\"notifications_by_recepient\"), handle)),\r\n              { size: state.size }\r\n            ),\r\n            q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n          )\r\n        );\r\n\r\n        dispatch({ type: \"SET_NOTIFICATIONS\", payload: response.data });\r\n        dispatch({ type: \"SET_AFTER\", payload: response.after });\r\n        dispatch({ type: \"SET_BEFORE\", payload: response.before });\r\n\r\n        resolve(\"successfully loaded\");\r\n      } catch (error) {\r\n        console.log(error);\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  //  ************************* EFFECTS ************\r\n\r\n  //   Get user's notifications.\r\n  useEffect(() => {\r\n    const handle = globalState.user.handle;\r\n    if (handle) {\r\n      getUserNotifications(handle);\r\n    }\r\n  }, [globalState.user.handle]);\r\n\r\n  //   Set totalCurrentPage from the store.\r\n  useEffect(() => {\r\n    if (state.notifications && state.notifications.data) {\r\n      const totalCurrentPage = state.notifications.data.length;\r\n      dispatch({ type: \"SET_TOTAL_CURRENT_PAGE\", payload: totalCurrentPage });\r\n    }\r\n  }, [state.notifications]);\r\n\r\n  // Close notifications when body is clicked (exclude notifications container)\r\n  useEffect(() => {\r\n    document.body.addEventListener(\"click\", (e) => {\r\n      // Elements in the notifications container have data attribute to find them.\r\n      if (!e.target.dataset.dontDetectClick) {\r\n        dispatch({ type: \"SET_IS_OPEN\", payload: false });\r\n      }\r\n    });\r\n  }, [state.isOpen]);\r\n\r\n  //   ************************* RETURN *****************\r\n  return (\r\n    //  NOTIFICATIONS CONTAINER\r\n    <ul id=\"notifications_container\" data-dont-detect-click=\"true\">\r\n      {state.isLoading ? (\r\n        <p>Loading...</p>\r\n      ) : (\r\n        state.notifications &&\r\n        state.notifications.data &&\r\n        state.notifications.data.map((notification) => (\r\n          // NOTIFICATION\r\n          <Notification\r\n            key={notification.data.id}\r\n            notification={notification}\r\n          />\r\n        ))\r\n      )}\r\n\r\n      {/* PAGINATION */}\r\n      <Pagination />\r\n\r\n      {/* MARK ALL READ BUTTON */}\r\n      <RemoveAll />\r\n\r\n      {/* CLOSE NOTIFICATIONS */}\r\n      <button\r\n        id=\"close_notifications\"\r\n        onClick={() => {\r\n          dispatch({ type: \"SET_IS_OPEN\", payload: false });\r\n        }}\r\n      >\r\n        close\r\n      </button>\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default NotificationsContainer;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\n// Store\r\nimport { store } from \"../../../utils/store\";\r\nimport { context } from \"./utils/store\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n// Components\r\nimport NotificationsContainer from \"./container\";\r\n\r\nfunction Bell() {\r\n  const { state: globalState } = useContext(store);\r\n  const { state, dispatch } = useContext(context);\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  // ****************** FUNCTIONS ************************\r\n\r\n  // Count users notifications, set totalNotifications in the store.\r\n  const countNotifications = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const total = await adminClient.query(\r\n          q.Count(\r\n            q.Match(\r\n              q.Index(\"notifications_by_recepient\"),\r\n              globalState.user.handle\r\n            )\r\n          )\r\n        );\r\n        dispatch({ type: \"SET_TOTAL\", payload: total });\r\n        resolve(\"Success\");\r\n      } catch (error) {\r\n        console.log(error);\r\n        setIsError(true);\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // ********* EFFECTS ***********************************\r\n\r\n  // Count user's notifications.\r\n  useEffect(() => {\r\n    const dealWithNotifications = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        await countNotifications();\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    dealWithNotifications();\r\n  }, [globalState.user.handle, window.location.pathname]);\r\n\r\n  //   *********************** RETURN ***********************\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        // 'Loading' message.\r\n        <p id=\"notifications_loading_msg\">loading...</p>\r\n      ) : // Don't show notifications icon at all if there's an error.\r\n      !isError && state.total <= 0 ? (\r\n        // Transparent bell if there are no notifications.\r\n        <input\r\n          type=\"image\"\r\n          alt=\"notifications\"\r\n          id=\"notifications_bell\"\r\n          src=\"/img/header/bell-transparent.svg\"\r\n          tabIndex=\"-1\"\r\n          className=\"inactive_bell\"\r\n          height=\"49.531\"\r\n        />\r\n      ) : (\r\n        // Yellow bell if there are notifications.\r\n        <>\r\n          <input\r\n            type=\"image\"\r\n            alt=\"notifications\"\r\n            src=\"/img/header/bell-yellow.svg\"\r\n            id=\"notifications_bell\"\r\n            data-dont-detect-click=\"true\"\r\n            height=\"49.531\"\r\n            onClick={() => {\r\n              if (!state.isOpen) {\r\n                dispatch({ type: \"SET_IS_OPEN\", payload: true });\r\n              } else {\r\n                dispatch({ type: \"SET_IS_OPEN\", payload: false });\r\n              }\r\n            }}\r\n          />\r\n          <p id=\"total_notifications\">{state.total}</p>\r\n        </>\r\n      )}\r\n      {/* Notifications container. */}\r\n      {state.isOpen && <NotificationsContainer />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Bell;\r\n","import React from \"react\";\r\n// Store\r\nimport { StateProvider } from \"./utils/store\";\r\n// Components\r\nimport Bell from \"./bell\";\r\n\r\nfunction Notifications() {\r\n  // ****************** RETURN ********************\r\n  return (\r\n    <StateProvider>\r\n      <Bell />\r\n    </StateProvider>\r\n  );\r\n}\r\n\r\nexport default Notifications;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nfunction Search() {\r\n  const [tooShort, setTooShort] = useState(false);\r\n  const [query, setQuery] = useState(\"\");\r\n  const formRef = useRef();\r\n  const inputRef = useRef();\r\n\r\n  // *************** FUNCTIONS *******\r\n\r\n  // Check if search input contains less that three symbols.\r\n  const isTooShort = () => {\r\n    if (query.trim().length < 3) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // ***************** EFFECTS *********\r\n  // Style input field on focus.\r\n  useEffect(() => {\r\n    const form = formRef.current;\r\n    const input = inputRef.current;\r\n    input.addEventListener(\"focus\", () => {\r\n      form.style.borderBottom = \"2.7px solid #48c2d9ff\";\r\n    });\r\n\r\n    input.addEventListener(\"blur\", () => {\r\n      form.style.borderBottom = \"2.7px solid black\";\r\n    });\r\n  }, []);\r\n\r\n  // *************** HANDLERS ************\r\n\r\n  // Handle search input submit.\r\n  const handleSearch = () => {\r\n    const isQueryTooShort = isTooShort();\r\n    // If query is not too short...\r\n    if (!isQueryTooShort) {\r\n      window.location.href = `/search?query=${query}`;\r\n    }\r\n    // If query is too short...\r\n    else {\r\n      setTooShort(true);\r\n\r\n      setTimeout(() => {\r\n        const errorMsg = document.getElementById(\"query_too_short_message\");\r\n        if (errorMsg) {\r\n          errorMsg.style.animationDuration = \"0.6s\";\r\n          errorMsg.style.animationName = \"slideupsearcherror\";\r\n        }\r\n\r\n        setTimeout(() => {\r\n          setTooShort(false);\r\n        }, 500);\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  // *********** RETURN ***************\r\n  return (\r\n    <form\r\n      ref={formRef}\r\n      onSubmit={(e) => {\r\n        e.preventDefault();\r\n      }}\r\n    >\r\n      <label htmlFor=\"query\">Search in posts</label>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"...\"\r\n        ref={inputRef}\r\n        onChange={(e) => {\r\n          setQuery(e.target.value.trim());\r\n          setTooShort(false);\r\n        }}\r\n      />\r\n      <input\r\n        type=\"image\"\r\n        id=\"search_icon\"\r\n        src=\"/img/header/search.svg\"\r\n        alt=\"search icon\"\r\n        onClick={handleSearch}\r\n      />\r\n      {tooShort && (\r\n        <p id=\"query_too_short_message\">\r\n          Must be at least three characters long\r\n        </p>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import React, { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// Store\r\nimport { store } from \"../../utils/store\";\r\n// Components\r\nimport Notifications from \"./notifications/index\";\r\nimport Search from \"./Search\";\r\n// Style\r\nimport \"./styles/style.scss\";\r\n\r\nfunction Header() {\r\n  const { state } = useContext(store);\r\n\r\n  // Check if search should be shown\r\n  const shouldShowSearch = () => {\r\n    const path = window.location.pathname.split(\"/\")[1];\r\n    if (\r\n      path !== \"signup\" &&\r\n      path !== \"login\" &&\r\n      path !== \"restore\" &&\r\n      path !== \"resetpassword\" &&\r\n      path !== \"restorepassword\"\r\n    )\r\n      return true;\r\n    else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ul className=\"header\">\r\n        {shouldShowSearch() && (\r\n          <li>\r\n            <Search />\r\n          </li>\r\n        )}\r\n\r\n        <ul id=\"header_links_container\">\r\n          <li>\r\n            <Link\r\n              to=\"/\"\r\n              className={window.location.pathname === \"/\" ? \"active\" : null}\r\n            >\r\n              Home\r\n            </Link>\r\n          </li>\r\n          {/* If user is logged in... */}\r\n          {state.loggedIn ? (\r\n            <>\r\n              <li>\r\n                {/* 1. Link to profile (user's own posts)... */}\r\n                <Link\r\n                  to=\"/profile\"\r\n                  // 2. Add style to 'active' header link (add underline)...\r\n                  className={\r\n                    window.location.pathname === \"/profile\" ||\r\n                    window.location.pathname === \"/profile/\"\r\n                      ? \"active\"\r\n                      : null\r\n                  }\r\n                >\r\n                  My posts\r\n                </Link>\r\n              </li>\r\n              {/* 3. Show notifications. */}\r\n              <li id=\"with_dropdown\">\r\n                <Notifications />\r\n              </li>\r\n            </>\r\n          ) : (\r\n            // If user is not logged in...\r\n            <>\r\n              {/* ... Add links to signup and login. */}\r\n              <li>\r\n                <Link\r\n                  to=\"/login\"\r\n                  className={\r\n                    window.location.pathname === \"/login\" ||\r\n                    window.location.pathname === \"/login/\"\r\n                      ? \"active\"\r\n                      : null\r\n                  }\r\n                >\r\n                  Login\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  to=\"/signup\"\r\n                  className={\r\n                    window.location.pathname === \"/signup\" ||\r\n                    window.location.pathname === \"/signup/\"\r\n                      ? \"active\"\r\n                      : null\r\n                  }\r\n                >\r\n                  Signup\r\n                </Link>\r\n              </li>\r\n            </>\r\n          )}\r\n        </ul>\r\n      </ul>\r\n      {/* Border on the bottom of the header only on signup and login pages. */}\r\n      {!shouldShowSearch() && <div id=\"header_bottom_border\" />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\n// Style\nimport \"./SVGstyles.scss\";\n\nfunction FooterKitty() {\n  return (\n    <svg\n      id=\"footer_kitty\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"183.957\"\n      height=\"112.294\"\n    >\n      <g transform=\"translate(-196.902 -286.666)\">\n        <g stroke=\"#000\" strokeWidth=\"2\">\n          <path\n            fill=\"#e3e6ed\"\n            d=\"M317.007 381.633c6.169-1.95 11.792-1.588 16.1-1.95 4.309-.364 7.302-1.452 10.567-3.765 3.265-2.313 6.802-5.85 9.454-9.144 2.65-3.295 4.416-6.347 5.822-9.657 1.406-3.31 2.452-6.88 4.7-9.459 2.246-2.579 5.693-4.166 8.958-3.402 3.265.765 6.348 3.88 7.073 7.03.725 3.152-.907 6.342-3.22 10.068-2.312 3.726-5.305 7.989-8.116 11.435-2.812 3.447-5.443 6.077-8.662 8.708-3.22 2.63-7.03 5.26-10.975 7.21a47.051 47.051 0 01-11.474 3.9c-3.446.68-6.258.772-9.705.953-3.447.181-7.528.454-11.519.499-3.99.045-7.891-.136-10.975-.499-3.084-.362-5.351-.907-3.13-3.31 2.222-2.404 8.934-6.667 15.102-8.617z\"\n          ></path>\n          <path\n            fill=\"#89473c\"\n            fillRule=\"evenodd\"\n            strokeLinecap=\"round\"\n            d=\"M371.377 344.27c-2.878-.172-5.763 1.324-7.729 3.58-.922 1.059-1.636 2.289-2.261 3.594a26.395 24.082 0 0015.994 8.573c1.797-3.085 2.924-5.826 2.3-8.537-.724-3.152-3.808-6.267-7.074-7.032a7.322 7.322 0 00-1.23-.177z\"\n            paintOrder=\"fill markers stroke\"\n          ></path>\n          <path\n            fill=\"#89473c\"\n            d=\"M345.066 374.867c-.467.37-.932.725-1.392 1.051-2.187 1.549-4.26 2.538-6.68 3.139.013.035.018.065.031.101.259.69.766 1.613 1.19 2.446.423.832.763 1.576 1.39 2.462.628.887 1.544 1.915 2.473 2.952.93 1.036 1.873 2.08 2.547 2.619.38.304.701.423 1.207.363a45.132 45.132 0 002.875-1.293c2.1-1.038 4.153-2.273 6.107-3.594-.018-.013-.024-.022-.043-.035-.67-.468-1.943-1.236-3.045-1.998-1.102-.762-2.032-1.517-2.94-2.44-.91-.922-1.799-2.01-2.517-3.251-.518-.897-.902-1.786-1.203-2.522zm-25.763 4.567l-.182.443.293 3.143.047 2.45 1.285 3.928c.45 1.334.901 2.667 1.352 3.998.259.143.516.285.775.426l5.291-.353 5.44-.176c0-.029.003-.057.004-.086-.864-1.21-1.725-2.422-2.588-3.635l-1.655-3.193-1.142-4.059.084-2.306-9.004-.58zm37.826-17.862c-.116-.002-.216.127-.416.383a8.51 8.51 0 01-.693.777 42.769 42.769 0 01-2.893 4.041c-.462.574-.98 1.156-1.488 1.737.356.466.617.842.986 1.222.513.53 1.347 1.17 2.068 1.764.722.593 1.33 1.138 2.26 1.7.93.56 2.18 1.139 3.447 1.716s2.55 1.153 3.383 1.377c.834.224 1.22.097 2.567-1.266.279-.282.684-.735 1.027-1.101.322-.379.641-.734.967-1.133a101.27 101.27 0 003.463-4.54c-.115-.15-.34-.229-.616-.265-.737-.096-2.212-.288-3.527-.545-1.315-.256-2.47-.577-3.672-1.058-1.202-.481-2.453-1.121-3.607-1.97-1.155-.85-2.213-1.909-2.742-2.438-.265-.265-.398-.399-.514-.4z\"\n          ></path>\n        </g>\n        <path\n          fill=\"#e3e6ed\"\n          fillRule=\"evenodd\"\n          stroke=\"#000\"\n          strokeLinecap=\"round\"\n          strokeWidth=\"2\"\n          d=\"M330.867 353.724c0 33.899-21.393 44.236-58.692 44.236-37.3 0-74.273-10.722-74.273-44.62 0-8.985 3.032-23.084 9.742-32.348 9.392-12.966 23.38-19.852 23.38-19.852s5.977-11.804 10.6-13.37c3.488-1.181 9.555 8.708 9.555 8.708s9.074-2.5 13.377-2.5c6.599 0 21.09 1.478 21.09 1.478s9.565-8.38 13.19-6.717c3.739 1.717 3.09 14.53 3.09 14.53s9.483 5.796 16.616 15.713c7.335 10.197 12.325 24.658 12.325 34.742z\"\n          paintOrder=\"fill markers stroke\"\n        ></path>\n        <ellipse\n          cx=\"251.156\"\n          cy=\"310.136\"\n          fillRule=\"evenodd\"\n          paintOrder=\"fill markers stroke\"\n          rx=\"4\"\n          ry=\"3.7\"\n        ></ellipse>\n        <path\n          id=\"tongue\"\n          fill=\"#ff2a41\"\n          fillRule=\"evenodd\"\n          stroke=\"#000\"\n          strokeLinecap=\"round\"\n          strokeWidth=\"2\"\n          d=\"M263.377 298.864c-.002.138-.008.27-.008.408 0 7.12.265 14.373 4.543 14.373 4.277 0 7.748-7.39 7.748-14.51 0-.091-.005-.18-.006-.27z\"\n          paintOrder=\"fill markers stroke\"\n        ></path>\n        <path\n          fill=\"#e3e6ed\"\n          fillRule=\"evenodd\"\n          d=\"M274.57 313.725c.384 4.256-3.88 2.55-6.64 1.539-.763-.28-3.134 2.505-5.213 2.06-.822-.177-1.395-1.954-2.113-2.963-.59-.829-4.025.078-4.025-1.887 0-10.414-8.303-15.585 1.154-15.585 4.21 0 15.44-1.967 18.963.693 1.694 1.28-1.018 3.598-1.68 6.244-.786 3.134-.767 6.363-.447 9.899z\"\n          paintOrder=\"fill markers stroke\"\n        ></path>\n        <path\n          fill=\"#89473c\"\n          fillOpacity=\"1\"\n          fillRule=\"evenodd\"\n          stroke=\"#000\"\n          strokeLinecap=\"round\"\n          strokeWidth=\"2\"\n          d=\"M298.09 288.541c-4.038-.45-12.444 6.916-12.444 6.916s-2.332-.228-5.238-.488a26.395 24.082 0 00-5.715 14.963 26.395 24.082 0 0026.395 24.082 26.395 24.082 0 0020.984-9.475 61.114 61.114 0 00-3.529-5.557c-7.133-9.916-16.617-15.712-16.617-15.712s.649-12.813-3.09-14.53a2.425 2.425 0 00-.746-.199z\"\n          opacity=\"1\"\n          paintOrder=\"fill markers stroke\"\n        ></path>\n        <ellipse\n          cx=\"284.898\"\n          cy=\"311.905\"\n          fillRule=\"evenodd\"\n          paintOrder=\"fill markers stroke\"\n          rx=\"4\"\n          ry=\"3.7\"\n        ></ellipse>\n        <path\n          d=\"M269.035 312.225c-.377-.152-.782-.02-.957.091-.174.111-.242.202-.303.278-.12.15-.179.266-.246.392-.133.254-.261.54-.4.842-.278.603-.707 1.29-.717 1.299-.527.487-1.393 1.009-2.146 1.262-.384.128-.749.195-1.01.19-.262-.007-.392-.059-.504-.16-.224-.199-.65-1.295-.967-2.52l-1.937.501c.317 1.226.528 2.58 1.574 3.512.523.466 1.186.652 1.787.666.6.014 1.167-.118 1.693-.295a8.167 8.167 0 002.868-1.687c.15-.139.16-.303.273-.451.047.198.038.38.197.615.613.903 1.637 1.314 2.653 1.424 1.025.11 2.192-.052 3.248-.68 1.055-.628 1.818-1.575 2.298-2.2.481-.624.71-1.021.891-1.34l-1.736-.991c-.182.317-.314.557-.74 1.111-.427.554-1.115 1.331-1.737 1.701-.621.37-1.36.479-2.012.408-.661-.07-1.013-.263-1.21-.554.094.139-.006-.036-.038-.282a10.44 10.44 0 01-.06-.904c-.01-.328-.015-.65-.035-.94a2.853 2.853 0 00-.057-.443 1.237 1.237 0 00-.105-.312.988.988 0 00-.565-.533zm-17.287 15.17c-.903-.087-1.906-.06-2.994.076-2.177.27-7.788 2.207-7.904 2.592l1.392 1c2.429-.692 4.829-1.368 6.758-1.608 1.93-.24 3.454-.034 4.295.361.841.396 1.083.897 1.086 1.36.003.444-.399 1.242-.885 1.785-.488.545-1.008.884-1.642 1.256-.635.372-1.304.729-1.985 1.092l-.113 1.9c.68-.364 2.428-.868 3.11-1.268.68-.399 1.428-.876 2.118-1.646.692-.772 1.405-1.828 1.397-3.13-.008-1.286-.856-2.508-2.236-3.157-.691-.325-1.494-.527-2.397-.613z\"\n          style={{\n            lineHeight: \"normal\",\n            fontVariantLigatures: \"normal\",\n            fontVariantPosition: \"normal\",\n            fontVariantCaps: \"normal\",\n            fontVariantNumeric: \"normal\",\n            fontVariantAlternates: \"normal\",\n            fontVariantEastAsian: \"normal\",\n            fontFeatureSettings: \"normal\",\n            fontVariationSettings: \"normal\",\n            WebkitTextIndent: \"0\",\n            textIndent: \"0\",\n            WebkitTextAlign: \"start\",\n            textAlign: \"start\",\n            WebkitTextDecorationLine: \"none\",\n            textDecorationLine: \"none\",\n            WebkitTextDecorationStyle: \"solid\",\n            textDecorationStyle: \"solid\",\n            WebkitTextDecorationColor: \"#000\",\n            textDecorationColor: \"#000\",\n            WebkitTextTransform: \"none\",\n            textTransform: \"none\",\n            WebkitTextOrientation: \"mixed\",\n            textOrientation: \"mixed\",\n            whiteSpace: \"normal\",\n            shapePadding: \"0\",\n            shapeMargin: \"0\",\n            inlineSize: \"0\",\n            isolation: \"auto\",\n            mixBlendMode: \"normal\",\n            solidColor: \"#000\",\n            solidOpacity: \"1\",\n          }}\n          color=\"#000\"\n          fontFamily=\"sans-serif\"\n          fontWeight=\"400\"\n          overflow=\"visible\"\n        ></path>\n        <path\n          fill=\"none\"\n          stroke=\"#000\"\n          strokeWidth=\"2\"\n          d=\"M224.146 305.795l3.946 4.354m-10.405-.081l8.157 5.084\"\n        ></path>\n        <path\n          style={{\n            lineHeight: \"normal\",\n            fontVariantLigatures: \"normal\",\n            fontVariantPosition: \"normal\",\n            fontVariantCaps: \"normal\",\n            fontVariantNumeric: \"normal\",\n            fontVariantAlternates: \"normal\",\n            fontVariantEastAsian: \"normal\",\n            fontFeatureSettings: \"normal\",\n            fontVariationSettings: \"normal\",\n            WebkitTextIndent: \"0\",\n            textIndent: \"0\",\n            WebkitTextAlign: \"start\",\n            textAlign: \"start\",\n            WebkitTextDecorationLine: \"none\",\n            textDecorationLine: \"none\",\n            WebkitTextDecorationStyle: \"solid\",\n            textDecorationStyle: \"solid\",\n            WebkitTextDecorationColor: \"#000\",\n            textDecorationColor: \"#000\",\n            WebkitTextTransform: \"none\",\n            textTransform: \"none\",\n            WebkitTextOrientation: \"mixed\",\n            textOrientation: \"mixed\",\n            whiteSpace: \"normal\",\n            shapePadding: \"0\",\n            shapeMargin: \"0\",\n            inlineSize: \"0\",\n            isolation: \"auto\",\n            mixBlendMode: \"normal\",\n            solidColor: \"#000\",\n            solidOpacity: \"1\",\n          }}\n          d=\"M251.748 327.395c-.903-.087-1.906-.06-2.994.076-2.177.27-7.788 2.207-7.904 2.592l1.392 1c2.429-.692 4.829-1.368 6.758-1.608 1.93-.24 3.454-.034 4.295.361.841.396 1.083.897 1.086 1.36.003.444-.399 1.242-.885 1.785-.488.545-1.008.884-1.642 1.256-.635.372-1.304.729-1.985 1.092l-.113 1.9c.68-.364 2.428-.868 3.11-1.268.68-.399 1.428-.876 2.118-1.646.692-.772 1.405-1.828 1.397-3.13-.008-1.286-.856-2.508-2.236-3.157-.691-.325-1.494-.527-2.397-.613zm31.515 2.147c.888.185 1.837.51 2.837.961 1.998.904 6.374 4.18 6.37 4.583l-1.966 1.086c-2.114-1.381-3.457-3.046-5.228-3.847-1.772-.801-3.289-1.057-4.209-.93-.92.129-1.3.535-1.44.977-.135.423.011 1.305.315 1.967.305.665.7 1.143 1.196 1.687.495.543 2.899 2.113 3.44 2.662l-1.373 1.395c-.542-.549-3.013-2.127-3.545-2.71-.532-.584-1.104-1.262-1.535-2.202-.432-.942-.799-2.163-.405-3.404.39-1.225 1.562-2.14 3.073-2.35.755-.105 1.582-.06 2.47.125z\"\n          color=\"#000\"\n          fontFamily=\"sans-serif\"\n          fontWeight=\"400\"\n          overflow=\"visible\"\n        ></path>\n        <path\n          fill=\"none\"\n          stroke=\"#000\"\n          strokeWidth=\"2\"\n          d=\"M309.267 309.692l-4.528 3.745m11.269 1.473l-8.437 4.604\"\n        ></path>\n      </g>\n    </svg>\n  );\n}\n\nexport default FooterKitty;\n","import React, { useEffect, useRef, useState } from \"react\";\r\n// SVG\r\nimport FooterKitty from \"./img/footer_kitty.js\";\r\n// Style\r\nimport \"./styles/style.scss\";\r\n\r\nfunction Footer() {\r\n  const footer = useRef();\r\n  const [eyesClosed, setEyesClosed] = useState(false);\r\n  const [shouldWait, setShouldWait] = useState(false);\r\n  let subscribed = true;\r\n  let timeoutId;\r\n\r\n  // Set the observer to activate movement\r\n  // 1 second after the svg is detected by InsersectonObserver.\r\n  const observer = useRef(\r\n    new IntersectionObserver((entries) => {\r\n      const bottomElement = entries[0];\r\n      // If footer is visible...\r\n      if (bottomElement.isIntersecting) {\r\n        subscribed = true;\r\n        // ... start moving the SVG.\r\n        timeoutId = setTimeout(() => {\r\n          if (subscribed) {\r\n            setEyesClosed(true);\r\n          }\r\n        }, 1000);\r\n      } else {\r\n        setEyesClosed(false);\r\n        if (timeoutId) {\r\n          clearTimeout(timeoutId);\r\n        }\r\n      }\r\n    })\r\n  );\r\n\r\n  // Start observing.\r\n  useEffect(() => {\r\n    const currentObserver = observer.current;\r\n    if (footer.current) {\r\n      currentObserver.observe(footer.current);\r\n    }\r\n\r\n    return () => {\r\n      if (footer.current) {\r\n        currentObserver.unobserve(footer.current);\r\n      }\r\n    };\r\n  }, [footer]);\r\n\r\n  // Animate the cat svg only when it's visible and when it's clicked or hovered.\r\n  useEffect(() => {\r\n    const cat = document.getElementById(\"footer_kitty\");\r\n    const tongue = cat.getElementById(\"tongue\");\r\n    const eyes = cat.getElementsByTagName(\"ellipse\");\r\n\r\n    // Show tongue or hide tongue depending on the argument (string 'show' or 'hide').\r\n    const tongueAction = (action) => {\r\n      // Show tongue.\r\n      if (action === \"show\") {\r\n        tongue.style.animation = \"showTongue 1s ease-out forwards\";\r\n      }\r\n      // Hide tongue.\r\n      else if (action === \"hide\") {\r\n        tongue.style.animation = \"hideTongue 1s ease-out forwards\";\r\n      }\r\n    };\r\n\r\n    // Close eyes or open eyes  depending on the argument (string 'open' or 'close').\r\n    const eyesAction = (action) => {\r\n      // Close eyes.\r\n      if (action === \"close\") {\r\n        for (let i = 0; i < eyes.length; i++) {\r\n          eyes[i].style.animation = \"closeEyes 0.5s ease-out forwards\";\r\n        }\r\n      }\r\n      // Open eyes.\r\n      else if (action === \"open\") {\r\n        for (let i = 0; i < eyes.length; i++) {\r\n          eyes[i].style.animation = \"openEyes 0.5s ease-out forwards\";\r\n        }\r\n      }\r\n    };\r\n\r\n    // Close eyes, show tongue.\r\n    if (eyesClosed) {\r\n      tongueAction(\"show\");\r\n      eyesAction(\"close\");\r\n      setShouldWait(true);\r\n\r\n      setTimeout(() => {\r\n        if (subscribed) setShouldWait(false);\r\n      }, 1000);\r\n    }\r\n    // Open eyes, hide tongue.\r\n    else {\r\n      tongue.style.animation = \"none\";\r\n      for (let i = 0; i < eyes.length; i++) {\r\n        eyes[i].style.animation = \"none\";\r\n        eyes[i].style.animation = \"none\";\r\n      }\r\n      if (subscribed) setShouldWait(false);\r\n    }\r\n\r\n    const handler = () => {\r\n      if (!shouldWait) {\r\n        if (eyesClosed) {\r\n          tongueAction(\"hide\");\r\n          eyesAction(\"open\");\r\n          setShouldWait(true);\r\n          setTimeout(() => {\r\n            if (subscribed) {\r\n              setShouldWait(false);\r\n              setEyesClosed(false);\r\n            }\r\n          }, 1000);\r\n        } else if (!eyesClosed) {\r\n          tongueAction(\"show\");\r\n          eyesAction(\"close\");\r\n          setShouldWait(true);\r\n          setTimeout(() => {\r\n            if (subscribed) {\r\n              setShouldWait(false);\r\n              setEyesClosed(true);\r\n            }\r\n          }, 1000);\r\n        }\r\n      }\r\n    };\r\n\r\n    cat.onmouseenter = () => {\r\n      handler();\r\n    };\r\n\r\n    cat.onclick = () => {\r\n      handler();\r\n    };\r\n\r\n    return () => {\r\n      subscribed = false;\r\n    };\r\n  }, [eyesClosed]);\r\n\r\n  // Unsubscribe.\r\n  useEffect(() => {\r\n    return () => {\r\n      subscribed = false;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"footer\" ref={footer}>\r\n      <FooterKitty />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React, { useContext } from \"react\";\r\n// Store\r\nimport { store } from \"../../utils/store\";\r\n// Style\r\nimport \"./svgStyle.scss\";\r\n\r\nfunction LoginPromptImage() {\r\n  const { state } = useContext(store);\r\n\r\n  return (\r\n    <>\r\n      {/* Login prompt (image sliding left to ask the user to login) */}\r\n      {state.showLoginPrompt && (\r\n        <input\r\n          type=\"image\"\r\n          src=\"/img/login_prompt/sliding_kitty.svg\"\r\n          alt=\"cat prompting to login\"\r\n          id=\"sliding_kitty\"\r\n          className=\"image_ask_to_login\"\r\n          onClick={() => {\r\n            window.location.href = \"/login\";\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoginPromptImage;\r\n","import React, { useRef, useContext } from \"react\";\r\n// Components\r\nimport Header from \"../modules/header/\";\r\nimport Footer from \"../modules/footer/\";\r\nimport LoginPromptImage from \"../modules/login_prompt/LoginPromptImage\";\r\n\r\n// Store\r\nimport { store } from \"../utils/store\";\r\n\r\nfunction Layout(props) {\r\n  const wait = useRef(false);\r\n  const { state } = useContext(store);\r\n\r\n  const throttle = (callback, timeout) => {\r\n    return () => {\r\n      // 3. Don't do anything if there is timoutId = waiting\r\n      if (wait.current) {\r\n        return;\r\n      }\r\n\r\n      // 1. Execute callback\r\n      callback();\r\n\r\n      // 2. Wait\r\n      wait.current = true;\r\n\r\n      // 4. Stop waiting\r\n      setTimeout(() => {\r\n        wait.current = false;\r\n      }, timeout);\r\n    };\r\n  };\r\n\r\n  const callback = () => {\r\n    const distance = window.scrollY;\r\n    const arrow = document.getElementById(\"up_arrow\");\r\n\r\n    if (distance > 600) {\r\n      arrow.style.display = \"block\";\r\n    } else if (distance < 600) {\r\n      arrow.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  // Hide/show 'goUp' arrow.\r\n  window.addEventListener(\"scroll\", throttle(callback, 1000));\r\n\r\n  return (\r\n    <>\r\n      <div className=\"content\">\r\n        <Header />\r\n        {props.children}\r\n      </div>\r\n      <input\r\n        alt=\"arrow pointing up\"\r\n        type=\"image\"\r\n        src=\"/img/up-arrow.svg\"\r\n        tabIndex=\"0\"\r\n        className=\"up_arrow\"\r\n        id=\"up_arrow\"\r\n        style={{ display: \"none\" }}\r\n        onClick={() => window.scrollTo(0, 0)}\r\n      />\r\n\r\n      {/* Login prompt image (appears when trying to like without being logged in) */}\r\n      {!state.loggedIn && <LoginPromptImage />}\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Layout;\r\n","import React, { useState, useEffect } from \"react\";\r\n// faunaDB\r\nimport { q, adminClient } from \"../../utils/faunaDB\";\r\n// withLoader hoc\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\n// Styles\r\nimport getInvitationStyles from \"./styles/GetInvitation.module.scss\";\r\n// Layout\r\nimport Layout from \"../../HOCs/Layout\";\r\n\r\nfunction GetInvitation({ setIsLoading }) {\r\n  const [email, setEmail] = useState();\r\n  const [error, setError] = useState(undefined);\r\n  const [confirmationSent, setConfirmationSent] = useState(false);\r\n\r\n  // Check if user email doesn't exist in db already.\r\n  const isEmailUnique = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const emailExists = await adminClient.query(\r\n          q.Exists(q.Match(q.Index(\"emails_to_invite\"), q.Casefold(email)))\r\n        );\r\n\r\n        const emailExistsInUsers = await adminClient.query(\r\n          q.Exists(q.Match(q.Index(\"users_by_email\"), q.Casefold(email)))\r\n        );\r\n\r\n        if (emailExists || emailExistsInUsers) {\r\n          setError(\"Email already in use\");\r\n          resolve(false);\r\n        } else {\r\n          setError(undefined);\r\n          setConfirmationSent(true);\r\n          resolve(true);\r\n        }\r\n      } catch (error) {\r\n        reject(error);\r\n        setError(\"Something went wrong, please try again later\");\r\n      }\r\n    });\r\n  };\r\n\r\n  // Add email to db.\r\n  const addUser = async () => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const result = await isEmailUnique();\r\n\r\n      if (result === true) {\r\n        await adminClient.query(\r\n          q.Create(q.Collection(\"emails_to_invite\"), {\r\n            data: {\r\n              email,\r\n            },\r\n          })\r\n        );\r\n      } else if (result === false) {\r\n        setError(\"Email already in use\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // OverflowX = hidden on body (otherwise the page jumps on animation - buttom scroll appears and disappears)\r\n  useEffect(() => {\r\n    document.body.style.overflowX = \"hidden\";\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      {confirmationSent ? (\r\n        <p id={getInvitationStyles.confirmation_message}>\r\n          Invitation will be sent to this email address\r\n        </p>\r\n      ) : (\r\n        <form\r\n          id={getInvitationStyles.form}\r\n          method=\"POST\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            addUser();\r\n          }}\r\n        >\r\n          <label htmlFor=\"email\">Email:</label>\r\n          <input\r\n            name=\"email\"\r\n            id=\"email\"\r\n            onChange={(e) => {\r\n              setEmail(e.target.value);\r\n            }}\r\n          />\r\n          <button>Send invitation</button>\r\n          {error && <p>{error}</p>}\r\n        </form>\r\n      )}\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(GetInvitation, \"loading\");\r\n","// GoTrue - user authentication library\r\nimport GoTrue from \"gotrue-js\";\r\n\r\nconst auth = new GoTrue({\r\n  APIUrl: \"https://petshow.netlify.app/.netlify/identity\",\r\n  audience: \"\",\r\n  setCookie: false,\r\n});\r\n\r\nexport default auth;\r\n","// Remove unnecessary spaces from user's handle\r\nexport default (handle) => {\r\n  const arr = handle.split(\" \");\r\n  const arrNoSpaces = [];\r\n  arr.forEach((str) => {\r\n    if (str !== \"\") {\r\n      arrNoSpaces.push(str);\r\n    }\r\n  });\r\n  const result = arrNoSpaces.join(\" \");\r\n  return result;\r\n};\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\n// store\r\nimport { store } from \"../../utils/store\";\r\n// faunaDB\r\nimport { q, adminClient } from \"../../utils/faunaDB\";\r\n// auth\r\nimport auth from \"../../utils/auth\";\r\n// withLoader hoc\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\n// Styles\r\nimport signupStyles from \"./styles/Signup.module.scss\";\r\n// Layout\r\nimport Layout from \"../../HOCs/Layout\";\r\n// Helpers\r\nimport removeSpaces from \"./utils/removeSpaces\";\r\n\r\nfunction Signup({ setIsLoading }) {\r\n  const { dispatch } = useContext(store);\r\n\r\n  const [handle, setHandle] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [confirmPassword, setConfirmPassword] = useState();\r\n\r\n  const [handleUnique, setHandleUnique] = useState();\r\n  const [passwordsMatch, setPasswordsMatch] = useState();\r\n\r\n  // General error\r\n  const [isError, setIsError] = useState();\r\n\r\n  // Invite token\r\n  let inviteToken = decodeURIComponent(window.location.hash)\r\n    .substring(1)\r\n    .split(\"invite_token=\")[1];\r\n\r\n  // Loading = false\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Add user to 'users' collection in db.\r\n  const addUserToDb = (email) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const res = await adminClient.query(\r\n          q.Create(q.Collection(\"users\"), {\r\n            data: {\r\n              handle: q.LowerCase(removeSpaces(handle)),\r\n              email: q.LowerCase(email),\r\n              imageUrl: `https://firebasestorage.googleapis.com/v0/b/${process.env.REACT_APP_BUCKET}/o/dandelion.jpg?alt=media`,\r\n            },\r\n          })\r\n        );\r\n        resolve(res);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Check if user handle doesn't exist in db already.\r\n  const isHandleUnique = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const res = await adminClient.query(\r\n          q.Exists(q.Match(q.Index(\"users_by_handle\"), q.Casefold(handle)))\r\n        );\r\n\r\n        if (res === true) {\r\n          setHandleUnique(false);\r\n          resolve(false);\r\n        } else {\r\n          setHandleUnique(true);\r\n          resolve(true);\r\n        }\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Check if password and confirmPassword match.\r\n  const doPasswordsMatch = () => {\r\n    if (password === confirmPassword) {\r\n      setPasswordsMatch(true);\r\n      return true;\r\n    } else {\r\n      setPasswordsMatch(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Signup and login at the same time.\r\n  const signup = async (e) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const handleUnique = await isHandleUnique();\r\n\r\n      if (handleUnique && doPasswordsMatch()) {\r\n        auth\r\n          .acceptInvite(inviteToken, password, true)\r\n          .then((response) => {\r\n            return addUserToDb(response.email);\r\n          })\r\n          .then((res) => {\r\n            console.log(res);\r\n          })\r\n\r\n          .catch((error) => {\r\n            console.log(error);\r\n            setIsError(true);\r\n          });\r\n\r\n        //await auth.login(email, password, true);\r\n        dispatch({ type: \"LOG_IN\" });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsError(true);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // Change color of labels when corresponding input is active.\r\n  useEffect(() => {\r\n    const inputs = document.getElementsByTagName(\"input\");\r\n    const labels = document.getElementsByTagName(\"label\");\r\n    for (let i = 0; i < inputs.length; i++) {\r\n      inputs[i].onfocus = function () {\r\n        const inputName = inputs[i].getAttribute(\"name\");\r\n        for (let j = 0; j < labels.length; j++) {\r\n          if (inputName === labels[j].htmlFor) {\r\n            labels[j].style.color = \"rgba(48, 136, 135, 1.00)\";\r\n          }\r\n        }\r\n      };\r\n\r\n      inputs[i].onblur = function () {\r\n        const inputName = inputs[i].getAttribute(\"name\");\r\n        for (let j = 0; j < labels.length; j++) {\r\n          if (inputName === labels[j].htmlFor) {\r\n            labels[j].style.color = \"black\";\r\n          }\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  // Change color of handle label and input if there is error.\r\n  useEffect(() => {\r\n    const input = document.getElementsByName(\"handle\")[0];\r\n    const label = document.getElementById(\"handle_label\");\r\n    if (handleUnique || handleUnique === undefined) {\r\n      input.style.border = \"1px solid black\";\r\n      label.style.color = \"black\";\r\n    } else if (!handleUnique) {\r\n      input.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      label.style.color = \"rgba(211, 56, 49, 1)\";\r\n    }\r\n  }, [handleUnique]);\r\n\r\n  // OverflowX = hidden on body (otherwise the page jumps on animation - buttom scroll appears and disappears)\r\n  useEffect(() => {\r\n    document.body.style.overflowX = \"hidden\";\r\n  }, []);\r\n\r\n  // // Change color of email label and input if there is error.\r\n  // useEffect(() => {\r\n  //   const input = document.getElementsByName(\"email\")[0];\r\n  //   const label = document.getElementById(\"email_label\");\r\n  //   if (emailUnique || emailUnique === undefined) {\r\n  //     input.style.border = \"1px solid black\";\r\n  //     label.style.color = \"black\";\r\n  //   } else if (!emailUnique) {\r\n  //     input.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n  //     label.style.color = \"rgba(211, 56, 49, 1)\";\r\n  //   }\r\n  // }, [emailUnique]);\r\n\r\n  // Change color of passwords label and input if there is error.\r\n  useEffect(() => {\r\n    const password = document.getElementsByName(\"password\")[0];\r\n    const confirmPassword = document.getElementsByName(\"confirmPassword\")[0];\r\n    const passwordLabel = document.getElementById(\"password_label\");\r\n    const confirmPasswordLabel = document.getElementById(\r\n      \"confirm_password_label\"\r\n    );\r\n    if (passwordsMatch || passwordsMatch === undefined) {\r\n      password.style.border = \"1px solid black\";\r\n      confirmPassword.style.border = \"1px solid black\";\r\n      passwordLabel.style.color = \"black\";\r\n      confirmPasswordLabel.style.color = \"black\";\r\n    } else if (!passwordsMatch) {\r\n      password.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      confirmPassword.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      passwordLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n      confirmPasswordLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n    }\r\n  }, [passwordsMatch]);\r\n\r\n  // Remove body className to remove background applied on home page.\r\n  // Remove class of root to have background only on home page.\r\n  useEffect(() => {\r\n    const body = document.getElementsByTagName(\"body\")[0];\r\n    body.removeAttribute(\"id\");\r\n\r\n    const root = document.getElementById(\"root\");\r\n    root.removeAttribute(\"class\");\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          signup(e);\r\n        }}\r\n        method=\"post\"\r\n        id={signupStyles.form}\r\n      >\r\n        <label htmlFor=\"handle\" id=\"handle_label\">\r\n          Username:\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"handle\"\r\n          id=\"handle\"\r\n          onChange={(e) => {\r\n            setHandleUnique(undefined);\r\n            setIsError(false);\r\n            setHandle(e.target.value);\r\n          }}\r\n          required\r\n        ></input>\r\n\r\n        {!handleUnique && <p>This handle is already in use</p>}\r\n\r\n        <label htmlFor=\"password\" id=\"password_label\">\r\n          Password:\r\n        </label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          id=\"password\"\r\n          onChange={(e) => {\r\n            setPassword(e.target.value);\r\n            setIsError(false);\r\n            setPasswordsMatch(true);\r\n          }}\r\n          required=\"required\"\r\n        ></input>\r\n\r\n        <label htmlFor=\"confirmPassword\" id=\"confirm_password_label\">\r\n          Confirm password:\r\n        </label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"confirmPassword\"\r\n          id=\"confirmPassword\"\r\n          onChange={(e) => {\r\n            setConfirmPassword(e.target.value);\r\n            setIsError(false);\r\n            setPasswordsMatch(true);\r\n          }}\r\n          required=\"required\"\r\n        ></input>\r\n        {passwordsMatch === false ? <p>Passwords don't match</p> : null}\r\n\r\n        {isError && <p>Error occured, please try again later</p>}\r\n\r\n        <button type=\"submit\">Signup</button>\r\n      </form>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(Signup, \"Signing up...\");\r\n","import React, { useState } from \"react\";\r\n\r\nconst WithError = (ComponentToWrap) => {\r\n  return function ComponentWithError(props) {\r\n    const [isError, setIsError] = useState(false);\r\n    const errorMessage = \"Error occured, please try again later\";\r\n\r\n    const closeError = () => {\r\n      setIsError(false);\r\n    };\r\n\r\n    // Animate error div going up.\r\n    setTimeout(() => {\r\n      const error = document.getElementsByClassName(\"with_error\")[0];\r\n      if (isError && error) {\r\n        error.style.animationName = \"slideup\";\r\n        setTimeout(() => {\r\n          setIsError(false);\r\n        }, 500);\r\n      }\r\n    }, 3000);\r\n\r\n    return (\r\n      <>\r\n        {isError && (\r\n          <div className=\"with_error\">\r\n            <p>{errorMessage}</p>\r\n\r\n            <button onClick={closeError}>x</button>\r\n          </div>\r\n        )}\r\n        <ComponentToWrap {...props} setIsError={setIsError} />\r\n      </>\r\n    );\r\n  };\r\n};\r\n\r\nexport default WithError;\r\n","const config = {\r\n  apiKey: \"AIzaSyCz5dNIi1LHfaxhb-g_FIS3wQ7Vla0ZBTs\",\r\n  authDomain: \"watch-forum.firebaseapp.com\",\r\n  databaseURL: \"https://watch-forum.firebaseio.com\",\r\n  projectId: \"watch-forum\",\r\n  storageBucket: \"watch-forum.appspot.com\",\r\n  messagingSenderId: \"27125407602\",\r\n  appId: \"1:27125407602:web:c74f43b62254ef6f7a47eb\",\r\n  measurementId: \"G-Y4G43N9LZ1\",\r\n};\r\n\r\nexport default config;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\n// store\r\nimport { store } from \"../../utils/store\";\r\n// faunaDB\r\nimport { q, adminClient } from \"../../utils/faunaDB\";\r\n// HOCs\r\nimport WithError from \"../../HOCs/WithError\";\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\n// firebase\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/storage\";\r\n// config for firebase\r\nimport config from \"../../utils/config\";\r\n// uuid\r\nimport uuid from \"react-uuid\";\r\n// Styles\r\nimport userCardStyles from \"./styles/index.module.scss\";\r\n\r\nfunction UploadImage({ setIsLoading, setIsError }) {\r\n  const { state, dispatch } = useContext(store);\r\n  const [image, setImage] = useState();\r\n  const [imageFileName, setImageFileName] = useState(undefined);\r\n\r\n  let imageUrl;\r\n\r\n  // Upload avatar (bundler function)\r\n  const uploadImage = async () => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // Initialize only if not initialized previously.\r\n      if (!firebase.apps.length) {\r\n        firebase.initializeApp(config);\r\n      }\r\n\r\n      const imageExtension = image.name.split(\".\").pop();\r\n\r\n      const imageFileName = `${uuid()}.${imageExtension}`;\r\n\r\n      // Root reference.\r\n      var storageRef = firebase.storage().ref();\r\n      // Reference to new file.\r\n      var imageRef = storageRef.child(imageFileName);\r\n\r\n      await imageRef.put(image);\r\n\r\n      await updateUserImageUrl(imageFileName);\r\n\r\n      await updateUserImageInPosts(imageFileName);\r\n\r\n      await updateUserImageInComments(imageFileName);\r\n\r\n      dispatch({ type: \"CHANGE_AVATAR\", payload: { imageUrl } });\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsError(true);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // Update user image in user document in 'users' collection.\r\n  const updateUserImageUrl = (img) => {\r\n    imageUrl = `https://firebasestorage.googleapis.com/v0/b/${process.env.REACT_APP_BUCKET}/o/${img}?alt=media`;\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        await adminClient.query(\r\n          q.Update(state.user.userDbRef, {\r\n            data: {\r\n              imageUrl,\r\n            },\r\n          })\r\n        );\r\n\r\n        resolve(\"Successfully updated image URL\");\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Update user image in comments.\r\n  const updateInComments = (allComments, img) => {\r\n    const promises = [];\r\n\r\n    allComments.data.forEach((commentRef) => {\r\n      const promise = new Promise(async (resolve, reject) => {\r\n        adminClient.query(\r\n          q.Update(commentRef, {\r\n            data: {\r\n              userImageUrl: `https://firebasestorage.googleapis.com/v0/b/${process.env.REACT_APP_BUCKET}/o/${img}?alt=media`,\r\n            },\r\n          })\r\n        );\r\n        resolve(\"success\");\r\n      });\r\n      promises.push(promise);\r\n    });\r\n\r\n    return promises;\r\n  };\r\n  const updateUserImageInComments = (img) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        // Refs\r\n        const allComments = await adminClient.query(\r\n          q.Paginate(\r\n            q.Reverse(q.Match(q.Index(\"comments_by_user\"), state.user.handle)),\r\n            {\r\n              size: 1000,\r\n            }\r\n          )\r\n        );\r\n\r\n        await Promise.all(updateInComments(allComments, img));\r\n\r\n        resolve(\"Successfully updated image URL in comments\");\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Update user image in post (userImageUrl).\r\n  const updateInPosts = (allPosts, img) => {\r\n    const promises = [];\r\n\r\n    allPosts.data.forEach((postRef) => {\r\n      const promise = new Promise(async (resolve, reject) => {\r\n        adminClient.query(\r\n          q.Update(postRef, {\r\n            data: {\r\n              userImageUrl: `https://firebasestorage.googleapis.com/v0/b/${process.env.REACT_APP_BUCKET}/o/${img}?alt=media`,\r\n            },\r\n          })\r\n        );\r\n        resolve(\"success\");\r\n      });\r\n      promises.push(promise);\r\n    });\r\n\r\n    return promises;\r\n  };\r\n  const updateUserImageInPosts = (img) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        // Refs\r\n        const allPosts = await adminClient.query(\r\n          q.Paginate(\r\n            q.Reverse(q.Match(q.Index(\"posts_by_user\"), state.user.handle)),\r\n            {\r\n              size: 1000,\r\n            }\r\n          )\r\n        );\r\n\r\n        await Promise.all(updateInPosts(allPosts, img));\r\n\r\n        resolve(\"Successfully updated image URL\");\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Loading = false when page is loaded.\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, [setIsLoading]);\r\n\r\n  return (\r\n    <>\r\n      <form\r\n        id={userCardStyles.upload_image_form}\r\n        encType=\"multipart/form-data\"\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          if (!imageFileName) {\r\n            const message = document.getElementsByClassName(\"choose_image\")[0];\r\n            message.style.color = \"red\";\r\n\r\n            setTimeout(() => {\r\n              message.style.color = \"grey\";\r\n            }, 3000);\r\n          } else {\r\n            uploadImage();\r\n            setImage(undefined);\r\n            setImageFileName(undefined);\r\n          }\r\n        }}\r\n      >\r\n        <label\r\n          htmlFor=\"avatar\"\r\n          className=\"custom_file_upload\"\r\n          tabIndex=\"0\"\r\n          onKeyDown={(e) => {\r\n            if (e.key === \"Enter\") {\r\n              const hiddenInput = document.getElementById(\"avatar\");\r\n              hiddenInput.click();\r\n            }\r\n          }}\r\n        >\r\n          New image:\r\n          <br />\r\n          {imageFileName !== \"\" &&\r\n          imageFileName !== undefined &&\r\n          imageFileName !== null ? (\r\n            <span className=\"choose_image\"> {imageFileName}</span>\r\n          ) : (\r\n            <span id={userCardStyles.choose_image} className=\"choose_image\">\r\n              choose an image\r\n            </span>\r\n          )}\r\n        </label>\r\n\r\n        {/* Hidden input */}\r\n        <input\r\n          type=\"file\"\r\n          id=\"avatar\"\r\n          name=\"avatar\"\r\n          accept=\"image/png, image/jpeg\"\r\n          onChange={(e) => {\r\n            setImageFileName(e.target.files[0].name);\r\n            setImage(e.target.files[0]);\r\n\r\n            const message = document.getElementsByClassName(\"choose_image\")[0];\r\n            message.style.color = \"grey\";\r\n\r\n            setIsError(false);\r\n          }}\r\n        />\r\n        <button id={userCardStyles.change_image_button} type=\"submit\">\r\n          Change image\r\n        </button>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default WithLoader(WithError(UploadImage), \"wait\");\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\n// store\r\nimport { store } from \"../../utils/store\";\r\n// HOC\r\nimport WithError from \"../../HOCs/WithError\";\r\n// Styles\r\nimport userCardStyles from \"./styles/index.module.scss\";\r\n\r\nfunction AddInfo({ setIsAddInfoOpen, setIsError }) {\r\n  const { state, dispatch } = useContext(store);\r\n  const [location, setLocation] = useState(state.user.location);\r\n  const [hobbies, setHobbies] = useState(state.user.hobbies);\r\n  const [occupation, setOccupation] = useState(state.user.occupation);\r\n  let isSubscribed = true;\r\n\r\n  // Add info to db and dispatch 'add_info'\r\n  const addInfoToDb = async () => {\r\n    try {\r\n      const res = await fetch(\"/api/addInfo\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          location,\r\n          hobbies,\r\n          occupation,\r\n          userHandle: state.user.handle,\r\n        }),\r\n      });\r\n\r\n      if (res.status >= 400) {\r\n        setIsError(true);\r\n      } else {\r\n        if (isSubscribed) {\r\n          dispatch({\r\n            type: \"ADD_INFO\",\r\n            payload: { location, hobbies, occupation },\r\n          });\r\n\r\n          setIsAddInfoOpen(false);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  // Remove a field from info\r\n  const removeInfo = async (info) => {\r\n    try {\r\n      const res = await fetch(\"/api/removeInfoField\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Info-To-Remove\": info,\r\n          \"User-Handle\": state.user.handle,\r\n        },\r\n      });\r\n\r\n      if (res.status >= 400) {\r\n        setIsError(true);\r\n      } else {\r\n        if (info === \"location\") {\r\n          setLocation(undefined);\r\n        } else if (info === \"hobbies\") {\r\n          setHobbies(undefined);\r\n        } else if (info === \"occupation\") {\r\n          setOccupation(undefined);\r\n        }\r\n\r\n        if (isSubscribed) {\r\n          dispatch({\r\n            type: \"REMOVE_INFO\",\r\n            payload: info,\r\n          });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  // Empty input field\r\n  const emptyField = (name) => {\r\n    const input = document.getElementById(name);\r\n    input.setAttribute(\"placeholder\", \"\");\r\n  };\r\n\r\n  // Unsubscribe\r\n  useEffect(() => {\r\n    return () => (isSubscribed = false);\r\n  }, []);\r\n\r\n  return (\r\n    <form\r\n      className={userCardStyles.form}\r\n      onKeyDown={(e) => {\r\n        if (e.key === \"Enter\") {\r\n          e.preventDefault();\r\n          addInfoToDb();\r\n        }\r\n      }}\r\n    >\r\n      <label htmlFor=\"location\">Location: </label>\r\n      <div className={userCardStyles.input}>\r\n        <input\r\n          id=\"location\"\r\n          name=\"location\"\r\n          type=\"text\"\r\n          placeholder={location}\r\n          onChange={(e) => {\r\n            setLocation(e.target.value);\r\n            setIsError(false);\r\n          }}\r\n        />\r\n        <button\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            removeInfo(\"location\");\r\n            emptyField(\"location\");\r\n          }}\r\n        >\r\n          x\r\n        </button>\r\n      </div>\r\n\r\n      <label htmlFor=\"hobbies\">Hobbies: </label>\r\n      <div className={userCardStyles.input}>\r\n        <input\r\n          id=\"hobbies\"\r\n          name=\"hobbies\"\r\n          type=\"text\"\r\n          placeholder={hobbies}\r\n          onChange={(e) => {\r\n            setHobbies(e.target.value);\r\n            setIsError(false);\r\n          }}\r\n        />\r\n        <button\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            removeInfo(\"hobbies\");\r\n            emptyField(\"hobbies\");\r\n          }}\r\n        >\r\n          x\r\n        </button>\r\n      </div>\r\n\r\n      <label htmlFor=\"occupation\">Occupation: </label>\r\n      <div className={userCardStyles.input}>\r\n        <input\r\n          id=\"occupation\"\r\n          name=\"occupation\"\r\n          type=\"text\"\r\n          placeholder={occupation}\r\n          onChange={(e) => {\r\n            setOccupation(e.target.value);\r\n            setIsError(false);\r\n          }}\r\n        />\r\n        <button\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            removeInfo(\"occupation\");\r\n            emptyField(\"occupation\");\r\n          }}\r\n        >\r\n          x\r\n        </button>\r\n      </div>\r\n\r\n      <span className={userCardStyles.buttons_container}>\r\n        <button type=\"submit\">submit</button>\r\n        <button onClick={() => setIsAddInfoOpen(false)}>close</button>\r\n      </span>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default WithError(AddInfo);\r\n","import React, { useContext } from \"react\";\r\n// gotrue auth\r\nimport auth from \"../../utils/auth\";\r\n// store\r\nimport { store } from \"../../utils/store\";\r\n// Styles\r\nimport userCardStyles from \"./styles/index.module.scss\";\r\n\r\nfunction Logout() {\r\n  const { dispatch } = useContext(store);\r\n\r\n  // Logout\r\n  const logout = async () => {\r\n    try {\r\n      const user = auth.currentUser();\r\n      user.logout();\r\n      dispatch({ type: \"LOGOUT\" });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      id={userCardStyles.logout_button}\r\n      onClick={() => {\r\n        logout();\r\n      }}\r\n    >\r\n      logout\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Logout;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// store\r\nimport { store } from \"../../utils/store\";\r\n// faunaDB\r\nimport { q, adminClient } from \"../../utils/faunaDB\";\r\n// auth\r\nimport auth from \"../../utils/auth\";\r\n// components\r\nimport UploadImage from \"./UploadImage\";\r\nimport AddInfo from \"./AddInfo\";\r\nimport Logout from \"./Logout\";\r\n// Styles\r\nimport userCardStyles from \"./styles/index.module.scss\";\r\n\r\n// 'User' path means we don't want to load logged in user's info,\r\n// we just want to load short info on the needed user. Any other\r\n// path (where user's card component is available) will show logged\r\n// in user's full info if he's logged in or links to log in or sign up.\r\n\r\nfunction User() {\r\n  const { state, dispatch } = useContext(store);\r\n  const [isAddInfoOpen, setIsAddInfoOpen] = useState(false);\r\n  const [isCardOpen, setIsCardOpen] = useState(false);\r\n  const path = state.path;\r\n\r\n  let handle = window.location.pathname.split(\"/\").pop().split(\"%20\").join(\" \");\r\n\r\n  // Get logged in user info.\r\n  const getOwnUserInfo = async (email) => {\r\n    try {\r\n      const res = await adminClient.query(\r\n        q.Get(q.Match(q.Index(\"users_by_email\"), q.Casefold(email)))\r\n      );\r\n      dispatch({ type: \"SET_USER\", payload: { data: res.data, ref: res.ref } });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // Get user's likes function.\r\n  const getLikes = async () => {\r\n    try {\r\n      const userLikes = await adminClient.query(\r\n        q.Map(\r\n          q.Paginate(\r\n            q.Reverse(\r\n              q.Match(q.Index(\"likes_by_user\"), q.Casefold(state.user.handle))\r\n            ),\r\n            { size: 1000 }\r\n          ),\r\n          q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n        )\r\n      );\r\n      dispatch({ type: \"SET_LIKES\", payload: userLikes.data });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // Get other user info.\r\n  const getUserInfo = async () => {\r\n    try {\r\n      const res = await adminClient.query(\r\n        q.Get(q.Match(q.Index(\"users_by_handle\"), q.Casefold(handle)))\r\n      );\r\n\r\n      dispatch({ type: \"SET_OTHER_USER\", payload: res.data });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  // Toggle card's open/closed state.\r\n  const toggleOpenCard = () => {\r\n    if (isCardOpen) {\r\n      setIsCardOpen(false);\r\n    } else {\r\n      setIsCardOpen(true);\r\n    }\r\n  };\r\n\r\n  // Get user's likes.\r\n  useEffect(() => {\r\n    if (state.user.handle !== null && state.user.handle !== undefined) {\r\n      getLikes();\r\n    }\r\n  }, [state.user.handle, window.location.pathname]);\r\n\r\n  // Get user's info.\r\n  useEffect(() => {\r\n    // If path is 'user'...\r\n    if (path === \"user\") {\r\n      getUserInfo();\r\n      // If path is 'profile', 'home', 'post' ...\r\n    } else {\r\n      // Check if user is signed in...\r\n      if (auth.currentUser() !== null && auth.currentUser() !== undefined) {\r\n        const email = auth.currentUser().email;\r\n\r\n        getOwnUserInfo(email);\r\n      }\r\n    }\r\n  }, [path]);\r\n\r\n  // Check if user card should be shown in the beginning.\r\n  useEffect(() => {\r\n    if (shouldShowCard()) {\r\n      // Toggle open/close card button.\r\n      const button = document.getElementById(\"open_card_button\");\r\n\r\n      if (window.innerWidth > 800) {\r\n        setIsCardOpen(true);\r\n      } else if (\r\n        window.innerWidth <= 800 &&\r\n        state.loggedIn &&\r\n        path !== \"user\"\r\n      ) {\r\n        setIsCardOpen(false);\r\n        button.style.display = \"block\";\r\n        // If user is not logged in, don't show 'open card' button on top, don't hide the card itself.\r\n      } else if (\r\n        window.innerWidth <= 800 &&\r\n        !state.loggedIn &&\r\n        path !== \"user\"\r\n      ) {\r\n        button.style.display = \"none\";\r\n        setIsCardOpen(true);\r\n      } else if (path === \"user\") {\r\n        setIsCardOpen(true);\r\n      }\r\n    }\r\n  }, [state.loggedIn, path]);\r\n\r\n  // Open/close card.\r\n  useEffect(() => {\r\n    // If this user exists.\r\n    if (shouldShowCard()) {\r\n      const card = document.getElementById(\"user_card\");\r\n      if (isCardOpen) {\r\n        card.style.display = \"flex\";\r\n      } else if (!isCardOpen) {\r\n        card.style.display = \"none\";\r\n      }\r\n    }\r\n  }, [isCardOpen]);\r\n\r\n  // Check if card should be shown.\r\n  // Returns bool.\r\n  const shouldShowCard = () => {\r\n    const path = state.path;\r\n    // If user us logged in and path is 'home', 'search', 'profile' or 'post'.\r\n    if (\r\n      (state.loggedIn && path === \"home\") ||\r\n      path === \"search\" ||\r\n      path === \"profile\" ||\r\n      window.location.pathname.substring(1, 5) === \"post\"\r\n    ) {\r\n      return true;\r\n      // If path is 'user'(arbitrary user) and this user exists.\r\n    } else if (\r\n      path === \"user\" &&\r\n      state.otherUser !== undefined &&\r\n      Object.keys(state.otherUser).length > 0\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {shouldShowCard() && (\r\n        <div className={userCardStyles.container}>\r\n          <button\r\n            className={userCardStyles.open_card_button}\r\n            id=\"open_card_button\"\r\n            onClick={() => {\r\n              toggleOpenCard();\r\n            }}\r\n          >\r\n            {path === \"user\" ? state.otherUser.handle : state.user.handle}\r\n          </button>\r\n\r\n          <div className={userCardStyles.user} id=\"user_card\">\r\n            {/* Add info */}\r\n            {isAddInfoOpen && <AddInfo setIsAddInfoOpen={setIsAddInfoOpen} />}\r\n            {/* Logged in user's card */}\r\n            {path !== \"user\" && state.loggedIn && !isAddInfoOpen && (\r\n              <>\r\n                <img src={state.user.imageUrl} alt=\"profile image\" />\r\n\r\n                <p>{state.user.handle}</p>\r\n                <p>{state.user.email}</p>\r\n                {state.user.location && (\r\n                  <p>\r\n                    <strong>Location:</strong> {state.user.location}\r\n                  </p>\r\n                )}\r\n                {state.user.hobbies && (\r\n                  <p>\r\n                    <strong>Hobbies:</strong> {state.user.hobbies}\r\n                  </p>\r\n                )}\r\n                {state.user.occupation && (\r\n                  <p>\r\n                    <strong>Occupation:</strong> {state.user.occupation}\r\n                  </p>\r\n                )}\r\n                <button\r\n                  onClick={() => {\r\n                    setIsAddInfoOpen(true);\r\n                  }}\r\n                >\r\n                  Change info\r\n                </button>\r\n                <UploadImage />\r\n                <Logout />\r\n              </>\r\n            )}\r\n\r\n            {/* User is not logged in and it's not 'user' path */}\r\n            {!state.loggedIn && path !== \"user\" && (\r\n              <div id={userCardStyles.login_signup_buttons_container}>\r\n                <Link to=\"/login\">Login</Link>\r\n                <Link to=\"/signup\">Signup</Link>\r\n              </div>\r\n            )}\r\n\r\n            {/* Other user's card */}\r\n            {path === \"user\" && (\r\n              <>\r\n                <img\r\n                  src={state.otherUser.imageUrl}\r\n                  alt=\"user\"\r\n                  height=\"300\"\r\n                  width=\"240\"\r\n                />\r\n\r\n                <p>{state.otherUser.handle}</p>\r\n                {state.otherUser.location && (\r\n                  <p>\r\n                    <strong>Location:</strong> {state.otherUser.location}\r\n                  </p>\r\n                )}\r\n                {state.otherUser.hobbies && (\r\n                  <p>\r\n                    <strong>Hobbies:</strong> {state.otherUser.hobbies}\r\n                  </p>\r\n                )}\r\n                {state.otherUser.occupation && (\r\n                  <p>\r\n                    <strong>Occupation:</strong> {state.otherUser.occupation}\r\n                  </p>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default User;\r\n","import React, { useContext, useEffect } from \"react\";\r\n// Store\r\nimport { store } from \"../../utils/store\";\r\n// Style\r\nimport \"./svgStyle.scss\";\r\n\r\nfunction LoginPromptTrigger({ likeCount }) {\r\n  const { state, dispatch } = useContext(store);\r\n\r\n  // Hide login prompt image (cat sliding to the right)\r\n  const hide = () => {\r\n    const image = document.getElementsByClassName(\"image_ask_to_login\")[0];\r\n\r\n    if (image) {\r\n      image.style.animation = \"slideright 2s forwards\";\r\n\r\n      setTimeout(() => {\r\n        dispatch({\r\n          type: \"SET_SHOW_LOGIN_PROMPT\",\r\n          payload: false,\r\n        });\r\n\r\n        dispatch({\r\n          type: \"SET_WAIT_TO_SHOW_LOGIN_PROMPT\",\r\n          payload: false,\r\n        });\r\n      }, 1000);\r\n    }\r\n  };\r\n\r\n  // Set timer to hide the image on the right (login prompt) and clean it on the unmount.\r\n  useEffect(() => {\r\n    let timer;\r\n    if (state.showLoginPrompt) {\r\n      timer = setTimeout(() => {\r\n        hide();\r\n      }, 4000);\r\n\r\n      return () => {\r\n        clearTimeout(timer);\r\n\r\n        dispatch({\r\n          type: \"SET_WAIT_TO_SHOW_LOGIN_PROMPT\",\r\n          payload: false,\r\n        });\r\n      };\r\n    }\r\n  }, [state.showLoginPrompt]);\r\n\r\n  const control_showing_login_prompt = () => {\r\n    // 1. if login prompt is not shown and not waiting...\r\n    if (!state.showLoginPrompt && !state.waitToShowLoginPrompt) {\r\n      dispatch({\r\n        type: \"SET_SHOW_LOGIN_PROMPT\",\r\n        payload: true,\r\n      });\r\n\r\n      dispatch({\r\n        type: \"SET_WAIT_TO_SHOW_LOGIN_PROMPT\",\r\n        payload: true,\r\n      });\r\n    }\r\n\r\n    // 2. if login prompt is shown and waiting\r\n    else if (state.showLoginPrompt && state.waitToShowLoginPrompt) {\r\n      hide();\r\n    }\r\n  };\r\n\r\n  // Unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch({\r\n        type: \"SET_SHOW_LOGIN_PROMPT\",\r\n        payload: false,\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {/* Heart image (transparent or blue depending on amount of likes) */}\r\n      {likeCount <= 0 ? (\r\n        <input\r\n          className=\"heart\"\r\n          type=\"image\"\r\n          src=\"/img/post_info/transparent-heart.svg\"\r\n          onClick={async () => {\r\n            // If not logged in and...\r\n            if (!state.loggedIn) {\r\n              control_showing_login_prompt();\r\n            }\r\n          }}\r\n        />\r\n      ) : (\r\n        <input\r\n          type=\"image\"\r\n          className=\"heart\"\r\n          src=\"/img/post_info/blue-heart.svg\"\r\n          onClick={async () => {\r\n            // If not logged in and...\r\n            if (!state.loggedIn) {\r\n              control_showing_login_prompt();\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n      {/* Number of likes if there are any */}\r\n      {likeCount > 0 && <p>{likeCount}</p>}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoginPromptTrigger;\r\n","import React, { useEffect, useState, useContext, useRef } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// Store\r\nimport { store } from \"../../utils/store\";\r\n// Styles\r\nimport postsInfoStyles from \"./styles/Post_info.module.scss\";\r\n// Day.js\r\nimport dayjs from \"dayjs\";\r\nimport relativeTime from \"dayjs/plugin/relativeTime\";\r\n// Components\r\nimport LoginPromptTrigger from \"../login_prompt/LoginPromptTrigger\";\r\n\r\ndayjs.extend(relativeTime);\r\n\r\nfunction PostInfo({ post }) {\r\n  const { state, dispatch } = useContext(store);\r\n\r\n  const subscribed = useRef(true);\r\n\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [readyToLike, setReadyToLike] = useState(true);\r\n  const [readyToUnlike, setReadyToUnlike] = useState(true);\r\n  const [zeroLikes, setZeroLikes] = useState();\r\n  const [time, setTime] = useState();\r\n\r\n  // ***************** FUNCTIONS *********************\r\n\r\n  // Set time of the post submission.\r\n  useEffect(() => {\r\n    const d = dayjs(post.data.createdAt).fromNow();\r\n    setTime(d);\r\n  }, [post]);\r\n\r\n  // Like post.\r\n  const likePost = () => {\r\n    dispatch({ type: \"SET_PENDING_POST_LIKE\", payload: post.data.postId });\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const res = await fetch(\"/api/like\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            userHandle: state.user.handle,\r\n            postId: post.data.postId,\r\n            recepient: post.data.userHandle,\r\n          }),\r\n        });\r\n\r\n        const newLikeCount = post.data.likeCount + 1;\r\n\r\n        dispatch({\r\n          type: \"LIKE_POST\",\r\n          payload: {\r\n            like: {\r\n              data: {\r\n                postId: post.data.postId,\r\n                userHandle: post.data.userHandle,\r\n              },\r\n            },\r\n            postId: post.data.postId,\r\n          },\r\n        });\r\n\r\n        dispatch({\r\n          type: \"CHANGE_LIKE_COUNT\",\r\n          payload: { newLikeCount, postId: post.data.postId },\r\n        });\r\n\r\n        if (subscribed.current) {\r\n          if (res.status < 400) {\r\n            resolve(\"success\");\r\n          } else if (res.status >= 400) {\r\n            reject(\"Already liked\");\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Unlike post.\r\n  const unlikePost = () => {\r\n    if (post.data.likeCount === 1) {\r\n      setZeroLikes(true);\r\n    }\r\n    dispatch({ type: \"SET_PENDING_POST_UNLIKE\", payload: post.data.postId });\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const res = await fetch(\"/api/unlike\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            userHandle: state.user.handle,\r\n            postId: post.data.postId,\r\n            likeCount: post.data.likeCount - 1,\r\n            recepient: post.data.userHandle,\r\n          }),\r\n        });\r\n        const newLikeCount = post.data.likeCount - 1;\r\n        dispatch({\r\n          type: \"UNLIKE_POST\",\r\n          payload: { postId: post.data.postId },\r\n        });\r\n\r\n        dispatch({\r\n          type: \"CHANGE_LIKE_COUNT\",\r\n          payload: { newLikeCount, postId: post.data.postId },\r\n        });\r\n\r\n        if (subscribed.current) {\r\n          if (res.status < 400) {\r\n            resolve(\"success\");\r\n          } else if (res.status >= 400) {\r\n            reject(\"Post isn't liked\");\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // ******************* EFFECTS *********************\r\n\r\n  // Check if this post is liked by the user.\r\n  useEffect(() => {\r\n    setIsLiked(false);\r\n    if (state.user.likes && state.user.likes.length !== 0) {\r\n      state.user.likes.forEach((like) => {\r\n        if (like.data.postId === post.data.postId) {\r\n          setIsLiked(true);\r\n        }\r\n      });\r\n    }\r\n  }, [\r\n    state.user.likes,\r\n    state.posts,\r\n    window.location.pathname,\r\n    post.data.postId,\r\n  ]);\r\n\r\n  // Subscribed.current = false on unmount.\r\n  useEffect(() => {\r\n    return () => {\r\n      subscribed.current = false;\r\n    };\r\n  }, []);\r\n\r\n  // ****************** HANDLERS **********************\r\n\r\n  // Handle 'like' click.\r\n  const handleClickLike = async () => {\r\n    subscribed.current = true;\r\n    if (readyToLike && state.pendingPostLike !== post.data.postId) {\r\n      setReadyToUnlike(false);\r\n      try {\r\n        if (!isLiked) {\r\n          setIsLiked(true);\r\n          await likePost();\r\n\r\n          if (subscribed.current) setReadyToUnlike(true);\r\n        }\r\n      } catch (error) {\r\n        if (subscribed.current) setReadyToUnlike(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Handle 'unlike' click.\r\n  const handleClickUnlike = async () => {\r\n    subscribed.current = true;\r\n    if (\r\n      isLiked &&\r\n      readyToUnlike &&\r\n      state.pendingPostUnlike !== post.data.postId\r\n    ) {\r\n      setReadyToLike(false);\r\n      try {\r\n        setIsLiked(false);\r\n        await unlikePost();\r\n\r\n        if (subscribed.current) setReadyToLike(true);\r\n      } catch (error) {\r\n        if (subscribed.current) setReadyToLike(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={postsInfoStyles.post_info}>\r\n      <Link to={`/user/${post.data.userHandle}`}>\r\n        <img\r\n          src={post.data.userImageUrl}\r\n          className={postsInfoStyles.user_image}\r\n          alt=\"user\"\r\n        />\r\n        <p>{post.data.userHandle}</p>\r\n      </Link>\r\n      <p lang=\"en\">{time}</p>\r\n      <p>{post.data.commentCount} comments</p>\r\n      {/* LIKE OR UNLIKE */}\r\n      <div className={postsInfoStyles.likes}>\r\n        {\r\n          // If the user is logged in.\r\n          state.loggedIn ? (\r\n            <>\r\n              {\r\n                // If post is liked by the user.\r\n                isLiked ? (\r\n                  <input\r\n                    type=\"image\"\r\n                    src=\"/img/post_info/red-heart.svg\"\r\n                    tabIndex=\"0\"\r\n                    id={postsInfoStyles.red_heart}\r\n                    onClick={handleClickUnlike}\r\n                  />\r\n                ) : (\r\n                  // If not liked by the user, show blue or transparent heart (depending on the like count).\r\n                  <input\r\n                    type=\"image\"\r\n                    src={`/img/post_info/${\r\n                      post.data.likeCount === 0 || zeroLikes\r\n                        ? \"transparent-heart\"\r\n                        : \"blue-heart\"\r\n                    }.svg`}\r\n                    tabIndex=\"0\"\r\n                    id={postsInfoStyles.blue_heart}\r\n                    onClick={handleClickLike}\r\n                  />\r\n                )\r\n              }\r\n              {/* Like count */}\r\n              {post.data.likeCount > 0 && <p>{post.data.likeCount}</p>}\r\n            </>\r\n          ) : (\r\n            // If not logged in, 'like' triggers image prompt to be shown.\r\n            <LoginPromptTrigger likeCount={post.data.likeCount} />\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostInfo;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// Styles\r\nimport postsContainerStyles from \"../styles/Posts_container.module.scss\";\r\n// Components\r\nimport PostInfo from \"../../../modules/post_info/PostInfo\";\r\n\r\nfunction Post({ post }) {\r\n  const [body, setBody] = useState();\r\n\r\n  // Limit length of the post body if it's too long.\r\n  useEffect(() => {\r\n    if (post.data.body.length > 49) {\r\n      const cutString = post.data.body.substring(0, 50);\r\n      setBody(`${cutString}...`);\r\n    } else {\r\n      setBody(post.data.body);\r\n    }\r\n  }, [post]);\r\n\r\n  return (\r\n    <div className={postsContainerStyles.post}>\r\n      <div className={postsContainerStyles.post_main_body}>\r\n        {post.data.imageUrl && (\r\n          <Link\r\n            to={`/post/${post.data.postId}`}\r\n            className={postsContainerStyles.image_link}\r\n          >\r\n            <div className={postsContainerStyles.image_container}>\r\n              <img\r\n                alt=\"post image\"\r\n                src={post.data.imageUrl}\r\n                className={postsContainerStyles.post_image}\r\n                loading=\"lazy\"\r\n                width=\"200\"\r\n                height=\"200\"\r\n              />\r\n            </div>\r\n          </Link>\r\n        )}\r\n\r\n        <Link to={`/post/${post.data.postId}`}>\r\n          <p>{body}</p>\r\n        </Link>\r\n      </div>\r\n\r\n      <PostInfo post={post} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Post;\r\n","import React, { useContext } from \"react\";\r\n// Store\r\nimport { store } from \"../../../utils/store\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n// Styles\r\nimport postsContainerStyles from \"../styles/Posts_container.module.scss\";\r\n\r\nfunction LoadMore({ setLoading }) {\r\n  const { state, dispatch } = useContext(store);\r\n  const query = new URLSearchParams(window.location.search).get(\"query\");\r\n\r\n  // ************ FUNCTION ********************\r\n  // Load more posts.\r\n  const loadMore = async () => {\r\n    setLoading(true);\r\n    const path = state.path;\r\n    let res;\r\n\r\n    if (path === \"search\") {\r\n      res = await adminClient.query(\r\n        q.Map(\r\n          q.Paginate(\r\n            q.Reverse(q.Match(q.Index(\"posts_by_words7\"), q.Casefold(query))),\r\n            {\r\n              size: state.size,\r\n              after: state.posts.after,\r\n            }\r\n          ),\r\n          q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n        )\r\n      );\r\n    } else if (path === \"profile\") {\r\n      res = await adminClient.query(\r\n        q.Map(\r\n          q.Paginate(\r\n            q.Reverse(q.Match(q.Index(\"posts_by_user\"), state.user.handle)),\r\n            {\r\n              size: state.size,\r\n              after: state.posts.after,\r\n            }\r\n          ),\r\n          q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n        )\r\n      );\r\n    } else {\r\n      res = await adminClient.query(\r\n        q.Map(\r\n          q.Paginate(q.Reverse(q.Match(q.Index(\"all_posts\"))), {\r\n            size: state.size,\r\n            after: state.posts.after,\r\n          }),\r\n          q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n        )\r\n      );\r\n    }\r\n    // Add posts to existing posts in the state.\r\n    dispatch({ type: \"ADD_POSTS\", payload: res });\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <button\r\n      id=\"load_more_button\"\r\n      className={postsContainerStyles.load_more_button}\r\n      onClick={loadMore}\r\n    >\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default LoadMore;\r\n","import React, { useState, useContext } from \"react\";\r\n// Components\r\nimport Post from \"./Post\";\r\nimport LoadMore from \"./LoadMore\";\r\n// Store\r\nimport { store } from \"../../../utils/store\";\r\n// Styles\r\nimport postsContainerStyles from \"../styles/Posts_container.module.scss\";\r\n\r\nfunction PostsContainer() {\r\n  const { state } = useContext(store);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // ************* RETURN *********************\r\n  return (\r\n    <div className={postsContainerStyles.posts}>\r\n      {state.posts &&\r\n        state.posts.data &&\r\n        state.posts.data.map((post, index) => <Post key={index} post={post} />)}\r\n\r\n      {state.posts && state.posts.after && (\r\n        <div className={postsContainerStyles.load_more}>\r\n          {loading ? (\r\n            <p className={postsContainerStyles.loading_message}>Loading...</p>\r\n          ) : (\r\n            <LoadMore setLoading={setLoading} />\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostsContainer;\r\n","import React, { useState, useContext, useEffect, useRef } from \"react\";\r\n// uuid\r\nimport uuid from \"react-uuid\";\r\n// Firebase\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/storage\";\r\n// Config for firebase\r\nimport config from \"../../../utils/config\";\r\n// Store\r\nimport { store } from \"../../../utils/store\";\r\nimport WithLoader from \"../../../HOCs/WithLoader\";\r\n// Styles\r\nimport homeStyles from \"../styles/Home.module.scss\";\r\n\r\nfunction NewPost({ setIsLoading }) {\r\n  const { state } = useContext(store);\r\n  const [body, setBody] = useState(\"\");\r\n  const [image, setImage] = useState();\r\n  const [imageDbName, setImageDbName] = useState(); // image name created with uuid\r\n  const [imageName, setImageName] = useState(); // image name from file system\r\n  const [error, setError] = useState(undefined);\r\n\r\n  // DOM elements\r\n  const form = useRef(null);\r\n\r\n  // Loading = false on component load.\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Upload image\r\n  const uploadImage = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        firebase.initializeApp(config);\r\n\r\n        // Root reference\r\n        var storageRef = firebase.storage().ref();\r\n        // Reference to new file\r\n        var imageRef = storageRef.child(imageDbName);\r\n\r\n        await imageRef.put(image);\r\n        resolve(\"success\");\r\n      } catch (error) {\r\n        console.log(error);\r\n        setError(\"Something went wrong, please try again later\");\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Set imageDbName when image is chosen in the browser\r\n  useEffect(() => {\r\n    if (image) {\r\n      const imageExtension = image.name.split(\".\").pop();\r\n      const imageName = `${uuid()}.${imageExtension}`;\r\n      setImageDbName(imageName);\r\n    }\r\n\r\n    // Abort\r\n    return () => {\r\n      const controller = new AbortController();\r\n      controller.abort();\r\n    };\r\n  }, [image]);\r\n\r\n  // Create post (bind image and post together in db)\r\n  const submitPost = async () => {\r\n    setIsLoading(true);\r\n\r\n    // If image is chosen...\r\n    if (image) {\r\n      // ... upload it.\r\n      await uploadImage();\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"/api/addPost\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          userHandle: state.user.handle,\r\n          userImageUrl: state.user.imageUrl,\r\n          body: body.trim(),\r\n          imageUrl:\r\n            image !== null && image !== undefined\r\n              ? `https://firebasestorage.googleapis.com/v0/b/${process.env.REACT_APP_BUCKET}/o/${imageDbName}?alt=media`\r\n              : undefined,\r\n        }),\r\n      });\r\n\r\n      if (res.status >= 400) {\r\n        setError(\"Something went wrong, try again later\");\r\n      } else {\r\n        window.location.reload();\r\n      }\r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      setError(\"Something went wrong, try again later\");\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Submit post event handler\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (body.trim().length > 0) {\r\n      submitPost(e);\r\n    } else {\r\n      setError(\"Must not be empty\");\r\n    }\r\n  };\r\n\r\n  // Handle error message animation\r\n  useEffect(() => {\r\n    const errorMsg = document.getElementsByClassName(\"error_message\")[0];\r\n    if (error && errorMsg) {\r\n      setTimeout(() => {\r\n        errorMsg.style.animationDuration = \"0.6s\";\r\n        errorMsg.style.animationName = `${homeStyles.slideuperror}`;\r\n        document.getElementById(\"post_body\").style.border = \"2px solid black\";\r\n\r\n        setTimeout(() => {\r\n          setError(undefined);\r\n        }, 500);\r\n      }, 2000);\r\n\r\n      // Red border around the textarea\r\n      document.getElementById(\"post_body\").style.border = \"2px solid red\";\r\n    }\r\n  }, [error]);\r\n\r\n  return (\r\n    <form\r\n      id={homeStyles.new_post}\r\n      encType=\"multipart/form-data\"\r\n      ref={form}\r\n      onSubmit={handleSubmit}\r\n      onKeyDown={(e) => {\r\n        if (e.key === \"Enter\") {\r\n          e.preventDefault();\r\n          handleSubmit(e);\r\n        }\r\n      }}\r\n    >\r\n      <textarea\r\n        name=\"body\"\r\n        rows=\"5\"\r\n        id=\"post_body\"\r\n        required\r\n        minLength=\"3\"\r\n        placeholder=\"type something here...\"\r\n        onChange={(e) => {\r\n          setBody(e.target.value);\r\n          setError(undefined);\r\n        }}\r\n      />\r\n      {/* Show error message if there is an error */}\r\n      {error && <p className=\"error_message\">{error}</p>}\r\n\r\n      <div className={homeStyles.new_post_buttons_container}>\r\n        <div className={homeStyles.choose_image_container}>\r\n          <label\r\n            htmlFor=\"image\"\r\n            className=\"custom_file_upload\"\r\n            tabIndex=\"0\"\r\n            onKeyDown={(e) => {\r\n              if (e.key === \"Enter\") {\r\n                const hiddenInput = document.getElementById(\"image\");\r\n                hiddenInput.click();\r\n              }\r\n            }}\r\n          >\r\n            Image:\r\n            <span>{!imageName ? \" choose an image\" : ` ${imageName}`}</span>\r\n          </label>\r\n\r\n          {/* Button to remove previously chosen image. */}\r\n          <button\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setImageName(undefined);\r\n              setImageDbName(undefined);\r\n              setImage(undefined);\r\n              setError(undefined);\r\n              document.getElementById(\"post_body\").style.border =\r\n                \"1px solid black\";\r\n            }}\r\n          >\r\n            remove\r\n          </button>\r\n        </div>\r\n\r\n        <input\r\n          id=\"image\"\r\n          type=\"file\"\r\n          name=\"image\"\r\n          accept=\"image/png, image/jpeg\"\r\n          onChange={(e) => {\r\n            if (e.target.files[0] !== undefined) {\r\n              setImageName(e.target.files[0].name);\r\n              setImage(e.target.files[0]);\r\n              setError(undefined);\r\n              document.getElementById(\"post_body\").style.border =\r\n                \"1px solid black\";\r\n            }\r\n          }}\r\n        />\r\n        <button type=\"submit\">Submit</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default WithLoader(NewPost, \"wait..\");\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// HOCs\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\nimport WithError from \"../../HOCs/WithError\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../utils/faunaDB\";\r\n// Store\r\nimport { store } from \"../../utils/store\";\r\n// Components\r\nimport User from \"../../modules/user_card\";\r\nimport Layout from \"../../HOCs/Layout\";\r\nimport PostsContainer from \"./posts_container/index\";\r\nimport NewPost from \"./posts_container/NewPost\";\r\n// Styles\r\nimport homeStyles from \"./styles/Home.module.scss\";\r\n// Auth\r\nimport auth from \"../../utils/auth\";\r\n\r\n// HOME PAGE\r\nfunction Home({ setIsLoading, setIsError }) {\r\n  const { state, dispatch } = useContext(store);\r\n  const [path, setPath] = useState();\r\n  const [error, setError] = useState(undefined);\r\n\r\n  // Number of posts per page.\r\n  const size = 5;\r\n\r\n  // User name for arbitrary user's route.\r\n  let userName = window.location.pathname\r\n    .split(\"/\")\r\n    .pop()\r\n    .split(\"%20\")\r\n    .join(\" \");\r\n\r\n  // Search query.\r\n  const urlParams = new URLSearchParams(window.location.search);\r\n  const query = urlParams.get(\"query\");\r\n\r\n  // Tokens\r\n  const tokens = {\r\n    // Confirmation token.\r\n    confirmationToken: decodeURIComponent(window.location.hash)\r\n      .substring(1)\r\n      .split(\"confirmation_token=\")[1],\r\n\r\n    // Invite token.\r\n    inviteToken: decodeURIComponent(window.location.hash)\r\n      .substring(1)\r\n      .split(\"invite_token=\")[1],\r\n\r\n    // Recovery token.\r\n    recoveryToken: decodeURIComponent(window.location.hash)\r\n      .substring(1)\r\n      .split(\"recovery_token=\")[1],\r\n  };\r\n\r\n  // ******************* FUNCTIONS ***************************\r\n  // Function to check which path it is.\r\n  const checkPath = () => {\r\n    const pathname = window.location.pathname;\r\n\r\n    if (tokens.confirmationToken) {\r\n      setPath(\"confirm\");\r\n    } else if (tokens.inviteToken) {\r\n      setPath(\"invite\");\r\n    } else if (tokens.recoveryToken) {\r\n      setPath(\"recovery\");\r\n    } else if (pathname === \"/search\") {\r\n      setPath(\"search\");\r\n    } else if (pathname === \"/\") {\r\n      setPath(\"home\");\r\n    } else if (pathname === \"/profile\") {\r\n      setPath(\"profile\");\r\n    } else if (pathname.slice(0, 5) === \"/user\") {\r\n      setPath(\"user\");\r\n    }\r\n  };\r\n  // Fetch posts depending on the path, set them in the store.\r\n  const fetchPosts = async () => {\r\n    try {\r\n      let res;\r\n\r\n      if (path === \"home\") {\r\n        // Fetch all posts.\r\n        res = await adminClient.query(\r\n          q.Map(\r\n            q.Paginate(q.Reverse(q.Match(q.Index(\"all_posts\"))), { size }),\r\n            q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n          )\r\n        );\r\n      } else if (path === \"search\") {\r\n        window.scrollTo(0, 0);\r\n        // Search in posts.\r\n        res = await adminClient.query(\r\n          q.Map(\r\n            q.Paginate(\r\n              q.Reverse(q.Match(q.Index(\"posts_by_words7\"), q.Casefold(query))),\r\n              { size }\r\n            ),\r\n            q.Lambda(\"ref\", q.Get(q.Var(\"ref\")))\r\n          )\r\n        );\r\n      } else if (path === \"user\") {\r\n        window.scrollTo(0, 0);\r\n        // Get arbitrary user's posts.\r\n        res = await adminClient.query(\r\n          q.Map(\r\n            q.Paginate(q.Reverse(q.Match(q.Index(\"posts_by_user\"), userName)), {\r\n              size,\r\n            }),\r\n            q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n          )\r\n        );\r\n      } else if (path === \"profile\" && state.user.handle) {\r\n        window.scrollTo(0, 0);\r\n        // Get own user's posts.\r\n        res = await adminClient.query(\r\n          q.Map(\r\n            q.Paginate(\r\n              q.Reverse(q.Match(q.Index(\"posts_by_user\"), state.user.handle)),\r\n              {\r\n                size,\r\n              }\r\n            ),\r\n            q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n          )\r\n        );\r\n      }\r\n\r\n      // Set posts in the store.\r\n      dispatch({ type: \"SET_POSTS\", payload: res });\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsError(true);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // ******************* USEEFFECT *****************************\r\n  // Check path on page load.\r\n  useEffect(() => {\r\n    checkPath();\r\n  }, [window.location.pathname]);\r\n\r\n  // Set path in the store.\r\n  useEffect(() => {\r\n    if (path) {\r\n      dispatch({ type: \"SET_PATH\", payload: path });\r\n    }\r\n  }, [path]);\r\n\r\n  // Redirect user based on path(confirm, invite, recovery).\r\n  useEffect(() => {\r\n    // If path is 'confirm'...\r\n    if (path === \"confirm\") {\r\n      auth\r\n        .confirm(tokens.confirmationToken, true)\r\n        .then((response) => {\r\n          // 1. login user ...\r\n          window.localStorage.setItem(\"gotrue.user\", JSON.stringify(response));\r\n          // 2. go to home page.\r\n          window.location.replace(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          if (error.message === \"User not found\") {\r\n            setError(\"User not found or email already confirmed\");\r\n          } else {\r\n            setError(\"This link is no longer valid\");\r\n          }\r\n          setIsError(true);\r\n        });\r\n      setIsLoading(false);\r\n    }\r\n\r\n    // Redirect to signup page if the user came with invitation.\r\n    else if (path === \"invite\") {\r\n      window.location.replace(`/signup/#invite_token=${tokens.inviteToken}`);\r\n    }\r\n\r\n    // Redirect to reset password page if user is using password recovery.\r\n    else if (path === \"recovery\") {\r\n      window.location.replace(\r\n        `/resetpassword/#recovery_token=${tokens.recoveryToken}`\r\n      );\r\n    }\r\n  }, [path]);\r\n\r\n  // Get posts.\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    // Load posts only if there are none in the store or path changes(user goes to profile from home etc.)\r\n    // and user doesn't go back to home page from post page (there is no need to load posts again).\r\n    if (\r\n      path &&\r\n      // If user didn't come from post page and (there are no posts in the store or path changed)\r\n      // *state.path is updated slower than this component's path state.\r\n      state.path !== \"post\" &&\r\n      state.posts &&\r\n      (Object.keys(state.posts).length === 0 || state.path !== path)\r\n    ) {\r\n      fetchPosts();\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [path, state.path, state.user.handle]);\r\n\r\n  // ********************* RETURN ******************************\r\n  return (\r\n    <Layout>\r\n      <div id={homeStyles.container}>\r\n        <div id={homeStyles.posts_container}>\r\n          {/* Confirm email path */}\r\n          {path === \"confirm\" &&\r\n            error !== undefined &&\r\n            (!error ? (\r\n              <p className={homeStyles.posts_header}>Email confirmed</p>\r\n            ) : (\r\n              <p className=\"error_message\">{error}</p>\r\n            ))}\r\n\r\n          {/* Home path */}\r\n          {path === \"home\" &&\r\n            // If user is logged in...\r\n            (state.loggedIn ? (\r\n              <NewPost />\r\n            ) : (\r\n              // If not logged in...\r\n              <p className={homeStyles.posts_header}>\r\n                <Link to=\"/login\">\r\n                  <strong>login </strong>\r\n                </Link>\r\n                or\r\n                <Link to=\"/signup\">\r\n                  <strong> signup </strong>\r\n                </Link>\r\n                to create a post\r\n              </p>\r\n            ))}\r\n\r\n          {/* Search path */}\r\n          {path === \"search\" &&\r\n            Object.keys(state.posts).length > 0 &&\r\n            // Nothing was found.\r\n            (state.posts.data && state.posts.data.length === 0 ? (\r\n              <p className={homeStyles.posts_header}>Nothing was found</p>\r\n            ) : (\r\n              // Something was found.\r\n              <p className={homeStyles.posts_header}>\r\n                Search results for: {query}\r\n              </p>\r\n            ))}\r\n\r\n          {/* Profile path */}\r\n          {path === \"profile\" && state.loggedIn && state.posts.data && (\r\n            <>\r\n              {state.posts.data.length > 0 ? (\r\n                <h2 className={homeStyles.posts_header}>My posts</h2>\r\n              ) : (\r\n                <h2 className={homeStyles.posts_header}>\r\n                  You haven't posted yet\r\n                </h2>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Other user's path */}\r\n          {path === \"user\" &&\r\n            // If not initial state of otherUser(undefined), which means it's not loaded yet...\r\n            (state.otherUser !== undefined ? (\r\n              <h2 className={homeStyles.posts_header}>\r\n                {state.posts.data && state.posts.data.length === 0\r\n                  ? `${userName} hasn't posted yet`\r\n                  : `Posts by ${userName}`}\r\n              </h2>\r\n            ) : (\r\n              <h2 className={homeStyles.posts_header}>\r\n                This user doesn't exist\r\n              </h2>\r\n            ))}\r\n\r\n          {/* All posts */}\r\n          <PostsContainer size={size} />\r\n        </div>\r\n\r\n        {/* Don't show user's card if user is not logged in or it is other user's card*/}\r\n        {(state.loggedIn || path === \"user\") && <User />}\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(WithError(Home));\r\n","import React, { useState, useEffect } from \"react\";\r\n// Auth\r\nimport auth from \"../../utils/auth\";\r\n// HOCs\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\n// Styles\r\nimport signupStyles from \"./styles/Signup.module.scss\";\r\n// Layout\r\nimport Layout from \"../../HOCs/Layout\";\r\n// Helpers\r\nimport removeSpaces from \"./utils/removeSpaces\";\r\n\r\nfunction Signup({ setIsLoading }) {\r\n  const [email, setEmail] = useState();\r\n  const [handle, setHandle] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [confirmPassword, setConfirmPassword] = useState();\r\n\r\n  const [handleUnique, setHandleUnique] = useState();\r\n  const [emailUnique, setEmailUnique] = useState();\r\n  const [passwordsMatch, setPasswordsMatch] = useState();\r\n\r\n  const [confirmationSent, setConfirmationSent] = useState(false);\r\n\r\n  // General error\r\n  const [isError, setIsError] = useState();\r\n\r\n  // Check if password and confirmPassword match\r\n  const doPasswordsMatch = () => {\r\n    if (password === confirmPassword) {\r\n      setPasswordsMatch(true);\r\n      return true;\r\n    } else {\r\n      setPasswordsMatch(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Signup\r\n  const signup = async () => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/addUserToDb\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          handle: removeSpaces(handle),\r\n          email,\r\n        }),\r\n      });\r\n\r\n      const passwordsMatch = doPasswordsMatch();\r\n      setPasswordsMatch(passwordsMatch);\r\n\r\n      if (passwordsMatch) {\r\n        const response = await res.json();\r\n        if (response === \"Email already in use\") {\r\n          setEmailUnique(false);\r\n        } else if (response === \"Handle already taken\") {\r\n          setHandleUnique(false);\r\n        } else if (response === \"User is added to database\") {\r\n          await auth.signup(email, password);\r\n          setConfirmationSent(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setIsError(true);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // Loading = false on page load\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Change color of labels when corresponding input is active.\r\n  useEffect(() => {\r\n    const inputs = document.getElementsByTagName(\"input\");\r\n    const labels = document.getElementsByTagName(\"label\");\r\n    for (let i = 0; i < inputs.length; i++) {\r\n      inputs[i].onfocus = function () {\r\n        const inputName = inputs[i].getAttribute(\"name\");\r\n        for (let j = 0; j < labels.length; j++) {\r\n          if (inputName === labels[j].htmlFor) {\r\n            labels[j].style.color = \"rgba(48, 136, 135, 1.00)\";\r\n          }\r\n        }\r\n      };\r\n\r\n      inputs[i].onblur = function () {\r\n        const inputName = inputs[i].getAttribute(\"name\");\r\n        for (let j = 0; j < labels.length; j++) {\r\n          if (inputName === labels[j].htmlFor) {\r\n            labels[j].style.color = \"black\";\r\n          }\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  // OverflowX = hidden on body (otherwise the page jumps on animation - buttom scroll appears and disappears)\r\n  useEffect(() => {\r\n    document.body.style.overflowX = \"hidden\";\r\n  }, []);\r\n\r\n  // Change color of handle label and input if there is error.\r\n  useEffect(() => {\r\n    const input = document.getElementsByName(\"handle\")[0];\r\n    const label = document.getElementById(\"handle_label\");\r\n    if (handleUnique || handleUnique === undefined) {\r\n      input.style.border = \"1px solid black\";\r\n      label.style.color = \"black\";\r\n    } else if (!handleUnique) {\r\n      input.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      label.style.color = \"rgba(211, 56, 49, 1)\";\r\n    }\r\n  }, [handleUnique]);\r\n\r\n  // Change color of email label and input if there is error.\r\n  useEffect(() => {\r\n    const input = document.getElementsByName(\"email\")[0];\r\n    const label = document.getElementById(\"email_label\");\r\n    if (emailUnique || emailUnique === undefined) {\r\n      input.style.border = \"1px solid black\";\r\n      label.style.color = \"black\";\r\n    } else if (!emailUnique) {\r\n      input.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      label.style.color = \"rgba(211, 56, 49, 1)\";\r\n    }\r\n  }, [emailUnique]);\r\n\r\n  // Change color of passwords label and input if there is error.\r\n  useEffect(() => {\r\n    const password = document.getElementsByName(\"password\")[0];\r\n    const confirmPassword = document.getElementsByName(\"confirmPassword\")[0];\r\n    const passwordLabel = document.getElementById(\"password_label\");\r\n    const confirmPasswordLabel = document.getElementById(\r\n      \"confirm_password_label\"\r\n    );\r\n    if (passwordsMatch || passwordsMatch === undefined) {\r\n      password.style.border = \"1px solid black\";\r\n      confirmPassword.style.border = \"1px solid black\";\r\n      passwordLabel.style.color = \"black\";\r\n      confirmPasswordLabel.style.color = \"black\";\r\n    } else if (!passwordsMatch) {\r\n      password.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      confirmPassword.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      passwordLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n      confirmPasswordLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n    }\r\n  }, [passwordsMatch]);\r\n\r\n  return (\r\n    <Layout>\r\n      {!confirmationSent ? (\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            signup();\r\n          }}\r\n          method=\"post\"\r\n          id={signupStyles.form}\r\n        >\r\n          <label htmlFor=\"email\" id=\"email_label\">\r\n            Email:\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            onChange={(e) => {\r\n              setEmailUnique(undefined);\r\n              setIsError(false);\r\n              setEmail(e.target.value);\r\n            }}\r\n            required=\"required\"\r\n          ></input>\r\n\r\n          {emailUnique === false ? <p>This email is already in use</p> : null}\r\n\r\n          <label htmlFor=\"handle\" id=\"handle_label\">\r\n            Username:\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"handle\"\r\n            id=\"handle\"\r\n            onChange={(e) => {\r\n              setHandleUnique(undefined);\r\n              setIsError(false);\r\n              setHandle(e.target.value);\r\n            }}\r\n            required=\"required\"\r\n          ></input>\r\n\r\n          {handleUnique === false ? <p>This handle is already in use</p> : null}\r\n\r\n          <label htmlFor=\"password\" id=\"password_label\">\r\n            Password:\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n              setIsError(false);\r\n              setPasswordsMatch(true);\r\n            }}\r\n            required=\"required\"\r\n          ></input>\r\n\r\n          <label htmlFor=\"confirmPassword\" id=\"confirm_password_label\">\r\n            Confirm password:\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"confirmPassword\"\r\n            id=\"confirmPassword\"\r\n            onChange={(e) => {\r\n              setConfirmPassword(e.target.value);\r\n              setIsError(false);\r\n              setPasswordsMatch(true);\r\n            }}\r\n            required=\"required\"\r\n          ></input>\r\n          {passwordsMatch === false ? <p>Passwords don't match</p> : null}\r\n\r\n          {isError && <p>Error occured, please try again later</p>}\r\n\r\n          <button type=\"submit\">Signup</button>\r\n        </form>\r\n      ) : (\r\n        <p id={signupStyles.confirmation_message}>\r\n          Confirmation letter has been sent to your email\r\n        </p>\r\n      )}\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(Signup, \"Signing up...\");\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// store\r\nimport { store } from \"../../utils/store\";\r\n// auth\r\nimport auth from \"../../utils/auth\";\r\n// withLoader hoc\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\n// Layout\r\nimport Layout from \"../../HOCs/Layout\";\r\n// Styles\r\nimport loginStyles from \"./styles/Login.module.scss\";\r\n\r\nfunction Login({ setIsLoading }) {\r\n  const { dispatch } = useContext(store);\r\n\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [credentialsCorrect, setCredentialsCorrect] = useState(undefined);\r\n  const [error, setError] = useState(undefined);\r\n\r\n  // Login\r\n  const login = async (e) => {\r\n    setIsLoading(true);\r\n    e.preventDefault();\r\n    try {\r\n      await auth.login(email, password, true);\r\n      dispatch({ type: \"LOG_IN\" });\r\n    } catch (error) {\r\n      if (error.message == \"invalid_grant: Email not confirmed\") {\r\n        setError(\"Email not confirmed\");\r\n      } else if (\r\n        error.message ==\r\n        \"invalid_grant: No user found with that email, or password invalid.\"\r\n      ) {\r\n        setCredentialsCorrect(false);\r\n      } else {\r\n        setError(\"Error occured, please try again later\");\r\n      }\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Loading = false on page load\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Change color of email label and input if there is error.\r\n  useEffect(() => {\r\n    const email = document.getElementsByName(\"email\")[0];\r\n    const password = document.getElementsByName(\"password\")[0];\r\n\r\n    const emailLabel = document.getElementById(\"email_label\");\r\n    const passwordLabel = document.getElementById(\"password_label\");\r\n    if (credentialsCorrect || credentialsCorrect === undefined) {\r\n      email.style.border = \"1px solid black\";\r\n      password.style.border = \"1px solid black\";\r\n      emailLabel.style.color = \"black\";\r\n      passwordLabel.style.color = \"black\";\r\n    } else if (!credentialsCorrect) {\r\n      email.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      password.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      emailLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n      passwordLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n    }\r\n  }, [credentialsCorrect]);\r\n\r\n  // OverflowX = hidden on body (otherwise the page jumps on animation - bottom scroll appears and disappears)\r\n  useEffect(() => {\r\n    document.body.style.overflowX = \"hidden\";\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <form\r\n        onSubmit={(e) => {\r\n          login(e);\r\n        }}\r\n        method=\"post\"\r\n        id={loginStyles.form}\r\n      >\r\n        <label htmlFor=\"email\" id=\"email_label\">\r\n          Email:\r\n        </label>\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          id=\"email\"\r\n          onChange={(e) => {\r\n            setEmail(e.target.value);\r\n            setError(undefined);\r\n            setCredentialsCorrect(undefined);\r\n          }}\r\n          required=\"required\"\r\n        ></input>\r\n\r\n        <label htmlFor=\"password\" id=\"password_label\">\r\n          Password:\r\n        </label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          id=\"password\"\r\n          onChange={(e) => {\r\n            setPassword(e.target.value);\r\n            setError(undefined);\r\n            setCredentialsCorrect(undefined);\r\n          }}\r\n          required=\"required\"\r\n        ></input>\r\n        {credentialsCorrect !== undefined && !credentialsCorrect && (\r\n          <p>No user found with that email, or password invalid</p>\r\n        )}\r\n        {error && <p>{error}</p>}\r\n\r\n        <button type=\"submit\">Login</button>\r\n        <Link to=\"/restorepassword\">Forgot password?</Link>\r\n      </form>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(Login, \"Logging in...\");\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\n// store\r\nimport { store } from \"../../../utils/store\";\r\n// HOCs\r\nimport WithLoader from \"../../../HOCs/WithLoader\";\r\nimport WithError from \"../../../HOCs/WithError\";\r\n// styles\r\nimport postStyles from \"../styles/Post.module.scss\";\r\n\r\nfunction NewComment({ setIsLoading, setIsError }) {\r\n  const { state } = useContext(store);\r\n  const [comment, setComment] = useState();\r\n  const [error, setError] = useState(undefined);\r\n\r\n  // Loading = false on page load\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Add a comment\r\n  const addComment = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/addComment\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          comment,\r\n          userHandle: state.user.handle,\r\n          userImageUrl: state.user.imageUrl,\r\n          postId: state.post.data.postId,\r\n          recepient: state.post.data.userHandle,\r\n        }),\r\n      });\r\n\r\n      if (res.status === 404) {\r\n        setIsError(true);\r\n        setIsLoading(false);\r\n      } else {\r\n        window.location.reload();\r\n      }\r\n    } catch (error) {\r\n      setIsError(true);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Sumbit comment handler\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (comment.trim().length > 0) {\r\n      addComment();\r\n    } // If empty...\r\n    else {\r\n      const textarea = document.getElementById(\"comment\");\r\n      textarea.style.border = \"2px solid red\";\r\n      setError(`Must not be empty`);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className={postStyles.new_comment_form}\r\n      onSubmit={handleSubmit}\r\n      onKeyDown={(e) => {\r\n        if (e.key === \"Enter\") {\r\n          e.preventDefault();\r\n          handleSubmit(e);\r\n        }\r\n      }}\r\n    >\r\n      <textarea\r\n        name=\"comment\"\r\n        rows=\"5\"\r\n        required\r\n        id=\"comment\"\r\n        placeholder=\"comment...\"\r\n        onChange={(e) => {\r\n          const textarea = document.getElementById(\"comment\");\r\n          textarea.style.border = \"1px solid black\";\r\n          setError(undefined);\r\n          setComment(e.target.value);\r\n        }}\r\n      />\r\n      {error && <p className=\"error_message\">{error}</p>}\r\n      <button type=\"submit\">Send</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default WithLoader(WithError(NewComment), \"Wait...\");\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// faunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n// styles\r\nimport postStyles from \"../styles/Post.module.scss\";\r\n// store\r\nimport { store } from \"../../../utils/store\";\r\n// Day.js\r\nimport dayjs from \"dayjs\";\r\nimport relativeTime from \"dayjs/plugin/relativeTime\";\r\ndayjs.extend(relativeTime);\r\n\r\nfunction Comment({ comment }) {\r\n  const { state, dispatch } = useContext(store);\r\n  const [time, setTime] = useState();\r\n\r\n  // Delete comment\r\n  const deleteComment = async (commentRef, commentId) => {\r\n    const promises = [];\r\n\r\n    // Delete notifications associated with this comment\r\n    const notifications = await adminClient.query(\r\n      q.Map(\r\n        q.Paginate(q.Match(q.Index(\"notifications_by_commentid\"), commentId)),\r\n        q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n      )\r\n    );\r\n    notifications.data.forEach((notification) => {\r\n      promises.push(adminClient.query(q.Delete(notification.ref)));\r\n    });\r\n\r\n    // Reduce the total number of notifications in post\r\n    adminClient.query(\r\n      q.Update(state.post.ref, {\r\n        data: {\r\n          commentCount: state.post.data.commentCount - 1,\r\n        },\r\n      })\r\n    );\r\n\r\n    await adminClient.query(\r\n      q.Map(\r\n        q.Paginate(q.Match(q.Index(\"notifications_by_commentid\"), commentId)),\r\n        q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n      )\r\n    );\r\n\r\n    // Wait for  notifications to be deleted\r\n    await Promise.all(promises);\r\n    // Delete comment itself\r\n    await adminClient.query(q.Delete(commentRef));\r\n\r\n    dispatch({ type: \"DELETE_COMMENT\", payload: comment.data.commentId });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const time = new Date(comment.ts / 1000);\r\n    const d = dayjs(time).fromNow();\r\n    setTime(d);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={postStyles.comment}>\r\n      <p>{comment.data.body}</p>\r\n      <div className={postStyles.comment_info}>\r\n        {state.user.handle === comment.data.userHandle && (\r\n          <button\r\n            onClick={() => {\r\n              deleteComment(comment.ref, comment.data.commentId);\r\n            }}\r\n          >\r\n            delete comment\r\n          </button>\r\n        )}\r\n        <Link to={`/user/${comment.data.userHandle}`}>\r\n          <p>{time}</p>\r\n          <div className={postStyles.user_info}>\r\n            <img src={comment.data.userImageUrl} alt=\"user\" />\r\n            <p>{comment.data.userHandle}</p>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Comment;\r\n","import React, { useContext, useEffect, useState, useRef } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// styles\r\nimport postStyles from \"../styles/Post.module.scss\";\r\n// components\r\nimport NewComment from \"./NewComment\";\r\nimport Comment from \"./Comment\";\r\n// faunaDB\r\nimport { q, adminClient } from \"../../../utils/faunaDB\";\r\n// store\r\nimport { store } from \"../../../utils/store\";\r\n\r\nfunction Index() {\r\n  const { state, dispatch } = useContext(store);\r\n  const [loading, setLoading] = useState(false);\r\n  const [element, setElement] = useState(null);\r\n  let acontroller = new AbortController();\r\n\r\n  // Number of comments per page.\r\n  const size = 10;\r\n\r\n  const loadMore = async () => {\r\n    setLoading(true);\r\n    const res = await adminClient.query(\r\n      q.Map(\r\n        q.Paginate(\r\n          q.Reverse(\r\n            q.Match(q.Index(\"comments_by_postId\"), state.post.data.postId)\r\n          ),\r\n          {\r\n            size,\r\n            after: after.current,\r\n          }\r\n        ),\r\n        q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n      )\r\n    );\r\n\r\n    dispatch({ type: \"ADD_COMMENTS\", payload: res });\r\n    setLoading(false);\r\n  };\r\n\r\n  const loader = useRef(loadMore);\r\n  const after = useRef([]);\r\n\r\n  // Observer.\r\n  const observer = useRef(\r\n    new IntersectionObserver((entries) => {\r\n      const bottomElement = entries[0];\r\n      // If bottom element is visible...\r\n      if (bottomElement.isIntersecting) {\r\n        // ... use loader function.\r\n        loader.current();\r\n      }\r\n    })\r\n  );\r\n\r\n  // Attach observer to element, return unobserve.\r\n  useEffect(() => {\r\n    const currentElement = element;\r\n    const currentObserver = observer.current;\r\n    if (\r\n      currentElement &&\r\n      after.current &&\r\n      after.current.length > 0 &&\r\n      state.post &&\r\n      state.post.comments\r\n    ) {\r\n      currentObserver.observe(currentElement);\r\n    }\r\n\r\n    return () => {\r\n      if (currentElement) {\r\n        currentObserver.unobserve(currentElement);\r\n      }\r\n    };\r\n  }, [element, after.current]);\r\n\r\n  // Keep loader function up to date.\r\n  useEffect(() => {\r\n    loader.current = loadMore;\r\n  }, [loadMore]);\r\n\r\n  // Keep 'after' up to date.\r\n  useEffect(() => {\r\n    if (state.post && state.post.comments && state.post.comments.after) {\r\n      after.current = state.post.comments.after;\r\n    } else {\r\n      after.current = [];\r\n    }\r\n  }, [state.post]);\r\n\r\n  // Go to the top of the page in the beginning.\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  // Cancel async tasks on unmount.\r\n  useEffect(() => {\r\n    return () => {\r\n      acontroller.abort();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {state.loggedIn ? (\r\n        <NewComment />\r\n      ) : (\r\n        <p className={postStyles.posts_header}>\r\n          <Link to=\"/login\">\r\n            <strong>login </strong>\r\n          </Link>\r\n          or\r\n          <Link to=\"/signup\">\r\n            <strong> signup </strong>\r\n          </Link>\r\n          to leave a comment\r\n        </p>\r\n      )}\r\n\r\n      {state.post !== null &&\r\n        state.post.comments !== undefined &&\r\n        state.post.comments.data !== undefined &&\r\n        state.post.comments.data !== null &&\r\n        state.post.comments.data.length > 0 &&\r\n        state.post.comments.data.map((comment, index) => (\r\n          <Comment comment={comment} key={index} />\r\n        ))}\r\n\r\n      <div ref={setElement} id=\"load-more\" className={postStyles.end_message}>\r\n        {loading ? (\r\n          <p className={postStyles.loading_message}>Loading...</p>\r\n        ) : (\r\n          <p className={postStyles.end_message}>End</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Index;\r\n","import React, { useEffect, useRef } from \"react\";\r\n// Styles\r\nimport postStyles from \"./styles/Post.module.scss\";\r\n\r\nfunction FullScreenImage({ url, toggleShow }) {\r\n  const imageRef = useRef(null);\r\n  const closeButtonRef = useRef(null);\r\n\r\n  // Toggle show/hide full page image.\r\n  useEffect(() => {\r\n    const overlay = document.getElementById(\"image_full_screen_overlay\");\r\n    if (overlay) {\r\n      overlay.onclick = () => {\r\n        toggleShow(false);\r\n      };\r\n\r\n      // Don't close full page image when image itself is clicked.\r\n      imageRef.current.onclick = (e) => {\r\n        e.stopPropagation();\r\n      };\r\n\r\n      closeButtonRef.current.onclick = () => {\r\n        toggleShow(false);\r\n      };\r\n\r\n      // Exit full screen mode when 'Escape' is clicked.\r\n      document.onkeydown = (e) => {\r\n        if (e.key === `Escape`) {\r\n          toggleShow(false);\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  // Remove scroll from body.\r\n  useEffect(() => {\r\n    document.body.style.overflow = \"hidden\";\r\n    // Show scroll when full page image is closed.\r\n    return () => {\r\n      document.body.style.overflow = \"scroll\";\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    // Container\r\n    <div\r\n      id=\"image_full_screen_overlay\"\r\n      className={postStyles.image_full_screen_overlay}\r\n    >\r\n      {/* Image itself */}\r\n      <img src={url} id={postStyles.full_screen_image} ref={imageRef} />\r\n      {/* Exit full screen */}\r\n      <input\r\n        type=\"image\"\r\n        src=\"/img/close-button.svg\"\r\n        alt=\"exit full screen\"\r\n        id={postStyles.close_button}\r\n        ref={closeButtonRef}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FullScreenImage;\r\n","import React, { useContext } from \"react\";\r\n// Styles\r\nimport postStyles from \"./styles/Post.module.scss\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../utils/faunaDB\";\r\n// Store\r\nimport { store } from \"../../utils/store\";\r\n\r\nfunction DeletePostModal({ setShowModal, postId }) {\r\n  const { state, dispatch } = useContext(store);\r\n\r\n  // Delete post\r\n  const deletePost = async () => {\r\n    const promises = [];\r\n    // Delete comments\r\n    state.post.comments.data.forEach((comment) => {\r\n      promises.push(adminClient.query(q.Delete(comment.ref)));\r\n    });\r\n\r\n    // Delete notifications associated with this post\r\n    const notifications = await adminClient.query(\r\n      q.Map(\r\n        q.Paginate(\r\n          q.Match(q.Index(\"notifications_by_postid\"), state.post.data.postId)\r\n        ),\r\n        q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n      )\r\n    );\r\n    notifications.data.forEach((notification) => {\r\n      promises.push(adminClient.query(q.Delete(notification.ref)));\r\n    });\r\n\r\n    dispatch({ type: \"REMOVE_POST\", payload: postId });\r\n\r\n    // Await for comments and notifications to be deleted\r\n    await Promise.all(promises);\r\n    // Delete post itself\r\n    await adminClient.query(q.Delete(state.post.ref));\r\n    setShowModal(false);\r\n    window.history.back();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={postStyles.modal_container}\r\n      id=\"modal\"\r\n      onClick={() => setShowModal(false)}\r\n    >\r\n      <div\r\n        className={postStyles.modal_window}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <p>Are you sure you want to remove the post permanently?</p>\r\n        <div className={postStyles.button_container}>\r\n          <button onClick={deletePost}>yes</button>\r\n          <button\r\n            onClick={() => {\r\n              setShowModal(false);\r\n            }}\r\n          >\r\n            no\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeletePostModal;\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\n// FaunaDB\r\nimport { q, adminClient } from \"../../utils/faunaDB\";\r\n// WithLoader hoc\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\nimport WithError from \"../../HOCs/WithError\";\r\n// Styles\r\nimport postStyles from \"./styles/Post.module.scss\";\r\n// Components\r\nimport Layout from \"../../HOCs/Layout\";\r\nimport User from \"../../modules/user_card/index\";\r\nimport Comments from \"./comments_container\";\r\nimport FullScreenImage from \"./FullScreenImage\";\r\nimport DeletePostModal from \"./DeletePostModal\";\r\nimport PostInfo from \"../../modules/post_info/PostInfo\";\r\n// Store\r\nimport { store } from \"../../utils/store\";\r\n\r\nfunction Post(props) {\r\n  const { state, dispatch } = useContext(store);\r\n  const { postId } = props.match.params;\r\n  const { setIsLoading, setIsError } = props;\r\n\r\n  const [showModal, setShowModal] = useState(undefined);\r\n  const [showFullPageImage, setShowFullPageImage] = useState(undefined);\r\n\r\n  // Fetch post\r\n  const fetchPost = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const res = await adminClient.query(\r\n          q.Get(q.Match(q.Index(\"posts_by_id\"), postId))\r\n        );\r\n\r\n        dispatch({ type: \"SET_CURRENT_POST\", payload: res });\r\n\r\n        resolve(\"success\");\r\n      } catch (error) {\r\n        console.log(error);\r\n        // If there is no such post...\r\n        if (error.message === \"instance not found\") {\r\n          // ... go to home page.\r\n          window.location.replace(\"/\");\r\n        }\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Set path in the store\r\n  useEffect(() => {\r\n    dispatch({ type: \"SET_PATH\", payload: \"post\" });\r\n  }, []);\r\n\r\n  // Get comments\r\n  const getComments = () => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const res = await adminClient.query(\r\n          q.Map(\r\n            q.Paginate(\r\n              q.Reverse(q.Match(q.Index(\"comments_by_postId\"), postId)),\r\n              { size: 5 }\r\n            ),\r\n            q.Lambda(\"X\", q.Get(q.Var(\"X\")))\r\n          )\r\n        );\r\n\r\n        dispatch({ type: \"SET_COMMENTS\", payload: res });\r\n        resolve(\"success\");\r\n      } catch (error) {\r\n        console.log(error);\r\n        reject(error);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Get post with comments\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        await fetchPost();\r\n        await getComments();\r\n      } catch (error) {\r\n        console.log(error);\r\n        setIsError(true);\r\n      }\r\n      setIsLoading(false);\r\n    })();\r\n\r\n    // Cancel async tasks.\r\n    return () => {\r\n      const controller = new AbortController();\r\n      controller.abort();\r\n    };\r\n  }, [window.location.pathname]);\r\n\r\n  // Add event listener to post image to show full page image\r\n  useEffect(() => {\r\n    const image = document.getElementById(\"post_image\");\r\n    if (image) {\r\n      let timeoutId;\r\n\r\n      image.onclick = () => {\r\n        if (timeoutId) clearTimeout(timeoutId);\r\n        setShowFullPageImage(true);\r\n      };\r\n\r\n      // Do it with delay\r\n      image.onmouseenter = () => {\r\n        if (timeoutId) clearTimeout(timeoutId);\r\n        timeoutId = setTimeout(() => {\r\n          setShowFullPageImage(true);\r\n        }, 400);\r\n      };\r\n\r\n      // Don't do it if mouse leaves\r\n      image.onmouseleave = () => {\r\n        clearTimeout(timeoutId);\r\n      };\r\n    }\r\n  }, [state.post]);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className={postStyles.container}>\r\n        <div className={postStyles.content}>\r\n          {state.post !== null && (\r\n            <div className={postStyles.post}>\r\n              <div className={postStyles.post_main_body}>\r\n                {state.post.data.imageUrl && (\r\n                  <img\r\n                    src={state.post.data.imageUrl}\r\n                    width=\"200\"\r\n                    className={postStyles.post_image}\r\n                    id=\"post_image\"\r\n                  />\r\n                )}\r\n\r\n                <p>{state.post.data.body}</p>\r\n              </div>\r\n              <PostInfo post={state.post} />\r\n            </div>\r\n          )}\r\n          {state.post !== null &&\r\n            state.post.data.userHandle === state.user.handle && (\r\n              <button\r\n                onClick={() => {\r\n                  setShowModal(true);\r\n                }}\r\n              >\r\n                delete post\r\n              </button>\r\n            )}\r\n          <Comments />\r\n        </div>\r\n        {state.loggedIn && <User />}\r\n      </div>\r\n\r\n      {/* Full Page Image */}\r\n      {showFullPageImage && state.post.data.imageUrl ? (\r\n        <FullScreenImage\r\n          url={state.post.data.imageUrl}\r\n          toggleShow={setShowFullPageImage}\r\n        />\r\n      ) : null}\r\n\r\n      {/* Delete post modal window */}\r\n      {showModal && (\r\n        <DeletePostModal setShowModal={setShowModal} postId={postId} />\r\n      )}\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(WithError(Post), \"Loading comments...\");\r\n","import React, { useState, useEffect } from \"react\";\r\n// auth\r\nimport auth from \"../../utils/auth\";\r\n// withLoader hoc\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\n// Layout\r\nimport Layout from \"../../HOCs/Layout\";\r\n// Styles\r\nimport loginStyles from \"../Login/styles/Login.module.scss\";\r\n\r\nfunction RestorePassword({ setIsLoading }) {\r\n  const [email, setEmail] = useState();\r\n  const [emailCorrect, setEmailCorrect] = useState();\r\n  const [error, setError] = useState(undefined);\r\n  const [emailSent, setEmailSent] = useState(false);\r\n\r\n  // Restore password\r\n  const restore = async (e) => {\r\n    setIsLoading(true);\r\n    e.preventDefault();\r\n    try {\r\n      await auth.requestPasswordRecovery(email);\r\n      setIsLoading(false);\r\n      setEmailSent(true);\r\n    } catch (error) {\r\n      if (error.message === \"User not found\") {\r\n        setEmailCorrect(false);\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Loading = false on page load\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Change color of email label and input if there is an error\r\n  useEffect(() => {\r\n    const email = document.getElementsByName(\"email\")[0];\r\n\r\n    const emailLabel = document.getElementById(\"email_label\");\r\n\r\n    if (emailCorrect || emailCorrect === undefined) {\r\n      email.style.border = \"1px solid black\";\r\n\r\n      emailLabel.style.color = \"black\";\r\n    } else if (!emailCorrect) {\r\n      email.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n      emailLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n    }\r\n  }, [emailCorrect]);\r\n\r\n  // OverflowX = hidden on body (otherwise the page jumps on animation - buttom scroll appears and disappears)\r\n  useEffect(() => {\r\n    document.body.style.overflowX = \"hidden\";\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <form\r\n        onSubmit={(e) => {\r\n          restore(e);\r\n        }}\r\n        method=\"post\"\r\n        id={loginStyles.form}\r\n      >\r\n        <label htmlFor=\"email\" id=\"email_label\">\r\n          Email:\r\n        </label>\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          id=\"email\"\r\n          onChange={(e) => {\r\n            setEmail(e.target.value);\r\n            setError(undefined);\r\n            setEmailCorrect(undefined);\r\n          }}\r\n          required=\"required\"\r\n        ></input>\r\n\r\n        {emailCorrect && <p>No user found with that email</p>}\r\n        {error && <p>{error}</p>}\r\n\r\n        {!emailSent ? (\r\n          <button type=\"submit\">Restore password</button>\r\n        ) : (\r\n          <p id={loginStyles.restore_password_message}>\r\n            Email with a link to restore your password has been sent\r\n          </p>\r\n        )}\r\n      </form>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(RestorePassword, \"wait\");\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\n// store\r\nimport { store } from \"../../utils/store\";\r\n// auth\r\nimport auth from \"../../utils/auth\";\r\n// withLoader hoc\r\nimport WithLoader from \"../../HOCs/WithLoader\";\r\n// Layout\r\nimport Layout from \"../../HOCs/Layout\";\r\n// Styles\r\nimport loginStyles from \"../Login/styles/Login.module.scss\";\r\n\r\nfunction ResetPassword({ setIsLoading }) {\r\n  const { dispatch } = useContext(store);\r\n\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [confirmPassword, setConfirmPassword] = useState();\r\n  const [passwordsMatch, setPasswordsMatch] = useState(undefined);\r\n  const [passwordUpdated, setPasswordUpdated] = useState(false);\r\n\r\n  const [error, setError] = useState(undefined);\r\n  const [userNotFound, setUserNotFound] = useState(undefined);\r\n\r\n  // Recover and set user's email.\r\n  useEffect(() => {\r\n    // Recovery token\r\n    let recoveryToken = decodeURIComponent(window.location.hash)\r\n      .substring(1)\r\n      .split(\"recovery_token=\")[1];\r\n\r\n    auth\r\n      .recover(recoveryToken)\r\n      .then((res) => {\r\n        setEmail(res.email);\r\n      })\r\n\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setUserNotFound(true);\r\n      });\r\n\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // Loading = false\r\n  useEffect(() => {\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  // OverflowX = hidden on body (otherwise the page jumps on animation - buttom scroll appears and disappears)\r\n  useEffect(() => {\r\n    document.body.style.overflowX = \"hidden\";\r\n  }, []);\r\n\r\n  // Check if password and confirmPassword match.\r\n  const doPasswordsMatch = () => {\r\n    if (password === confirmPassword) {\r\n      setPasswordsMatch(true);\r\n      return true;\r\n    } else {\r\n      setPasswordsMatch(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Change color of labels when corresponding input is active.\r\n  useEffect(() => {\r\n    const inputs = document.getElementsByTagName(\"input\");\r\n    const labels = document.getElementsByTagName(\"label\");\r\n    for (let i = 0; i < inputs.length; i++) {\r\n      inputs[i].onfocus = function () {\r\n        const inputName = inputs[i].getAttribute(\"name\");\r\n        for (let j = 0; j < labels.length; j++) {\r\n          if (inputName === labels[j].htmlFor) {\r\n            labels[j].style.color = \"rgba(48, 136, 135, 1.00)\";\r\n          }\r\n        }\r\n      };\r\n\r\n      inputs[i].onblur = function () {\r\n        const inputName = inputs[i].getAttribute(\"name\");\r\n        for (let j = 0; j < labels.length; j++) {\r\n          if (inputName === labels[j].htmlFor) {\r\n            labels[j].style.color = \"black\";\r\n          }\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  // Change color of passwords label and input if there is error.\r\n  useEffect(() => {\r\n    if (userNotFound !== undefined) {\r\n      const password = document.getElementsByName(\"password\")[0];\r\n      const confirmPassword = document.getElementsByName(\"confirmPassword\")[0];\r\n      const passwordLabel = document.getElementById(\"password_label\");\r\n      const confirmPasswordLabel = document.getElementById(\r\n        \"confirm_password_label\"\r\n      );\r\n      if (passwordsMatch || passwordsMatch === undefined) {\r\n        password.style.border = \"1px solid black\";\r\n        confirmPassword.style.border = \"1px solid black\";\r\n        passwordLabel.style.color = \"black\";\r\n        confirmPasswordLabel.style.color = \"black\";\r\n      } else if (!passwordsMatch) {\r\n        password.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n        confirmPassword.style.border = \"1px solid rgba(211, 56, 49, 1)\";\r\n        passwordLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n        confirmPasswordLabel.style.color = \"rgba(211, 56, 49, 1)\";\r\n      }\r\n    }\r\n  }, [passwordsMatch]);\r\n\r\n  // Reset password.\r\n  const resetPassword = async () => {\r\n    setIsLoading(true);\r\n\r\n    const passwordsMatch = doPasswordsMatch();\r\n\r\n    if (passwordsMatch) {\r\n      try {\r\n        const user = auth.currentUser();\r\n        await user.update({ email, password });\r\n        setPasswordUpdated(true);\r\n\r\n        await auth.login(email, password, true);\r\n        setTimeout(() => {\r\n          dispatch({ type: \"LOG_IN\" });\r\n        }, 2000);\r\n      } catch (error) {\r\n        console.log(error);\r\n        setError(\"Something went wrong, please try again later\");\r\n      }\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  // OverflowX = hidden on body (otherwise the page jumps on animation - buttom scroll appears and disappears)\r\n  useEffect(() => {\r\n    document.body.style.overflowX = \"hidden\";\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          resetPassword();\r\n        }}\r\n        method=\"post\"\r\n        id={loginStyles.form}\r\n      >\r\n        {userNotFound !== undefined &&\r\n          (userNotFound ? (\r\n            <p>Password reset link is invalid</p>\r\n          ) : (\r\n            <>\r\n              <label htmlFor=\"email\" id=\"email_label\">\r\n                Email:\r\n              </label>\r\n              <input value={email} disabled></input>\r\n              <label htmlFor=\"password\" id=\"password_label\">\r\n                Password:\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                id=\"password\"\r\n                onChange={(e) => {\r\n                  setPassword(e.target.value);\r\n                  setError(undefined);\r\n                  setPasswordsMatch(true);\r\n                }}\r\n                required=\"required\"\r\n              ></input>\r\n              <label htmlFor=\"confirmPassword\" id=\"confirm_password_label\">\r\n                Confirm password:\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                name=\"confirmPassword\"\r\n                id=\"confirmPassword\"\r\n                onChange={(e) => {\r\n                  setConfirmPassword(e.target.value);\r\n                  setError(undefined);\r\n                  setPasswordsMatch(true);\r\n                }}\r\n                required=\"required\"\r\n              ></input>\r\n              {passwordsMatch === false ? <p>Passwords don't match</p> : null}\r\n              {error !== undefined && <p>{error}</p>}\r\n              {!passwordUpdated ? (\r\n                <button type=\"submit\">Reset password</button>\r\n              ) : (\r\n                <p id={loginStyles.restore_password_message}>\r\n                  Password had been reset\r\n                </p>\r\n              )}\r\n            </>\r\n          ))}\r\n      </form>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default WithLoader(ResetPassword);\r\n","import React from \"react\";\r\n\r\nfunction PageNotFoundImg({ svgRef }) {\r\n  return (\r\n    <svg\r\n      ref={svgRef}\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"113.627\"\r\n      height=\"100.498\"\r\n    >\r\n      <defs>\r\n        <path d=\"M-75.303-10.387h61.887v57.559h-61.887z\"></path>\r\n      </defs>\r\n      <g transform=\"rotate(-2.661 -5435.68 5428.044)\">\r\n        <path\r\n          d=\"M352.98 331.677c-2.717 7.613-7.742 13.938-13.266 18.571-9.902 8.305-24.628 11.733-48.385 8.75-19.646-2.469-31.204-10.526-39.616-23.337-6.429-9.79-8.62-23.664-4.33-34.867 2.437-6.365 11.381-16.985 11.381-16.985s.029-21.818 4.752-23.046c3.564-.928 17.356 8.896 17.356 8.896s9.86-4.356 21.565-2.982c7.89.925 13.792 3.534 13.792 3.534s18.774-7.37 22.52-6c1.911.699-1.72 18.382-1.72 18.382s6.1 2.817 12.5 13.221c6.582 10.699 8.077 22.902 3.451 35.863z\"\r\n          style={{\r\n            lineHeight: \"normal\",\r\n            fontVariantLigatures: \"normal\",\r\n            fontVariantPosition: \"normal\",\r\n            fontVariantCaps: \"normal\",\r\n            fontVariantNumeric: \"normal\",\r\n            fontVariantAlternates: \"normal\",\r\n            fontVariantEastAsian: \"normal\",\r\n            fontFeatureSettings: \"normal\",\r\n            fontVariationSettings: \"normal\",\r\n            WebkitTextIndent: \"0\",\r\n            textIndent: \"0\",\r\n            WebkitTextAlign: \"start\",\r\n            textAlign: \"start\",\r\n            WebkitTextDecorationLine: \"none\",\r\n            textDecorationLine: \"none\",\r\n            WebkitTextDecorationStyle: \"solid\",\r\n            textDecorationStyle: \"solid\",\r\n            WebkitTextDecorationColor: \"#000\",\r\n            textDecorationColor: \"#000\",\r\n            WebkitTextTransform: \"none\",\r\n            textTransform: \"none\",\r\n            WebkitTextOrientation: \"mixed\",\r\n            textOrientation: \"mixed\",\r\n            whiteSpace: \"normal\",\r\n            shapePadding: \"0\",\r\n            shapeMargin: \"0\",\r\n            inlineSize: \"0\",\r\n            isolation: \"auto\",\r\n            mixBlendMode: \"normal\",\r\n            solidColor: \"#000\",\r\n            solidOpacity: \"1\",\r\n          }}\r\n          fill=\"#e4e9ec\"\r\n          fillRule=\"evenodd\"\r\n          color=\"#000\"\r\n          fontFamily=\"sans-serif\"\r\n          fontWeight=\"400\"\r\n          overflow=\"visible\"\r\n          paintOrder=\"fill markers stroke\"\r\n        ></path>\r\n        <ellipse\r\n          cx=\"301.374\"\r\n          cy=\"272.504\"\r\n          fillRule=\"evenodd\"\r\n          paintOrder=\"fill markers stroke\"\r\n          rx=\"4.218\"\r\n          ry=\"3.741\"\r\n          transform=\"rotate(4.126)\"\r\n        ></ellipse>\r\n        <path\r\n          fill=\"#d7bf9b\"\r\n          fillRule=\"evenodd\"\r\n          d=\"M303.05 266.766c-2.857 6.689-5.45 14.205-4.037 20.28 5.15 22.15 24.482 36.583 45.027 31.805a35.628 35.628 0 0011.342-4.83c-.505-6.418-2.503-12.765-5.852-18.209-6.4-10.403-12.5-13.22-12.5-13.22s3.631-17.683 1.72-18.382c-3.746-1.37-22.52 6-22.52 6s-5.608-2.459-13.18-3.444z\"\r\n          paintOrder=\"fill markers stroke\"\r\n        ></path>\r\n        <path\r\n          fill=\"#d387ba\"\r\n          stroke=\"#000\"\r\n          strokeWidth=\"3\"\r\n          d=\"M300.595 294.42c-.22.411-.473.918-.843 1.309-.386.408-.899.655-1.444.757-.605.89-1.116 1.826-1.328 2.793a5.67 5.67 0 00.189 3.002c.297.853.77 1.468 1.47 1.782.698.314 1.622.33 2.501.076a5.274 5.274 0 002.358-1.469c.645-.693 1.104-1.557 1.378-2.361.274-.805.364-1.55.262-2.201-.09-.572-.349-1.08-.926-1.708-.59-.235-1.198-.724-1.694-1.29-.072-.082-.121-.15-.189-.233-.466-.27-.945-.474-1.382-.487a1.658 1.658 0 00-.352.03z\"\r\n        ></path>\r\n        <path\r\n          d=\"M295.478 293.514l-2.044 2.196c.862.802 1.814 1.806 3.297 2.21a4.157 4.157 0 004.119-1.147c.254-.27.33-.48.489-.735.026.031.031.043.059.074.756.864 1.653 1.704 3.017 1.92 1.362.215 2.542-.564 3.265-1.42.723-.855 1.18-1.832 1.624-2.727l-2.688-1.332c-.444.895-.873 1.705-1.227 2.124-.353.419-.44.402-.504.392-.062-.01-.751-.384-1.232-.933-.24-.274-.483-.626-.805-.996-.16-.185-.654-1.414-1.051-1.396-.359.016-.681.025-1.34.096-.665.072-.696.856-.828 1.19-.103.263-.318.627-.42.82-.203.386-.404.718-.54.861-.27.287-.744.425-1.151.314-.406-.11-1.178-.709-2.04-1.51z\"\r\n          style={{\r\n            lineHeight: \"normal\",\r\n            fontVariantLigatures: \"normal\",\r\n            fontVariantPosition: \"normal\",\r\n            fontVariantCaps: \"normal\",\r\n            fontVariantNumeric: \"normal\",\r\n            fontVariantAlternates: \"normal\",\r\n            fontVariantEastAsian: \"normal\",\r\n            fontFeatureSettings: \"normal\",\r\n            fontVariationSettings: \"normal\",\r\n            WebkitTextIndent: \"0\",\r\n            textIndent: \"0\",\r\n            WebkitTextAlign: \"start\",\r\n            textAlign: \"start\",\r\n            WebkitTextDecorationLine: \"none\",\r\n            textDecorationLine: \"none\",\r\n            WebkitTextDecorationStyle: \"solid\",\r\n            textDecorationStyle: \"solid\",\r\n            WebkitTextDecorationColor: \"#000\",\r\n            textDecorationColor: \"#000\",\r\n            WebkitTextTransform: \"none\",\r\n            textTransform: \"none\",\r\n            WebkitTextOrientation: \"mixed\",\r\n            textOrientation: \"mixed\",\r\n            whiteSpace: \"normal\",\r\n            shapePadding: \"0\",\r\n            shapeMargin: \"0\",\r\n            inlineSize: \"0\",\r\n            isolation: \"auto\",\r\n            mixBlendMode: \"normal\",\r\n            solidColor: \"#000\",\r\n            solidOpacity: \"1\",\r\n          }}\r\n          color=\"#000\"\r\n          fontFamily=\"sans-serif\"\r\n          fontWeight=\"400\"\r\n          overflow=\"visible\"\r\n        ></path>\r\n        <path\r\n          fill=\"none\"\r\n          stroke=\"#000\"\r\n          strokeWidth=\"3\"\r\n          d=\"M319.195 287.46l-5.812 4.315 7.276 4.531\"\r\n        ></path>\r\n        <path\r\n          d=\"M263.137 259.311c-1.113.29-1.88 1.095-2.448 1.991-.569.896-.986 1.958-1.344 3.148-.715 2.38-1.164 5.284-1.469 8.138-.578 5.426-.58 10.16-.582 10.665-.272.325-2.114 2.51-4.515 5.772-2.572 3.493-5.458 7.739-6.796 11.233-4.5 11.749-2.223 26.024 4.476 36.227 8.6 13.097 20.71 21.492 40.685 24.001 23.973 3.012 39.226-.444 49.533-9.089 5.695-4.777 10.89-11.3 13.715-19.217 4.76-13.337 3.21-26.107-3.585-37.153-3.28-5.331-6.51-8.758-8.949-10.861-1.853-1.598-2.596-1.907-3.191-2.23.162-.8.817-3.975 1.422-8.053.339-2.28.622-4.585.697-6.444.038-.93.031-1.738-.079-2.462a3.763 3.763 0 00-.303-1.079c-.174-.373-.504-.864-1.139-1.096-1.723-.63-3.563-.214-5.933.302-2.37.517-5.102 1.322-7.71 2.166-4.929 1.596-8.915 3.162-9.394 3.35-.821-.35-6.095-2.552-13.616-3.434-11.393-1.337-20.325 2.335-21.506 2.835-.525-.371-3.185-2.27-6.802-4.444-1.978-1.189-4.073-2.354-5.967-3.189-1.895-.834-3.456-1.53-5.2-1.077zm.755 2.903c.039-.01 1.54.174 3.234.92 1.694.747 3.716 1.863 5.632 3.014a126.637 126.637 0 017.244 4.732l.695.496.78-.345s9.542-4.184 20.786-2.864c7.652.898 13.361 3.416 13.361 3.416l.572.252.58-.227s4.663-1.83 9.77-3.483c2.554-.827 5.22-1.609 7.423-2.089 1.952-.425 3.307-.403 3.779-.369.042.396.07.93.04 1.65-.067 1.654-.336 3.9-.666 6.128-.661 4.454-1.563 8.847-1.563 8.847l-.238 1.164 1.08.499s1.288.577 3.5 2.483c2.21 1.907 5.229 5.09 8.35 10.162 6.368 10.352 7.807 21.99 3.316 34.573-2.609 7.31-7.465 13.437-12.816 17.925-9.497 7.965-23.696 11.367-47.235 8.41-19.318-2.427-30.326-10.145-38.55-22.671-6.157-9.377-8.263-22.85-4.182-33.508 1.1-2.87 3.902-7.118 6.412-10.526a130.359 130.359 0 014.716-6.027l.352-.419v-.545s.009-5.4.596-10.907c.293-2.754.739-5.534 1.357-7.59.31-1.029.667-1.874 1.005-2.406.337-.532.603-.678.67-.695z\"\r\n          style={{\r\n            lineHeight: \"normal\",\r\n            fontVariantLigatures: \"normal\",\r\n            fontVariantPosition: \"normal\",\r\n            fontVariantCaps: \"normal\",\r\n            fontVariantNumeric: \"normal\",\r\n            fontVariantAlternates: \"normal\",\r\n            fontVariantEastAsian: \"normal\",\r\n            fontFeatureSettings: \"normal\",\r\n            fontVariationSettings: \"normal\",\r\n            WebkitTextIndent: \"0\",\r\n            textIndent: \"0\",\r\n            WebkitTextAlign: \"start\",\r\n            textAlign: \"start\",\r\n            WebkitTextDecorationLine: \"none\",\r\n            textDecorationLine: \"none\",\r\n            WebkitTextDecorationStyle: \"solid\",\r\n            textDecorationStyle: \"solid\",\r\n            WebkitTextDecorationColor: \"#000\",\r\n            textDecorationColor: \"#000\",\r\n            WebkitTextTransform: \"none\",\r\n            textTransform: \"none\",\r\n            WebkitTextOrientation: \"mixed\",\r\n            textOrientation: \"mixed\",\r\n            whiteSpace: \"normal\",\r\n            shapePadding: \"0\",\r\n            shapeMargin: \"0\",\r\n            inlineSize: \"0\",\r\n            isolation: \"auto\",\r\n            mixBlendMode: \"normal\",\r\n            solidColor: \"#000\",\r\n            solidOpacity: \"1\",\r\n          }}\r\n          fillRule=\"evenodd\"\r\n          color=\"#000\"\r\n          fontFamily=\"sans-serif\"\r\n          fontWeight=\"400\"\r\n          overflow=\"visible\"\r\n          paintOrder=\"fill markers stroke\"\r\n        ></path>\r\n      </g>\r\n      <text\r\n        x=\"-110.804\"\r\n        y=\"47.059\"\r\n        style={{ lineHeight: \"1.25\" }}\r\n        fontFamily=\"sans-serif\"\r\n        fontSize=\"40\"\r\n        fontWeight=\"400\"\r\n      ></text>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default PageNotFoundImg;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// SVG\r\nimport PageNotFoundImg from \"./img/PageNotFoundImg\";\r\n// Style\r\nimport \"./styles/style.scss\";\r\n\r\nfunction PageNotFound() {\r\n  // Ref to svg image.\r\n  const svgRef = useRef(null);\r\n\r\n  // Animate svg rotating.\r\n  useEffect(() => {\r\n    let start = 0,\r\n      speed = 1;\r\n\r\n    function step() {\r\n      if (svgRef.current) {\r\n        svgRef.current.style.rotate = `${start + 1 * speed}deg`;\r\n        start += 1 * speed;\r\n\r\n        if (start === 359) start = 0;\r\n\r\n        svgRef.current.onmouseenter = () => {\r\n          speed = 3;\r\n        };\r\n\r\n        svgRef.current.onmouseleave = () => {\r\n          speed = 1;\r\n        };\r\n\r\n        window.requestAnimationFrame(step);\r\n      }\r\n    }\r\n\r\n    window.requestAnimationFrame(step);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"page_not_found\">\r\n      <span id=\"404_image\">\r\n        <p>4</p>\r\n        <PageNotFoundImg svgRef={svgRef} />\r\n        <p>4</p>\r\n      </span>\r\n\r\n      <p>This page doesn't exist</p>\r\n      <Link to=\"/\">Go to main page</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PageNotFound;\r\n","import React, { useContext, useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n// Components\nimport GetInvitation from \"./pages/GetInvitation/index\";\nimport SignupWithInvitation from \"./pages/Signup/SignupWithInvitation\";\nimport Home from \"./pages/Home/\";\nimport Signup from \"./pages/Signup/Signup\";\nimport Login from \"./pages/Login/index\";\nimport Post from \"./pages/Post/index\";\nimport RestorePassword from \"./pages/RestorePassword/RestorePassword\";\nimport ResetPassword from \"./pages/ResetPassword/ResetPassword\";\nimport PageNotFound from \"./pages/404/PageNotFound\";\n// Store\nimport { store } from \"./utils/store\";\n// Styles\nimport \"./styles/App.scss\";\n// auth\nimport auth from \"./utils/auth\";\n\nfunction App() {\n  const { state, dispatch } = useContext(store);\n\n  // Check if user is signed in.\n  useEffect(() => {\n    // If he is...\n    if (auth.currentUser() !== null && auth.currentUser() !== undefined) {\n      // ...change loggedIn property in state object.\n      dispatch({ type: \"LOG_IN\" });\n    }\n  }, []);\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/search\" component={Home} />\n        <Route exact path=\"/signup\" component={Signup}>\n          {state.loggedIn && <Redirect to=\"/\" />}\n        </Route>\n        {/* <Route exact path=\"/invite\" component={GetInvitation}>\n          {state.loggedIn && <Redirect to=\"/\" />}\n        </Route> */}\n        <Route exact path=\"/login\" component={Login}>\n          {state.loggedIn && <Redirect to=\"/\" />}\n        </Route>\n\n        <Route exact path=\"/restorepassword\" component={RestorePassword}>\n          {state.loggedIn && <Redirect to=\"/\" />}\n        </Route>\n\n        <Route exact path=\"/resetpassword\" component={ResetPassword}>\n          {state.loggedIn && <Redirect to=\"/\" />}\n        </Route>\n\n        <Route exact path=\"/post/:postId\" component={Post} />\n        <Route exact path=\"/user/:name\" component={Home} />\n        <Route exact path=\"/profile\" component={Home}>\n          {!state.loggedIn && <Redirect to=\"/login\" />}\n        </Route>\n        <Route component={PageNotFound} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n// State provider\nimport { StateProvider } from \"./utils/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider>\n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"posts\":\"Posts_container_posts__3WdrR\",\"post\":\"Posts_container_post__fDS-H\",\"post_main_body\":\"Posts_container_post_main_body__To7fn\",\"image_link\":\"Posts_container_image_link__3S4wf\",\"image_container\":\"Posts_container_image_container__1wjBw\",\"red_heart\":\"Posts_container_red_heart__1AzZo\",\"blue_heart\":\"Posts_container_blue_heart__3F7zq\",\"inactive_like\":\"Posts_container_inactive_like__3cVW0\",\"load_more\":\"Posts_container_load_more__3VKMG\",\"loading_message\":\"Posts_container_loading_message__23QTr\",\"load_more_button\":\"Posts_container_load_more_button__3eIQI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Login_form__1S51i\",\"restore_password_message\":\"Login_restore_password_message__2sxCA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post_info\":\"Post_info_post_info__1klgR\",\"user_image\":\"Post_info_user_image__2oiN8\",\"likes\":\"Post_info_likes__mgUj4\",\"red_heart\":\"Post_info_red_heart__1UE2v\",\"blue_heart\":\"Post_info_blue_heart__2h509\",\"transparent_heart\":\"Post_info_transparent_heart__2ttX3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Signup_form__3X8h_\",\"confirmation_message\":\"Signup_confirmation_message__1vC6z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"GetInvitation_form__1wyRk\",\"confirmation_message\":\"GetInvitation_confirmation_message__yFS0H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Post_container__2RaZZ\",\"content\":\"Post_content__Z0AlM\",\"post\":\"Post_post__1M6Tz\",\"post_main_body\":\"Post_post_main_body__12Rdy\",\"comment\":\"Post_comment__TH53c\",\"comment_info\":\"Post_comment_info__1iSlB\",\"user_info\":\"Post_user_info__2e-PZ\",\"new_comment_form\":\"Post_new_comment_form__M0EXv\",\"posts_header\":\"Post_posts_header__LNwLy\",\"modal_container\":\"Post_modal_container__uPdpY\",\"modal_window\":\"Post_modal_window__9tjNP\",\"button_container\":\"Post_button_container__1KxrT\",\"image_full_screen_overlay\":\"Post_image_full_screen_overlay__371eU\",\"full_screen_image\":\"Post_full_screen_image__3D08V\",\"close_button\":\"Post_close_button__2tcFU\",\"loading_message\":\"Post_loading_message__No4Sx\",\"end_message\":\"Post_end_message__3yFjb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2nyMJ\",\"open_card_button\":\"styles_open_card_button__3uB4Q\",\"user\":\"styles_user__36eiJ\",\"slidein\":\"styles_slidein__2Lluy\",\"upload_image_form\":\"styles_upload_image_form__1Y7-l\",\"logout_button\":\"styles_logout_button__30Xwu\",\"login_signup_buttons_container\":\"styles_login_signup_buttons_container__1pMI0\",\"form\":\"styles_form__3l1lh\",\"input\":\"styles_input__3GMFI\",\"buttons_container\":\"styles_buttons_container__2LYWs\",\"change_image_button\":\"styles_change_image_button__1F8K3\"};"],"sourceRoot":""}