(this.webpackJsonpforum=this.webpackJsonpforum||[]).push([[0],{10:function(e,t,a){e.exports={container:"Home_container__2x8ZR",posts_container:"Home_posts_container__2c1kG",new_post:"Home_new_post__1rdmf",new_post_buttons_container:"Home_new_post_buttons_container__1wrR5",choose_image_container:"Home_choose_image_container__1agZx",posts_header:"Home_posts_header__13w6s",slideuperror:"Home_slideuperror__PwZyG"}},100:function(e,t){},102:function(e,t){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(72),c=a.n(o),s=a(5),i=a(7),l=a(2),u=a.n(l),d=a(4),m=a(3),p=a(46),f=a.n(p),b=f.a.query,g=new f.a.Client({secret:"fnAD4PAFl5ACBRlo6msMlsGCoZDSWFGtzz0Qj3ER"}),_=function(e){return function(t){var a=Object(n.useState)(!0),o=Object(m.a)(a,2),c=o[0],s=o[1];return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("img",{src:"/img/loading/loading_kitty.svg",alt:"loading",id:"loading_kitty"}),r.a.createElement(e,Object.assign({},t,{setIsLoading:s})))}},h=a(47),E=a.n(h),y=a(31),v=a(1),O={size:5,loggedIn:!1,user:{email:null,handle:null,imageUrl:null,userDbRef:null,likes:[]},otherUser:void 0,posts:{},post:null,showLoginPrompt:!1,waitToShowLoginPrompt:!1,path:"",pendingPostLike:null,pendingPostUnlike:null},j=Object(n.createContext)(O),w=j.Provider,x=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"LOG_IN":return Object(v.a)(Object(v.a)({},e),{},{loggedIn:!0});case"SET_USER":var a=t.payload,n=a.data,r=a.ref;return Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)(Object(v.a)({},e.user),n),{},{userDbRef:r})});case"SET_SHOW_LOGIN_PROMPT":return Object(v.a)(Object(v.a)({},e),{},{showLoginPrompt:t.payload});case"SET_OTHER_USER":return Object(v.a)(Object(v.a)({},e),{},{otherUser:t.payload});case"SET_WAIT_TO_SHOW_LOGIN_PROMPT":return Object(v.a)(Object(v.a)({},e),{},{waitToShowLoginPrompt:t.payload});case"SET_PATH":return Object(v.a)(Object(v.a)({},e),{},{path:t.payload});case"ADD_INFO":var o=t.payload,c=o.location,s=o.hobbies,i=o.occupation,l=Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)({},e.user),{},{location:c,hobbies:s,occupation:i})});return void 0!==c&&""!==c.trim()||delete l.user.location,void 0!==s&&""!==s.trim()||delete l.user.hobbies,void 0!==i&&""!==i.trim()||delete l.user.occupation,l;case"CHANGE_IMAGE":return Object(v.a)(Object(v.a)({},e),{},{user:t.payload});case"REMOVE_POST":var u=t.payload;if(Object.keys(e.posts).length>0){var d=e.posts.data,m=d.findIndex((function(e){return e.data.postId===u}));return m>=0&&d.splice(m,1),Object(v.a)(Object(v.a)({},e),{},{posts:Object(v.a)(Object(v.a)({},e.posts),{},{data:d})})}case"REMOVE_INFO":var p=t.payload,f=Object(v.a)({},e);return delete f.user[p],f;case"SET_POSTS":return Object(v.a)(Object(v.a)({},e),{},{posts:t.payload});case"ADD_POSTS":return Object(v.a)(Object(v.a)({},e),{},{posts:Object(v.a)(Object(v.a)({},e.posts),{},{data:[].concat(Object(y.a)(e.posts.data),Object(y.a)(t.payload.data)),after:t.payload.after})});case"SET_CURRENT_POST":return Object(v.a)(Object(v.a)({},e),{},{post:t.payload});case"SET_LIKES":return Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)({},e.user),{},{likes:t.payload})});case"CHANGE_LIKE_COUNT":var b,g=t.payload,_=g.newLikeCount,h=g.postId;if(e.posts&&e.posts.data&&0!==e.posts.length){b=e.posts.data;var E=e.posts.data.findIndex((function(e){return e.data.postId===h}));E>=0&&(b[E].data.likeCount=_)}else b=[];return null!==e.post&&void 0!==e.post?Object(v.a)(Object(v.a)({},e),{},{post:Object(v.a)(Object(v.a)({},e.post),{},{data:Object(v.a)(Object(v.a)({},e.post.data),{},{likeCount:_})}),posts:Object(v.a)(Object(v.a)({},e.posts),{},{data:b})}):Object(v.a)(Object(v.a)({},e),{},{posts:Object(v.a)(Object(v.a)({},e.posts),{},{data:b})});case"LIKE_POST":var O=t.payload,j=O.like,w=O.postId,x=e.user.likes;if(x.length>0)x.findIndex((function(e){return e.data.postId===w}))<0&&x.push(j);else x.push(j);return Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)({},e.user),{},{likes:x})});case"UNLIKE_POST":var k=t.payload.postId,S=e.user.likes.findIndex((function(e){return e.data.postId===k})),I=e.user.likes;return S>=0&&I.splice(S,1),Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)({},e.user),{},{likes:I})});case"SET_PENDING_POST_LIKE":var T=t.payload;return Object(v.a)(Object(v.a)({},e),{},{pendingPostLike:T,pendingPostUnlike:null});case"SET_PENDING_POST_UNLIKE":var P=t.payload;return Object(v.a)(Object(v.a)({},e),{},{pendingPostUnlike:P,pendingPostLike:null});case"SET_COMMENTS":return Object(v.a)(Object(v.a)({},e),{},{post:Object(v.a)(Object(v.a)({},e.post),{},{comments:t.payload})});case"ADD_COMMENTS":return Object(v.a)(Object(v.a)({},e),{},{post:Object(v.a)(Object(v.a)({},e.post),{},{comments:{data:[].concat(Object(y.a)(e.post.comments.data),Object(y.a)(t.payload.data)),after:t.payload.after}})});case"CHANGE_AVATAR":var C=t.payload.imageUrl;return Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)({},e.user),{},{imageUrl:C})});case"SET_POST_ID":return Object(v.a)(Object(v.a)({},e),{},{post:Object(v.a)(Object(v.a)({},e.post),{},{postId:t.payload})});case"DELETE_COMMENT":var N=t.payload,L=e.post.comments.data,R=L.findIndex((function(e){return e.data.commentId===N}));return R>=0&&L.splice(R,1),Object(v.a)(Object(v.a)({},e),{},{post:Object(v.a)(Object(v.a)({},e.post),{},{comments:Object(v.a)(Object(v.a)({},e.post.comments),{},{data:L})})});case"LOGOUT":return Object(v.a)(Object(v.a)({},e),{},{loggedIn:!1,user:{email:null,handle:null,imageUrl:null,userDbRef:null}});default:return e}}),O),o=Object(m.a)(a,2),c=o[0],s=o[1];return r.a.createElement(w,{value:{state:c,dispatch:s}},t)},k=Object(n.createContext)(void 0),S=k.Provider,I={size:3,notifications:{data:[],before:void 0,after:void 0},total:void 0,totalCurrentPage:void 0,isError:void 0,isOpen:void 0,isLoading:void 0,isLast:void 0,isFirst:void 0};function T(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"SET_NOTIFICATIONS":return Object(v.a)(Object(v.a)({},e),{},{notifications:Object(v.a)(Object(v.a)({},e.notifications),{},{data:t.payload})});case"SET_AFTER":return Object(v.a)(Object(v.a)({},e),{},{notifications:Object(v.a)(Object(v.a)({},e.notifications),{},{after:t.payload})});case"SET_BEFORE":return Object(v.a)(Object(v.a)({},e),{},{notifications:Object(v.a)(Object(v.a)({},e.notifications),{},{before:t.payload})});case"REMOVE_NOTIFICATION":var a=t.payload,n=e.notifications.data,r=n.findIndex((function(e){return e.data.id===a}));return r>=0&&n.splice(r,1),Object(v.a)(Object(v.a)({},e),{},{notifications:Object(v.a)(Object(v.a)({},e.notifications),{},{data:n})});case"SET_TOTAL":return Object(v.a)(Object(v.a)({},e),{},{total:t.payload});case"SET_TOTAL_CURRENT_PAGE":return Object(v.a)(Object(v.a)({},e),{},{totalCurrentPage:t.payload});case"SET_IS_ERROR":return Object(v.a)(Object(v.a)({},e),{},{isError:t.payload});case"SET_IS_OPEN":return Object(v.a)(Object(v.a)({},e),{},{isOpen:t.payload});case"SET_IS_LOADING":return Object(v.a)(Object(v.a)({},e),{},{isLoading:t.payload});case"REMOVE_ALL":return Object(v.a)(Object(v.a)({},e),{},{notifications:{}});case"REMOVE_BEFORE":return Object(v.a)(Object(v.a)({},e),{},{notifications:Object(v.a)(Object(v.a)({},e.notifications),{},{before:void 0})});case"REMOVE_AFTER":return Object(v.a)(Object(v.a)({},e),{},{notifications:Object(v.a)(Object(v.a)({},e.notifications),{},{after:void 0})});case"SET_IS_LAST_PAGE":return Object(v.a)(Object(v.a)({},e),{},{isLast:t.payload});case"SET_IS_FIRST_PAGE":return Object(v.a)(Object(v.a)({},e),{},{isFirst:t.payload})}}),I),o=Object(m.a)(a,2),c=o[0],s=o[1];return r.a.createElement(S,{value:{state:c,dispatch:s}},t)}var P=function(e){var t=e.notification,a=Object(n.useContext)(k),o=a.state,c=a.dispatch,s=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Delete(t.ref));case 3:c({type:"REMOVE_NOTIFICATION",payload:t.data.id}),c({type:"SET_TOTAL",payload:o.total-1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("input",{id:"remove_notification",type:"image",src:"/img/header/remove.svg",className:"remove_notification_button","data-dont-detect-click":"true",tabIndex:"0",onClick:s})};var C=function(e){var t=e.notification;return r.a.createElement("li",{"data-dont-detect-click":"true"},r.a.createElement(s.b,{to:"/user/".concat(t.data.sender)},t.data.sender),"like"===t.data.type?" liked ":" commented on ",r.a.createElement(s.b,{to:"/post/".concat(t.data.postId)},"your post"),"\xa0\xa0\xa0\xa0",r.a.createElement(P,{notification:t}))};var N=function(){var e=Object(n.useContext)(j).state,t=Object(n.useContext)(k),a=t.state,o=t.dispatch,c=function(){var t=Object(d.a)(u.a.mark((function t(n){var r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o({type:"SET_IS_LOADING",payload:!0}),"forward"===n?r={size:a.size,after:a.notifications.after}:"back"===n&&(r={size:a.size,before:a.notifications.before}),t.prev=2,t.next=5,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("notifications_by_recepient"),e.user.handle)),r),b.Lambda("X",b.Get(b.Var("X")))));case 5:c=t.sent,o({type:"SET_NOTIFICATIONS",payload:c.data}),o({type:"SET_BEFORE",payload:c.before}),o({type:"SET_AFTER",payload:c.after}),o({type:"SET_IS_LOADING",payload:!1}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0),o({type:"SET_IS_LOADING",payload:!1});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(u.a.mark((function t(n){var r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o({type:"SET_IS_LOADING",payload:!0}),"forward"===n?r={size:a.size,after:a.notifications.after}:"back"===n&&(r={size:a.size,before:a.notifications.before}),t.prev=2,t.next=5,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("notifications_by_recepient"),e.user.handle)),r),b.Lambda("X",b.Get(b.Var("X")))));case 5:c=t.sent,o({type:"SET_NOTIFICATIONS",payload:c.data}),a.isFirst||o({type:"SET_BEFORE",payload:c.before}),a.isLast||o({type:"SET_AFTER",payload:c.after}),o({type:"SET_IS_LOADING",payload:!1}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0),o({type:"SET_IS_LOADING",payload:!1});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){void 0!==a.totalCurrentPage&&a.totalCurrentPage<=0&&(a.notifications.after?s("forward"):a.notifications.before&&s("back"))}),[a.totalCurrentPage]),Object(n.useEffect)((function(){a.notifications.before?o({type:"SET_IS_FIRST_PAGE",payload:!1}):a.notifications.before||o({type:"SET_IS_FIRST_PAGE",payload:!0}),a.notifications.after?o({type:"SET_IS_LAST_PAGE",payload:!1}):a.notifications.after||o({type:"SET_IS_LAST_PAGE",payload:!0})}),[a.notifications]),Object(n.useEffect)((function(){var e=document.getElementById("next_notifications"),t=document.getElementById("prev_notifications");a.isLast?e.setAttribute("disabled","true"):a.isLast||e.removeAttribute("disabled"),a.isFirst?t.setAttribute("disabled","true"):a.isFirst||t.removeAttribute("disabled")}),[a.isLast,a.isFirst]),Object(n.useEffect)((function(){a.total<=0&&o({type:"SET_IS_OPEN",payload:!1})}),[a.total]),r.a.createElement("div",{id:"navigation_container","data-dont-detect-click":"true"},r.a.createElement("input",{type:"image",src:"/img/header/arrow.svg",tabIndex:a.notifications.before?"0":"-1",className:"notifications_arrow ".concat(a.notifications.before?null:"inactive"),"data-dont-detect-click":"true",id:"prev_notifications",onClick:function(){c("back")}}),"\xa0",r.a.createElement("input",{type:"image",src:"/img/header/arrow.svg",className:"notifications_arrow ".concat(a.notifications.after?null:"inactive"),"data-dont-detect-click":"true",tabIndex:a.notifications.after?"0":"-1",id:"next_notifications",onClick:function(){c("forward")}}))};var L=function(){var e=Object(n.useContext)(k),t=e.state,a=e.dispatch,o=Object(n.useContext)(j).state,c=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Paginate(b.Match(b.Index("notifications_by_recepient"),o.user.handle)));case 3:n=e.sent,t(n.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c();case 3:e.sent.forEach(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.query(b.Delete(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a({type:"REMOVE_ALL"}),a({type:"SET_TOTAL",payload:0}),a({type:"SET_IS_OPEN",payload:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"mark_read_buttons_container",className:t.total<=0?"disabled":null,"data-dont-detect-click":"true"},r.a.createElement("button",{id:"mark_all_read",tabIndex:"0",onClick:s,"data-dont-detect-click":"true"},"mark all read"))};var R=function(){var e=Object(n.useContext)(k),t=e.state,a=e.dispatch,o=Object(n.useContext)(j).state;return Object(n.useEffect)((function(){var e=o.user.handle;e&&function(e){new Promise(function(){var n=Object(d.a)(u.a.mark((function n(r,o){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("notifications_by_recepient"),e)),{size:t.size}),b.Lambda("X",b.Get(b.Var("X")))));case 3:c=n.sent,a({type:"SET_NOTIFICATIONS",payload:c.data}),a({type:"SET_AFTER",payload:c.after}),a({type:"SET_BEFORE",payload:c.before}),r("successfully loaded"),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0),o(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}())}(e)}),[o.user.handle]),Object(n.useEffect)((function(){if(t.notifications&&t.notifications.data){var e=t.notifications.data.length;a({type:"SET_TOTAL_CURRENT_PAGE",payload:e})}}),[t.notifications]),Object(n.useEffect)((function(){document.body.addEventListener("click",(function(e){e.target.dataset.dontDetectClick||a({type:"SET_IS_OPEN",payload:!1})}))}),[t.isOpen]),r.a.createElement("ul",{id:"notifications_container","data-dont-detect-click":"true"},t.isLoading?r.a.createElement("p",null,"Loading..."):t.notifications&&t.notifications.data&&t.notifications.data.map((function(e){return r.a.createElement(C,{key:e.data.id,notification:e})})),r.a.createElement(N,null),r.a.createElement(L,null),r.a.createElement("button",{id:"close_notifications",onClick:function(){a({type:"SET_IS_OPEN",payload:!1})}},"close"))};var M=function(){var e=Object(n.useContext)(j).state,t=Object(n.useContext)(k),a=t.state,o=t.dispatch,c=Object(n.useState)(!1),s=Object(m.a)(c,2),i=s[0],l=s[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),_=f[0],h=f[1];return Object(n.useEffect)((function(){(function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.prev=1,t.next=4,new Promise(function(){var t=Object(d.a)(u.a.mark((function t(a,n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.query(b.Count(b.Match(b.Index("notifications_by_recepient"),e.user.handle)));case 3:r=t.sent,o({type:"SET_TOTAL",payload:r}),a("Success"),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),h(!0),n(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}());case 4:l(!1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),l(!1);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}})()()}),[e.user.handle,window.location.pathname]),r.a.createElement(r.a.Fragment,null,i?r.a.createElement("p",{id:"notifications_loading_msg"},"loading..."):!_&&a.total<=0?r.a.createElement("input",{type:"image",alt:"notifications",id:"notifications_bell",src:"/img/header/bell-transparent.svg",tabIndex:"-1",className:"inactive_bell",height:"49.531"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"image",alt:"notifications",src:"/img/header/bell-yellow.svg",id:"notifications_bell","data-dont-detect-click":"true",height:"49.531",onClick:function(){a.isOpen?o({type:"SET_IS_OPEN",payload:!1}):o({type:"SET_IS_OPEN",payload:!0})}}),r.a.createElement("p",{id:"total_notifications"},a.total)),a.isOpen&&r.a.createElement(R,null))};var A=function(){return r.a.createElement(T,null,r.a.createElement(M,null))};var D=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(m.a)(c,2),i=s[0],l=s[1],u=Object(n.useRef)(),d=Object(n.useRef)();return Object(n.useEffect)((function(){var e=u.current,t=d.current;t.addEventListener("focus",(function(){e.style.borderBottom="2.7px solid #48c2d9ff"})),t.addEventListener("blur",(function(){e.style.borderBottom="2.7px solid black"}))}),[]),r.a.createElement("form",{ref:u,onSubmit:function(e){e.preventDefault()}},r.a.createElement("label",{htmlFor:"query"},"Search in posts"),r.a.createElement("input",{type:"text",placeholder:"...",ref:d,onChange:function(e){l(e.target.value.trim()),o(!1)}}),r.a.createElement("input",{type:"image",id:"search_icon",src:"/img/header/search.svg",alt:"search icon",onClick:function(){i.trim().length<3?(o(!0),setTimeout((function(){var e=document.getElementById("query_too_short_message");e&&(e.style.animationDuration="0.6s",e.style.animationName="slideupsearcherror"),setTimeout((function(){o(!1)}),500)}),2e3)):window.location.href="/search?query=".concat(i)}}),a&&r.a.createElement("p",{id:"query_too_short_message"},"Must be at least three characters long"))};a(121);var F=function(){var e=Object(n.useContext)(j).state,t=function(){var e=window.location.pathname.split("/")[1];return"signup"!==e&&"login"!==e&&"restore"!==e&&"resetpassword"!==e&&"restorepassword"!==e};return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"header"},t()&&r.a.createElement("li",null,r.a.createElement(D,null)),r.a.createElement("ul",{id:"header_links_container"},r.a.createElement("li",null,r.a.createElement(s.b,{to:"/",className:"/"===window.location.pathname?"active":null},"Home")),e.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/profile",className:"/profile"===window.location.pathname||"/profile/"===window.location.pathname?"active":null},"My posts")),r.a.createElement("li",{id:"with_dropdown"},r.a.createElement(A,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/login",className:"/login"===window.location.pathname||"/login/"===window.location.pathname?"active":null},"Login")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/signup",className:"/signup"===window.location.pathname||"/signup/"===window.location.pathname?"active":null},"Signup"))))),!t()&&r.a.createElement("div",{id:"header_bottom_border"}))};a(122);var U=function(){return r.a.createElement("svg",{id:"footer_kitty",xmlns:"http://www.w3.org/2000/svg",width:"183.957",height:"112.294"},r.a.createElement("g",{transform:"translate(-196.902 -286.666)"},r.a.createElement("g",{stroke:"#000",strokeWidth:"2"},r.a.createElement("path",{fill:"#e3e6ed",d:"M317.007 381.633c6.169-1.95 11.792-1.588 16.1-1.95 4.309-.364 7.302-1.452 10.567-3.765 3.265-2.313 6.802-5.85 9.454-9.144 2.65-3.295 4.416-6.347 5.822-9.657 1.406-3.31 2.452-6.88 4.7-9.459 2.246-2.579 5.693-4.166 8.958-3.402 3.265.765 6.348 3.88 7.073 7.03.725 3.152-.907 6.342-3.22 10.068-2.312 3.726-5.305 7.989-8.116 11.435-2.812 3.447-5.443 6.077-8.662 8.708-3.22 2.63-7.03 5.26-10.975 7.21a47.051 47.051 0 01-11.474 3.9c-3.446.68-6.258.772-9.705.953-3.447.181-7.528.454-11.519.499-3.99.045-7.891-.136-10.975-.499-3.084-.362-5.351-.907-3.13-3.31 2.222-2.404 8.934-6.667 15.102-8.617z"}),r.a.createElement("path",{fill:"#89473c",fillRule:"evenodd",strokeLinecap:"round",d:"M371.377 344.27c-2.878-.172-5.763 1.324-7.729 3.58-.922 1.059-1.636 2.289-2.261 3.594a26.395 24.082 0 0015.994 8.573c1.797-3.085 2.924-5.826 2.3-8.537-.724-3.152-3.808-6.267-7.074-7.032a7.322 7.322 0 00-1.23-.177z",paintOrder:"fill markers stroke"}),r.a.createElement("path",{fill:"#89473c",d:"M345.066 374.867c-.467.37-.932.725-1.392 1.051-2.187 1.549-4.26 2.538-6.68 3.139.013.035.018.065.031.101.259.69.766 1.613 1.19 2.446.423.832.763 1.576 1.39 2.462.628.887 1.544 1.915 2.473 2.952.93 1.036 1.873 2.08 2.547 2.619.38.304.701.423 1.207.363a45.132 45.132 0 002.875-1.293c2.1-1.038 4.153-2.273 6.107-3.594-.018-.013-.024-.022-.043-.035-.67-.468-1.943-1.236-3.045-1.998-1.102-.762-2.032-1.517-2.94-2.44-.91-.922-1.799-2.01-2.517-3.251-.518-.897-.902-1.786-1.203-2.522zm-25.763 4.567l-.182.443.293 3.143.047 2.45 1.285 3.928c.45 1.334.901 2.667 1.352 3.998.259.143.516.285.775.426l5.291-.353 5.44-.176c0-.029.003-.057.004-.086-.864-1.21-1.725-2.422-2.588-3.635l-1.655-3.193-1.142-4.059.084-2.306-9.004-.58zm37.826-17.862c-.116-.002-.216.127-.416.383a8.51 8.51 0 01-.693.777 42.769 42.769 0 01-2.893 4.041c-.462.574-.98 1.156-1.488 1.737.356.466.617.842.986 1.222.513.53 1.347 1.17 2.068 1.764.722.593 1.33 1.138 2.26 1.7.93.56 2.18 1.139 3.447 1.716s2.55 1.153 3.383 1.377c.834.224 1.22.097 2.567-1.266.279-.282.684-.735 1.027-1.101.322-.379.641-.734.967-1.133a101.27 101.27 0 003.463-4.54c-.115-.15-.34-.229-.616-.265-.737-.096-2.212-.288-3.527-.545-1.315-.256-2.47-.577-3.672-1.058-1.202-.481-2.453-1.121-3.607-1.97-1.155-.85-2.213-1.909-2.742-2.438-.265-.265-.398-.399-.514-.4z"})),r.a.createElement("path",{fill:"#e3e6ed",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeWidth:"2",d:"M330.867 353.724c0 33.899-21.393 44.236-58.692 44.236-37.3 0-74.273-10.722-74.273-44.62 0-8.985 3.032-23.084 9.742-32.348 9.392-12.966 23.38-19.852 23.38-19.852s5.977-11.804 10.6-13.37c3.488-1.181 9.555 8.708 9.555 8.708s9.074-2.5 13.377-2.5c6.599 0 21.09 1.478 21.09 1.478s9.565-8.38 13.19-6.717c3.739 1.717 3.09 14.53 3.09 14.53s9.483 5.796 16.616 15.713c7.335 10.197 12.325 24.658 12.325 34.742z",paintOrder:"fill markers stroke"}),r.a.createElement("ellipse",{cx:"251.156",cy:"310.136",fillRule:"evenodd",paintOrder:"fill markers stroke",rx:"4",ry:"3.7"}),r.a.createElement("path",{id:"tongue",fill:"#ff2a41",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeWidth:"2",d:"M263.377 298.864c-.002.138-.008.27-.008.408 0 7.12.265 14.373 4.543 14.373 4.277 0 7.748-7.39 7.748-14.51 0-.091-.005-.18-.006-.27z",paintOrder:"fill markers stroke"}),r.a.createElement("path",{fill:"#e3e6ed",fillRule:"evenodd",d:"M274.57 313.725c.384 4.256-3.88 2.55-6.64 1.539-.763-.28-3.134 2.505-5.213 2.06-.822-.177-1.395-1.954-2.113-2.963-.59-.829-4.025.078-4.025-1.887 0-10.414-8.303-15.585 1.154-15.585 4.21 0 15.44-1.967 18.963.693 1.694 1.28-1.018 3.598-1.68 6.244-.786 3.134-.767 6.363-.447 9.899z",paintOrder:"fill markers stroke"}),r.a.createElement("path",{fill:"#89473c",fillOpacity:"1",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeWidth:"2",d:"M298.09 288.541c-4.038-.45-12.444 6.916-12.444 6.916s-2.332-.228-5.238-.488a26.395 24.082 0 00-5.715 14.963 26.395 24.082 0 0026.395 24.082 26.395 24.082 0 0020.984-9.475 61.114 61.114 0 00-3.529-5.557c-7.133-9.916-16.617-15.712-16.617-15.712s.649-12.813-3.09-14.53a2.425 2.425 0 00-.746-.199z",opacity:"1",paintOrder:"fill markers stroke"}),r.a.createElement("ellipse",{cx:"284.898",cy:"311.905",fillRule:"evenodd",paintOrder:"fill markers stroke",rx:"4",ry:"3.7"}),r.a.createElement("path",{d:"M269.035 312.225c-.377-.152-.782-.02-.957.091-.174.111-.242.202-.303.278-.12.15-.179.266-.246.392-.133.254-.261.54-.4.842-.278.603-.707 1.29-.717 1.299-.527.487-1.393 1.009-2.146 1.262-.384.128-.749.195-1.01.19-.262-.007-.392-.059-.504-.16-.224-.199-.65-1.295-.967-2.52l-1.937.501c.317 1.226.528 2.58 1.574 3.512.523.466 1.186.652 1.787.666.6.014 1.167-.118 1.693-.295a8.167 8.167 0 002.868-1.687c.15-.139.16-.303.273-.451.047.198.038.38.197.615.613.903 1.637 1.314 2.653 1.424 1.025.11 2.192-.052 3.248-.68 1.055-.628 1.818-1.575 2.298-2.2.481-.624.71-1.021.891-1.34l-1.736-.991c-.182.317-.314.557-.74 1.111-.427.554-1.115 1.331-1.737 1.701-.621.37-1.36.479-2.012.408-.661-.07-1.013-.263-1.21-.554.094.139-.006-.036-.038-.282a10.44 10.44 0 01-.06-.904c-.01-.328-.015-.65-.035-.94a2.853 2.853 0 00-.057-.443 1.237 1.237 0 00-.105-.312.988.988 0 00-.565-.533zm-17.287 15.17c-.903-.087-1.906-.06-2.994.076-2.177.27-7.788 2.207-7.904 2.592l1.392 1c2.429-.692 4.829-1.368 6.758-1.608 1.93-.24 3.454-.034 4.295.361.841.396 1.083.897 1.086 1.36.003.444-.399 1.242-.885 1.785-.488.545-1.008.884-1.642 1.256-.635.372-1.304.729-1.985 1.092l-.113 1.9c.68-.364 2.428-.868 3.11-1.268.68-.399 1.428-.876 2.118-1.646.692-.772 1.405-1.828 1.397-3.13-.008-1.286-.856-2.508-2.236-3.157-.691-.325-1.494-.527-2.397-.613z",style:{lineHeight:"normal",fontVariantLigatures:"normal",fontVariantPosition:"normal",fontVariantCaps:"normal",fontVariantNumeric:"normal",fontVariantAlternates:"normal",fontVariantEastAsian:"normal",fontFeatureSettings:"normal",fontVariationSettings:"normal",WebkitTextIndent:"0",textIndent:"0",WebkitTextAlign:"start",textAlign:"start",WebkitTextDecorationLine:"none",textDecorationLine:"none",WebkitTextDecorationStyle:"solid",textDecorationStyle:"solid",WebkitTextDecorationColor:"#000",textDecorationColor:"#000",WebkitTextTransform:"none",textTransform:"none",WebkitTextOrientation:"mixed",textOrientation:"mixed",whiteSpace:"normal",shapePadding:"0",shapeMargin:"0",inlineSize:"0",isolation:"auto",mixBlendMode:"normal",solidColor:"#000",solidOpacity:"1"},color:"#000",fontFamily:"sans-serif",fontWeight:"400",overflow:"visible"}),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M224.146 305.795l3.946 4.354m-10.405-.081l8.157 5.084"}),r.a.createElement("path",{style:{lineHeight:"normal",fontVariantLigatures:"normal",fontVariantPosition:"normal",fontVariantCaps:"normal",fontVariantNumeric:"normal",fontVariantAlternates:"normal",fontVariantEastAsian:"normal",fontFeatureSettings:"normal",fontVariationSettings:"normal",WebkitTextIndent:"0",textIndent:"0",WebkitTextAlign:"start",textAlign:"start",WebkitTextDecorationLine:"none",textDecorationLine:"none",WebkitTextDecorationStyle:"solid",textDecorationStyle:"solid",WebkitTextDecorationColor:"#000",textDecorationColor:"#000",WebkitTextTransform:"none",textTransform:"none",WebkitTextOrientation:"mixed",textOrientation:"mixed",whiteSpace:"normal",shapePadding:"0",shapeMargin:"0",inlineSize:"0",isolation:"auto",mixBlendMode:"normal",solidColor:"#000",solidOpacity:"1"},d:"M251.748 327.395c-.903-.087-1.906-.06-2.994.076-2.177.27-7.788 2.207-7.904 2.592l1.392 1c2.429-.692 4.829-1.368 6.758-1.608 1.93-.24 3.454-.034 4.295.361.841.396 1.083.897 1.086 1.36.003.444-.399 1.242-.885 1.785-.488.545-1.008.884-1.642 1.256-.635.372-1.304.729-1.985 1.092l-.113 1.9c.68-.364 2.428-.868 3.11-1.268.68-.399 1.428-.876 2.118-1.646.692-.772 1.405-1.828 1.397-3.13-.008-1.286-.856-2.508-2.236-3.157-.691-.325-1.494-.527-2.397-.613zm31.515 2.147c.888.185 1.837.51 2.837.961 1.998.904 6.374 4.18 6.37 4.583l-1.966 1.086c-2.114-1.381-3.457-3.046-5.228-3.847-1.772-.801-3.289-1.057-4.209-.93-.92.129-1.3.535-1.44.977-.135.423.011 1.305.315 1.967.305.665.7 1.143 1.196 1.687.495.543 2.899 2.113 3.44 2.662l-1.373 1.395c-.542-.549-3.013-2.127-3.545-2.71-.532-.584-1.104-1.262-1.535-2.202-.432-.942-.799-2.163-.405-3.404.39-1.225 1.562-2.14 3.073-2.35.755-.105 1.582-.06 2.47.125z",color:"#000",fontFamily:"sans-serif",fontWeight:"400",overflow:"visible"}),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M309.267 309.692l-4.528 3.745m11.269 1.473l-8.437 4.604"})))};a(123);var B=function(){var e,t=Object(n.useRef)(),a=Object(n.useState)(!1),o=Object(m.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(!1),l=Object(m.a)(i,2),u=l[0],d=l[1],p=!0,f=Object(n.useRef)(new IntersectionObserver((function(t){t[0].isIntersecting?(p=!0,e=setTimeout((function(){p&&s(!0)}),1e3)):(s(!1),e&&clearTimeout(e))})));return Object(n.useEffect)((function(){var e=f.current;return t.current&&e.observe(t.current),function(){t.current&&e.unobserve(t.current)}}),[t]),Object(n.useEffect)((function(){var e=document.getElementById("footer_kitty"),t=e.getElementById("tongue"),a=e.getElementsByTagName("ellipse"),n=function(e){"show"===e?t.style.animation="showTongue 1s ease-out forwards":"hide"===e&&(t.style.animation="hideTongue 1s ease-out forwards")},r=function(e){if("close"===e)for(var t=0;t<a.length;t++)a[t].style.animation="closeEyes 0.5s ease-out forwards";else if("open"===e)for(var n=0;n<a.length;n++)a[n].style.animation="openEyes 0.5s ease-out forwards"};if(c)n("show"),r("close"),d(!0),setTimeout((function(){p&&d(!1)}),1e3);else{t.style.animation="none";for(var o=0;o<a.length;o++)a[o].style.animation="none",a[o].style.animation="none";p&&d(!1)}var i=function(){u||(c?(n("hide"),r("open"),d(!0),setTimeout((function(){p&&(d(!1),s(!1))}),1e3)):c||(n("show"),r("close"),d(!0),setTimeout((function(){p&&(d(!1),s(!0))}),1e3)))};return e.onmouseenter=function(){i()},e.onclick=function(){i()},function(){p=!1}}),[c]),Object(n.useEffect)((function(){return function(){p=!1}}),[]),r.a.createElement("div",{className:"footer",ref:t},r.a.createElement(U,null))};a(68);var q=function(){var e=Object(n.useContext)(j).state;return r.a.createElement(r.a.Fragment,null,e.showLoginPrompt&&r.a.createElement("input",{type:"image",src:"/img/login_prompt/sliding_kitty.svg",alt:"cat prompting to login",id:"sliding_kitty",className:"image_ask_to_login",onClick:function(){window.location.href="/login"}}))};var G=function(e){var t=Object(n.useRef)(!1),a=Object(n.useContext)(j).state;return window.addEventListener("scroll",function(e,a){return function(){t.current||(e(),t.current=!0,setTimeout((function(){t.current=!1}),a))}}((function(){var e=window.scrollY,t=document.getElementById("up_arrow");e>600?t.style.display="block":e<600&&(t.style.display="none")}),1e3)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement(F,null),e.children),r.a.createElement("input",{alt:"arrow pointing up",type:"image",src:"/img/up-arrow.svg",tabIndex:"0",className:"up_arrow",id:"up_arrow",style:{display:"none"},onClick:function(){return window.scrollTo(0,0)}}),!a.loggedIn&&r.a.createElement(q,null),r.a.createElement(B,null))};_((function(e){var t=e.setIsLoading,a=Object(n.useState)(),o=Object(m.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(void 0),l=Object(m.a)(i,2),p=l[0],f=l[1],_=Object(n.useState)(!1),h=Object(m.a)(_,2),y=h[0],v=h[1],O=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Exists(b.Match(b.Index("emails_to_invite"),b.Casefold(c))));case 3:return n=e.sent,e.next=6,g.query(b.Exists(b.Match(b.Index("users_by_email"),b.Casefold(c))));case 6:r=e.sent,n||r?(f("Email already in use"),t(!1)):(f(void 0),v(!0),t(!0)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a(e.t0),f("Something went wrong, please try again later");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}());case 4:if(!0!==(a=e.sent)){e.next=10;break}return e.next=8,g.query(b.Create(b.Collection("emails_to_invite"),{data:{email:c}}));case 8:e.next=11;break;case 10:!1===a&&f("Email already in use");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:t(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t(!1)}),[]),Object(n.useEffect)((function(){document.body.style.overflowX="hidden"}),[]),r.a.createElement(G,null,y?r.a.createElement("p",{id:E.a.confirmation_message},"Invitation will be sent to this email address"):r.a.createElement("form",{id:E.a.form,method:"POST",onSubmit:function(e){e.preventDefault(),O()}},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{name:"email",id:"email",onChange:function(e){s(e.target.value)}}),r.a.createElement("button",null,"Send invitation"),p&&r.a.createElement("p",null,p)))}),"loading");var W=a(74),V=new(a.n(W).a)({APIUrl:"https://petshow.netlify.app/.netlify/identity",audience:"",setCookie:!1}),z=a(29),H=a.n(z),X=function(e){var t=e.split(" "),a=[];return t.forEach((function(e){""!==e&&a.push(e)})),a.join(" ")};_((function(e){var t=e.setIsLoading,a=Object(n.useContext)(j).dispatch,o=Object(n.useState)(),c=Object(m.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)(),p=Object(m.a)(l,2),f=p[0],_=p[1],h=Object(n.useState)(),E=Object(m.a)(h,2),y=E[0],v=E[1],O=Object(n.useState)(),w=Object(m.a)(O,2),x=w[0],k=w[1],S=Object(n.useState)(),I=Object(m.a)(S,2),T=I[0],P=I[1],C=Object(n.useState)(),N=Object(m.a)(C,2),L=N[0],R=N[1],M=decodeURIComponent(window.location.hash).substring(1).split("invite_token=")[1];Object(n.useEffect)((function(){t(!1)}),[]);var A=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Exists(b.Match(b.Index("users_by_handle"),b.Casefold(s))));case 3:!0===e.sent?(k(!1),t(!1)):(k(!0),t(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}());case 4:e.sent&&(f===y?(P(!0),1):(P(!1),0))&&(V.acceptInvite(M,f,!0).then((function(e){return t=e.email,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Create(b.Collection("users"),{data:{handle:b.LowerCase(X(s)),email:b.LowerCase(t),imageUrl:"https://firebasestorage.googleapis.com/v0/b/".concat("watch-forum.appspot.com","/o/dandelion.jpg?alt=media")}}));case 3:r=e.sent,a(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}());var t})).then((function(e){console.log(e)})).catch((function(e){console.log(e),R(!0)})),a({type:"LOG_IN"})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),R(!0);case 12:t(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){for(var e=document.getElementsByTagName("input"),t=document.getElementsByTagName("label"),a=function(a){e[a].onfocus=function(){for(var n=e[a].getAttribute("name"),r=0;r<t.length;r++)n===t[r].htmlFor&&(t[r].style.color="rgba(48, 136, 135, 1.00)")},e[a].onblur=function(){for(var n=e[a].getAttribute("name"),r=0;r<t.length;r++)n===t[r].htmlFor&&(t[r].style.color="black")}},n=0;n<e.length;n++)a(n)}),[]),Object(n.useEffect)((function(){var e=document.getElementsByName("handle")[0],t=document.getElementById("handle_label");x||void 0===x?(e.style.border="1px solid black",t.style.color="black"):x||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.color="rgba(211, 56, 49, 1)")}),[x]),Object(n.useEffect)((function(){document.body.style.overflowX="hidden"}),[]),Object(n.useEffect)((function(){var e=document.getElementsByName("password")[0],t=document.getElementsByName("confirmPassword")[0],a=document.getElementById("password_label"),n=document.getElementById("confirm_password_label");T||void 0===T?(e.style.border="1px solid black",t.style.border="1px solid black",a.style.color="black",n.style.color="black"):T||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.border="1px solid rgba(211, 56, 49, 1)",a.style.color="rgba(211, 56, 49, 1)",n.style.color="rgba(211, 56, 49, 1)")}),[T]),Object(n.useEffect)((function(){document.getElementsByTagName("body")[0].removeAttribute("id"),document.getElementById("root").removeAttribute("class")}),[]),r.a.createElement(G,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),A(e)},method:"post",id:H.a.form},r.a.createElement("label",{htmlFor:"handle",id:"handle_label"},"Username:"),r.a.createElement("input",{type:"text",name:"handle",id:"handle",onChange:function(e){k(void 0),R(!1),i(e.target.value)},required:!0}),!x&&r.a.createElement("p",null,"This handle is already in use"),r.a.createElement("label",{htmlFor:"password",id:"password_label"},"Password:"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){_(e.target.value),R(!1),P(!0)},required:"required"}),r.a.createElement("label",{htmlFor:"confirmPassword",id:"confirm_password_label"},"Confirm password:"),r.a.createElement("input",{type:"password",name:"confirmPassword",id:"confirmPassword",onChange:function(e){v(e.target.value),R(!1),P(!0)},required:"required"}),!1===T?r.a.createElement("p",null,"Passwords don't match"):null,L&&r.a.createElement("p",null,"Error occured, please try again later"),r.a.createElement("button",{type:"submit"},"Signup")))}),"Signing up...");var K=function(e){return function(t){var a=Object(n.useState)(!1),o=Object(m.a)(a,2),c=o[0],s=o[1];return setTimeout((function(){var e=document.getElementsByClassName("with_error")[0];c&&e&&(e.style.animationName="slideup",setTimeout((function(){s(!1)}),500))}),3e3),r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("div",{className:"with_error"},r.a.createElement("p",null,"Error occured, please try again later"),r.a.createElement("button",{onClick:function(){s(!1)}},"x")),r.a.createElement(e,Object.assign({},t,{setIsError:s})))}},J=a(21),Z=a.n(J),Y=(a(71),{apiKey:"AIzaSyCz5dNIi1LHfaxhb-g_FIS3wQ7Vla0ZBTs",authDomain:"watch-forum.firebaseapp.com",databaseURL:"https://watch-forum.firebaseio.com",projectId:"watch-forum",storageBucket:"watch-forum.appspot.com",messagingSenderId:"27125407602",appId:"1:27125407602:web:c74f43b62254ef6f7a47eb",measurementId:"G-Y4G43N9LZ1"}),Q=a(37),$=a.n(Q),ee=a(9),te=a.n(ee);var ae=_(K((function(e){var t,a=e.setIsLoading,o=e.setIsError,c=Object(n.useContext)(j),s=c.state,i=c.dispatch,l=Object(n.useState)(),p=Object(m.a)(l,2),f=p[0],_=p[1],h=Object(n.useState)(void 0),E=Object(m.a)(h,2),y=E[0],v=E[1],O=function(){var e=Object(d.a)(u.a.mark((function e(){var n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,Z.a.apps.length||Z.a.initializeApp(Y),n=f.name.split(".").pop(),r="".concat($()(),".").concat(n),c=Z.a.storage().ref(),s=c.child(r),e.next=9,s.put(f);case 9:return e.next=11,w(r);case 11:return e.next=13,I(r);case 13:return e.next=15,k(r);case 15:i({type:"CHANGE_AVATAR",payload:{imageUrl:t}}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),o(!0);case 22:a(!1);case 23:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),w=function(e){return t="https://firebasestorage.googleapis.com/v0/b/".concat("watch-forum.appspot.com","/o/").concat(e,"?alt=media"),new Promise(function(){var e=Object(d.a)(u.a.mark((function e(a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Update(s.user.userDbRef,{data:{imageUrl:t}}));case 3:a("Successfully updated image URL"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}())},x=function(e,t){var a=[];return e.data.forEach((function(e){var n=new Promise(function(){var a=Object(d.a)(u.a.mark((function a(n,r){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:g.query(b.Update(e,{data:{userImageUrl:"https://firebasestorage.googleapis.com/v0/b/".concat("watch-forum.appspot.com","/o/").concat(t,"?alt=media")}})),n("success");case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}());a.push(n)})),a},k=function(e){return new Promise(function(){var t=Object(d.a)(u.a.mark((function t(a,n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.query(b.Paginate(b.Reverse(b.Match(b.Index("comments_by_user"),s.user.handle)),{size:1e3}));case 3:return r=t.sent,t.next=6,Promise.all(x(r,e));case 6:a("Successfully updated image URL in comments"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}())},S=function(e,t){var a=[];return e.data.forEach((function(e){var n=new Promise(function(){var a=Object(d.a)(u.a.mark((function a(n,r){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:g.query(b.Update(e,{data:{userImageUrl:"https://firebasestorage.googleapis.com/v0/b/".concat("watch-forum.appspot.com","/o/").concat(t,"?alt=media")}})),n("success");case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}());a.push(n)})),a},I=function(e){return new Promise(function(){var t=Object(d.a)(u.a.mark((function t(a,n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.query(b.Paginate(b.Reverse(b.Match(b.Index("posts_by_user"),s.user.handle)),{size:1e3}));case 3:return r=t.sent,t.next=6,Promise.all(S(r,e));case 6:a("Successfully updated image URL"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}())};return Object(n.useEffect)((function(){a(!1)}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{id:te.a.upload_image_form,encType:"multipart/form-data",onSubmit:function(e){if(e.preventDefault(),y)O(),_(void 0),v(void 0);else{var t=document.getElementsByClassName("choose_image")[0];t.style.color="red",setTimeout((function(){t.style.color="grey"}),3e3)}}},r.a.createElement("label",{htmlFor:"avatar",className:"custom_file_upload",tabIndex:"0",onKeyDown:function(e){"Enter"===e.key&&document.getElementById("avatar").click()}},"New image:",r.a.createElement("br",null),""!==y&&void 0!==y&&null!==y?r.a.createElement("span",{className:"choose_image"}," ",y):r.a.createElement("span",{id:te.a.choose_image,className:"choose_image"},"choose an image")),r.a.createElement("input",{type:"file",id:"avatar",name:"avatar",accept:"image/png, image/jpeg",onChange:function(e){v(e.target.files[0].name),_(e.target.files[0]),document.getElementsByClassName("choose_image")[0].style.color="grey",o(!1)}}),r.a.createElement("button",{id:te.a.change_image_button,type:"submit"},"Change image")))})),"wait");var ne=K((function(e){var t=e.setIsAddInfoOpen,a=e.setIsError,o=Object(n.useContext)(j),c=o.state,s=o.dispatch,i=Object(n.useState)(c.user.location),l=Object(m.a)(i,2),p=l[0],f=l[1],b=Object(n.useState)(c.user.hobbies),g=Object(m.a)(b,2),_=g[0],h=g[1],E=Object(n.useState)(c.user.occupation),y=Object(m.a)(E,2),v=y[0],O=y[1],w=!0,x=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/addInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:p,hobbies:_,occupation:v,userHandle:c.user.handle})});case 3:e.sent.status>=400?a(!0):w&&(s({type:"ADD_INFO",payload:{location:p,hobbies:_,occupation:v}}),t(!1)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/removeInfoField",{method:"GET",headers:{"Content-Type":"application/json","Info-To-Remove":t,"User-Handle":c.user.handle}});case 3:e.sent.status>=400?a(!0):("location"===t?f(void 0):"hobbies"===t?h(void 0):"occupation"===t&&O(void 0),w&&s({type:"REMOVE_INFO",payload:t})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){document.getElementById(e).setAttribute("placeholder","")};return Object(n.useEffect)((function(){return function(){return w=!1}}),[]),r.a.createElement("form",{className:te.a.form,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),x())}},r.a.createElement("label",{htmlFor:"location"},"Location: "),r.a.createElement("div",{className:te.a.input},r.a.createElement("input",{id:"location",name:"location",type:"text",placeholder:p,onChange:function(e){f(e.target.value),a(!1)}}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),k("location"),S("location")}},"x")),r.a.createElement("label",{htmlFor:"hobbies"},"Hobbies: "),r.a.createElement("div",{className:te.a.input},r.a.createElement("input",{id:"hobbies",name:"hobbies",type:"text",placeholder:_,onChange:function(e){h(e.target.value),a(!1)}}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),k("hobbies"),S("hobbies")}},"x")),r.a.createElement("label",{htmlFor:"occupation"},"Occupation: "),r.a.createElement("div",{className:te.a.input},r.a.createElement("input",{id:"occupation",name:"occupation",type:"text",placeholder:v,onChange:function(e){O(e.target.value),a(!1)}}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),k("occupation"),S("occupation")}},"x")),r.a.createElement("span",{className:te.a.buttons_container},r.a.createElement("button",{type:"submit"},"submit"),r.a.createElement("button",{onClick:function(){return t(!1)}},"close")))}));var re=function(){var e=Object(n.useContext)(j).dispatch,t=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{V.currentUser().logout(),e({type:"LOGOUT"})}catch(a){console.log(a)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("button",{id:te.a.logout_button,onClick:function(){t()}},"logout")};var oe=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch,o=Object(n.useState)(!1),c=Object(m.a)(o,2),i=c[0],l=c[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),_=f[0],h=f[1],E=t.path,y=window.location.pathname.split("/").pop().split("%20").join(" "),v=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Get(b.Match(b.Index("users_by_email"),b.Casefold(t))));case 3:n=e.sent,a({type:"SET_USER",payload:{data:n.data,ref:n.ref}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("likes_by_user"),b.Casefold(t.user.handle))),{size:1e3}),b.Lambda("X",b.Get(b.Var("X")))));case 3:n=e.sent,a({type:"SET_LIKES",payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Get(b.Match(b.Index("users_by_handle"),b.Casefold(y))));case 3:t=e.sent,a({type:"SET_OTHER_USER",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){null!==t.user.handle&&void 0!==t.user.handle&&O()}),[t.user.handle,window.location.pathname]),Object(n.useEffect)((function(){if("user"===E)w();else if(null!==V.currentUser()&&void 0!==V.currentUser()){var e=V.currentUser().email;v(e)}}),[E]),Object(n.useEffect)((function(){if(x()){var e=document.getElementById("open_card_button");window.innerWidth>800?h(!0):window.innerWidth<=800&&t.loggedIn&&"user"!==E?(h(!1),e.style.display="block"):window.innerWidth<=800&&!t.loggedIn&&"user"!==E?(e.style.display="none",h(!0)):"user"===E&&h(!0)}}),[t.loggedIn,E]),Object(n.useEffect)((function(){if(x()){var e=document.getElementById("user_card");_?e.style.display="flex":_||(e.style.display="none")}}),[_]);var x=function(){var e=t.path;return!!(t.loggedIn&&"home"===e||"search"===e||"profile"===e||"post"===window.location.pathname.substring(1,5))||"user"===e&&void 0!==t.otherUser&&Object.keys(t.otherUser).length>0};return r.a.createElement(r.a.Fragment,null,x()&&r.a.createElement("div",{className:te.a.container},r.a.createElement("button",{className:te.a.open_card_button,id:"open_card_button",onClick:function(){h(!_)}},"user"===E?t.otherUser.handle:t.user.handle),r.a.createElement("div",{className:te.a.user,id:"user_card"},i&&r.a.createElement(ne,{setIsAddInfoOpen:l}),"user"!==E&&t.loggedIn&&!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:t.user.imageUrl,alt:"profile image"}),r.a.createElement("p",null,t.user.handle),r.a.createElement("p",null,t.user.email),t.user.location&&r.a.createElement("p",null,r.a.createElement("strong",null,"Location:")," ",t.user.location),t.user.hobbies&&r.a.createElement("p",null,r.a.createElement("strong",null,"Hobbies:")," ",t.user.hobbies),t.user.occupation&&r.a.createElement("p",null,r.a.createElement("strong",null,"Occupation:")," ",t.user.occupation),r.a.createElement("button",{onClick:function(){l(!0)}},"Change info"),r.a.createElement(ae,null),r.a.createElement(re,null)),!t.loggedIn&&"user"!==E&&r.a.createElement("div",{id:te.a.login_signup_buttons_container},r.a.createElement(s.b,{to:"/login"},"Login"),r.a.createElement(s.b,{to:"/signup"},"Signup")),"user"===E&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:t.otherUser.imageUrl,alt:"user",height:"300",width:"240"}),r.a.createElement("p",null,t.otherUser.handle),t.otherUser.location&&r.a.createElement("p",null,r.a.createElement("strong",null,"Location:")," ",t.otherUser.location),t.otherUser.hobbies&&r.a.createElement("p",null,r.a.createElement("strong",null,"Hobbies:")," ",t.otherUser.hobbies),t.otherUser.occupation&&r.a.createElement("p",null,r.a.createElement("strong",null,"Occupation:")," ",t.otherUser.occupation)))))},ce=a(14),se=a.n(ce),ie=a(25),le=a.n(ie),ue=a(24),de=a.n(ue),me=a(38),pe=a.n(me);var fe=function(e){var t=e.likeCount,a=Object(n.useContext)(j),o=a.state,c=a.dispatch,s=function(){var e=document.getElementsByClassName("image_ask_to_login")[0];e&&(e.style.animation="slideright 2s forwards",setTimeout((function(){c({type:"SET_SHOW_LOGIN_PROMPT",payload:!1}),c({type:"SET_WAIT_TO_SHOW_LOGIN_PROMPT",payload:!1})}),1e3))};Object(n.useEffect)((function(){var e;if(o.showLoginPrompt)return e=setTimeout((function(){s()}),4e3),function(){clearTimeout(e),c({type:"SET_WAIT_TO_SHOW_LOGIN_PROMPT",payload:!1})}}),[o.showLoginPrompt]);var i=function(){o.showLoginPrompt||o.waitToShowLoginPrompt?o.showLoginPrompt&&o.waitToShowLoginPrompt&&s():(c({type:"SET_SHOW_LOGIN_PROMPT",payload:!0}),c({type:"SET_WAIT_TO_SHOW_LOGIN_PROMPT",payload:!0}))};return Object(n.useEffect)((function(){return function(){c({type:"SET_SHOW_LOGIN_PROMPT",payload:!1})}}),[]),r.a.createElement(r.a.Fragment,null,t<=0?r.a.createElement("input",{className:"heart",type:"image",src:"/img/post_info/transparent-heart.svg",onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.loggedIn||i();case 1:case"end":return e.stop()}}),e)})))}):r.a.createElement("input",{type:"image",className:"heart",src:"/img/post_info/blue-heart.svg",onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.loggedIn||i();case 1:case"end":return e.stop()}}),e)})))}),t>0&&r.a.createElement("p",null,t))};de.a.extend(pe.a);var be=function(e){var t=e.post,a=Object(n.useContext)(j),o=a.state,c=a.dispatch,i=Object(n.useRef)(!0),l=Object(n.useState)(!1),p=Object(m.a)(l,2),f=p[0],b=p[1],g=Object(n.useState)(!0),_=Object(m.a)(g,2),h=_[0],E=_[1],y=Object(n.useState)(!0),v=Object(m.a)(y,2),O=v[0],w=v[1],x=Object(n.useState)(),k=Object(m.a)(x,2),S=k[0],I=k[1],T=Object(n.useState)(),P=Object(m.a)(T,2),C=P[0],N=P[1];Object(n.useEffect)((function(){var e=de()(t.data.createdAt).fromNow();N(e)}),[t]),Object(n.useEffect)((function(){b(!1),o.user.likes&&0!==o.user.likes.length&&o.user.likes.forEach((function(e){e.data.postId===t.data.postId&&b(!0)}))}),[o.user.likes,o.posts,window.location.pathname,t.data.postId]),Object(n.useEffect)((function(){return function(){i.current=!1}}),[]);var L=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.current=!0,!h||o.pendingPostLike===t.data.postId){e.next=14;break}if(w(!1),e.prev=3,f){e.next=9;break}return b(!0),e.next=8,c({type:"SET_PENDING_POST_LIKE",payload:t.data.postId}),new Promise(function(){var e=Object(d.a)(u.a.mark((function e(a,n){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userHandle:o.user.handle,postId:t.data.postId,recepient:t.data.userHandle})});case 3:r=e.sent,s=t.data.likeCount+1,c({type:"LIKE_POST",payload:{like:{data:{postId:t.data.postId,userHandle:t.data.userHandle}},postId:t.data.postId}}),c({type:"CHANGE_LIKE_COUNT",payload:{newLikeCount:s,postId:t.data.postId}}),i.current&&(r.status<400?a("success"):r.status>=400&&n("Already liked")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}());case 8:i.current&&w(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),i.current&&w(!0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.current=!0,!f||!O||o.pendingPostUnlike===t.data.postId){e.next=13;break}return E(!1),e.prev=3,b(!1),e.next=7,1===t.data.likeCount&&I(!0),c({type:"SET_PENDING_POST_UNLIKE",payload:t.data.postId}),new Promise(function(){var e=Object(d.a)(u.a.mark((function e(a,n){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/unlike",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userHandle:o.user.handle,postId:t.data.postId,likeCount:t.data.likeCount-1,recepient:t.data.userHandle})});case 3:r=e.sent,s=t.data.likeCount-1,c({type:"UNLIKE_POST",payload:{postId:t.data.postId}}),c({type:"CHANGE_LIKE_COUNT",payload:{newLikeCount:s,postId:t.data.postId}}),i.current&&(r.status<400?a("success"):r.status>=400&&n("Post isn't liked")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}());case 7:i.current&&E(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),i.current&&E(!0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:le.a.post_info},r.a.createElement(s.b,{to:"/user/".concat(t.data.userHandle)},r.a.createElement("img",{src:t.data.userImageUrl,className:le.a.user_image,alt:"user"}),r.a.createElement("p",null,t.data.userHandle)),r.a.createElement("p",{lang:"en"},C),r.a.createElement("p",null,t.data.commentCount," comments"),r.a.createElement("div",{className:le.a.likes},o.loggedIn?r.a.createElement(r.a.Fragment,null,f?r.a.createElement("input",{type:"image",src:"/img/post_info/red-heart.svg",tabIndex:"0",id:le.a.red_heart,onClick:R}):r.a.createElement("input",{type:"image",src:"/img/post_info/".concat(0===t.data.likeCount||S?"transparent-heart":"blue-heart",".svg"),tabIndex:"0",id:le.a.blue_heart,onClick:L}),t.data.likeCount>0&&r.a.createElement("p",null,t.data.likeCount)):r.a.createElement(fe,{likeCount:t.data.likeCount})))};var ge=function(e){var t=e.post,a=Object(n.useState)(),o=Object(m.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){if(t.data.body.length>49){var e=t.data.body.substring(0,50);i("".concat(e,"..."))}else i(t.data.body)}),[t]),r.a.createElement("div",{className:se.a.post},r.a.createElement("div",{className:se.a.post_main_body},t.data.imageUrl&&r.a.createElement(s.b,{to:"/post/".concat(t.data.postId),className:se.a.image_link},r.a.createElement("div",{className:se.a.image_container},r.a.createElement("img",{alt:"post image",src:t.data.imageUrl,className:se.a.post_image,loading:"lazy",width:"200",height:"200"}))),r.a.createElement(s.b,{to:"/post/".concat(t.data.postId)},r.a.createElement("p",null,c))),r.a.createElement(be,{post:t}))};var _e=function(e){var t=e.setLoading,a=Object(n.useContext)(j),o=a.state,c=a.dispatch,s=new URLSearchParams(window.location.search).get("query"),i=function(){var e=Object(d.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(!0),"search"!==(a=o.path)){e.next=8;break}return e.next=5,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("posts_by_words7"),b.Casefold(s))),{size:o.size,after:o.posts.after}),b.Lambda("X",b.Get(b.Var("X")))));case 5:n=e.sent,e.next=17;break;case 8:if("profile"!==a){e.next=14;break}return e.next=11,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("posts_by_user"),o.user.handle)),{size:o.size,after:o.posts.after}),b.Lambda("X",b.Get(b.Var("X")))));case 11:n=e.sent,e.next=17;break;case 14:return e.next=16,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("all_posts"))),{size:o.size,after:o.posts.after}),b.Lambda("X",b.Get(b.Var("X")))));case 16:n=e.sent;case 17:c({type:"ADD_POSTS",payload:n}),t(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("button",{id:"load_more_button",className:se.a.load_more_button,onClick:i},"Load more")};var he=function(){var e=Object(n.useContext)(j).state,t=Object(n.useState)(!1),a=Object(m.a)(t,2),o=a[0],c=a[1];return r.a.createElement("div",{className:se.a.posts},e.posts&&e.posts.data&&e.posts.data.map((function(e,t){return r.a.createElement(ge,{key:t,post:e})})),e.posts&&e.posts.after&&r.a.createElement("div",{className:se.a.load_more},o?r.a.createElement("p",{className:se.a.loading_message},"Loading..."):r.a.createElement(_e,{setLoading:c})))},Ee=a(10),ye=a.n(Ee);var ve=_((function(e){var t=e.setIsLoading,a=Object(n.useContext)(j).state,o=Object(n.useState)(""),c=Object(m.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)(),p=Object(m.a)(l,2),f=p[0],b=p[1],g=Object(n.useState)(),_=Object(m.a)(g,2),h=_[0],E=_[1],y=Object(n.useState)(),v=Object(m.a)(y,2),O=v[0],w=v[1],x=Object(n.useState)(void 0),k=Object(m.a)(x,2),S=k[0],I=k[1],T=Object(n.useRef)(null);Object(n.useEffect)((function(){t(!1)}),[]),Object(n.useEffect)((function(){if(f){var e=f.name.split(".").pop(),t="".concat($()(),".").concat(e);E(t)}return function(){(new AbortController).abort()}}),[f]);var P=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(!0),!f){e.next=4;break}return e.next=4,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z.a.initializeApp(Y),n=Z.a.storage().ref(),r=n.child(h),e.next=6,r.put(f);case 6:t("success"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),I("Something went wrong, please try again later"),a(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}());case 4:return e.prev=4,e.next=7,fetch("/api/addPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userHandle:a.user.handle,userImageUrl:a.user.imageUrl,body:s.trim(),imageUrl:null!==f&&void 0!==f?"https://firebasestorage.googleapis.com/v0/b/".concat("watch-forum.appspot.com","/o/").concat(h,"?alt=media"):void 0})});case 7:e.sent.status>=400?I("Something went wrong, try again later"):window.location.reload(),t(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),I("Something went wrong, try again later"),t(!1);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){e.preventDefault(),s.trim().length>0?P(e):I("Must not be empty")};return Object(n.useEffect)((function(){var e=document.getElementsByClassName("error_message")[0];S&&e&&(setTimeout((function(){e.style.animationDuration="0.6s",e.style.animationName="".concat(ye.a.slideuperror),document.getElementById("post_body").style.border="2px solid black",setTimeout((function(){I(void 0)}),500)}),2e3),document.getElementById("post_body").style.border="2px solid red")}),[S]),r.a.createElement("form",{id:ye.a.new_post,encType:"multipart/form-data",ref:T,onSubmit:C,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),C(e))}},r.a.createElement("textarea",{name:"body",rows:"5",id:"post_body",required:!0,minLength:"3",placeholder:"type something here...",onChange:function(e){i(e.target.value),I(void 0)}}),S&&r.a.createElement("p",{className:"error_message"},S),r.a.createElement("div",{className:ye.a.new_post_buttons_container},r.a.createElement("div",{className:ye.a.choose_image_container},r.a.createElement("label",{htmlFor:"image",className:"custom_file_upload",tabIndex:"0",onKeyDown:function(e){"Enter"===e.key&&document.getElementById("image").click()}},"Image:",r.a.createElement("span",null,O?" ".concat(O):" choose an image")),r.a.createElement("button",{onClick:function(e){e.preventDefault(),w(void 0),E(void 0),b(void 0),I(void 0),document.getElementById("post_body").style.border="1px solid black"}},"remove")),r.a.createElement("input",{id:"image",type:"file",name:"image",accept:"image/png, image/jpeg",onChange:function(e){void 0!==e.target.files[0]&&(w(e.target.files[0].name),b(e.target.files[0]),I(void 0),document.getElementById("post_body").style.border="1px solid black")}}),r.a.createElement("button",{type:"submit"},"Submit")))}),"wait..");var Oe=_(K((function(e){var t=e.setIsLoading,a=e.setIsError,o=Object(n.useContext)(j),c=o.state,i=o.dispatch,l=Object(n.useState)(),p=Object(m.a)(l,2),f=p[0],_=p[1],h=Object(n.useState)(void 0),E=Object(m.a)(h,2),y=E[0],v=E[1],O=window.location.pathname.split("/").pop().split("%20").join(" "),w=new URLSearchParams(window.location.search).get("query"),x={confirmationToken:decodeURIComponent(window.location.hash).substring(1).split("confirmation_token=")[1],inviteToken:decodeURIComponent(window.location.hash).substring(1).split("invite_token=")[1],recoveryToken:decodeURIComponent(window.location.hash).substring(1).split("recovery_token=")[1]},k=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"home"!==f){e.next=7;break}return e.next=4,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("all_posts"))),{size:5}),b.Lambda("X",b.Get(b.Var("X")))));case 4:n=e.sent,e.next=26;break;case 7:if("search"!==f){e.next=14;break}return window.scrollTo(0,0),e.next=11,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("posts_by_words7"),b.Casefold(w))),{size:5}),b.Lambda("ref",b.Get(b.Var("ref")))));case 11:n=e.sent,e.next=26;break;case 14:if("user"!==f){e.next=21;break}return window.scrollTo(0,0),e.next=18,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("posts_by_user"),O)),{size:5}),b.Lambda("X",b.Get(b.Var("X")))));case 18:n=e.sent,e.next=26;break;case 21:if("profile"!==f||!c.user.handle){e.next=26;break}return window.scrollTo(0,0),e.next=25,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("posts_by_user"),c.user.handle)),{size:5}),b.Lambda("X",b.Get(b.Var("X")))));case 25:n=e.sent;case 26:i({type:"SET_POSTS",payload:n}),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0),a(!0);case 33:t(!1);case 34:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){var e=window.location.pathname;x.confirmationToken?_("confirm"):x.inviteToken?_("invite"):x.recoveryToken?_("recovery"):"/search"===e?_("search"):"/"===e?_("home"):"/profile"===e?_("profile"):"/user"===e.slice(0,5)&&_("user")}()}),[window.location.pathname]),Object(n.useEffect)((function(){f&&i({type:"SET_PATH",payload:f})}),[f]),Object(n.useEffect)((function(){"confirm"===f?(V.confirm(x.confirmationToken,!0).then((function(e){window.localStorage.setItem("gotrue.user",JSON.stringify(e)),window.location.replace("/")})).catch((function(e){console.log(e),"User not found"===e.message?v("User not found or email already confirmed"):v("This link is no longer valid"),a(!0)})),t(!1)):"invite"===f?window.location.replace("/signup/#invite_token=".concat(x.inviteToken)):"recovery"===f&&window.location.replace("/resetpassword/#recovery_token=".concat(x.recoveryToken))}),[f]),Object(n.useEffect)((function(){t(!0),f&&"post"!==c.path&&c.posts&&(0===Object.keys(c.posts).length||c.path!==f)?k():t(!1)}),[f,c.path,c.user.handle]),r.a.createElement(G,null,r.a.createElement("div",{id:ye.a.container},r.a.createElement("div",{id:ye.a.posts_container},"confirm"===f&&void 0!==y&&(y?r.a.createElement("p",{className:"error_message"},y):r.a.createElement("p",{className:ye.a.posts_header},"Email confirmed")),"home"===f&&(c.loggedIn?r.a.createElement(ve,null):r.a.createElement("p",{className:ye.a.posts_header},r.a.createElement(s.b,{to:"/login"},r.a.createElement("strong",null,"login ")),"or",r.a.createElement(s.b,{to:"/signup"},r.a.createElement("strong",null," signup ")),"to create a post")),"search"===f&&Object.keys(c.posts).length>0&&(c.posts.data&&0===c.posts.data.length?r.a.createElement("p",{className:ye.a.posts_header},"Nothing was found"):r.a.createElement("p",{className:ye.a.posts_header},"Search results for: ",w)),"profile"===f&&c.loggedIn&&c.posts.data&&r.a.createElement(r.a.Fragment,null,c.posts.data.length>0?r.a.createElement("h2",{className:ye.a.posts_header},"My posts"):r.a.createElement("h2",{className:ye.a.posts_header},"You haven't posted yet")),"user"===f&&(void 0!==c.otherUser?r.a.createElement("h2",{className:ye.a.posts_header},c.posts.data&&0===c.posts.data.length?"".concat(O," hasn't posted yet"):"Posts by ".concat(O)):r.a.createElement("h2",{className:ye.a.posts_header},"This user doesn't exist")),r.a.createElement(he,{size:5})),(c.loggedIn||"user"===f)&&r.a.createElement(oe,null)))})));var je=_((function(e){var t=e.setIsLoading,a=Object(n.useState)(),o=Object(m.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(),l=Object(m.a)(i,2),p=l[0],f=l[1],b=Object(n.useState)(),g=Object(m.a)(b,2),_=g[0],h=g[1],E=Object(n.useState)(),y=Object(m.a)(E,2),v=y[0],O=y[1],j=Object(n.useState)(),w=Object(m.a)(j,2),x=w[0],k=w[1],S=Object(n.useState)(),I=Object(m.a)(S,2),T=I[0],P=I[1],C=Object(n.useState)(),N=Object(m.a)(C,2),L=N[0],R=N[1],M=Object(n.useState)(!1),A=Object(m.a)(M,2),D=A[0],F=A[1],U=Object(n.useState)(),B=Object(m.a)(U,2),q=B[0],W=B[1],z=function(){var e=Object(d.a)(u.a.mark((function e(){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,fetch("/api/addUserToDb",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({handle:X(p),email:c})});case 4:if(a=e.sent,n=_===v?(R(!0),!0):(R(!1),!1),R(n),!n){e.next=23;break}return e.next=10,a.json();case 10:if("Email already in use"!==(r=e.sent)){e.next=15;break}P(!1),e.next=23;break;case 15:if("Handle already taken"!==r){e.next=19;break}k(!1),e.next=23;break;case 19:if("User is added to database"!==r){e.next=23;break}return e.next=22,V.signup(c,_);case 22:F(!0);case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),console.log(e.t0),W(!0);case 29:t(!1);case 30:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t(!1)}),[]),Object(n.useEffect)((function(){for(var e=document.getElementsByTagName("input"),t=document.getElementsByTagName("label"),a=function(a){e[a].onfocus=function(){for(var n=e[a].getAttribute("name"),r=0;r<t.length;r++)n===t[r].htmlFor&&(t[r].style.color="rgba(48, 136, 135, 1.00)")},e[a].onblur=function(){for(var n=e[a].getAttribute("name"),r=0;r<t.length;r++)n===t[r].htmlFor&&(t[r].style.color="black")}},n=0;n<e.length;n++)a(n)}),[]),Object(n.useEffect)((function(){document.body.style.overflowX="hidden"}),[]),Object(n.useEffect)((function(){var e=document.getElementsByName("handle")[0],t=document.getElementById("handle_label");x||void 0===x?(e.style.border="1px solid black",t.style.color="black"):x||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.color="rgba(211, 56, 49, 1)")}),[x]),Object(n.useEffect)((function(){var e=document.getElementsByName("email")[0],t=document.getElementById("email_label");T||void 0===T?(e.style.border="1px solid black",t.style.color="black"):T||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.color="rgba(211, 56, 49, 1)")}),[T]),Object(n.useEffect)((function(){var e=document.getElementsByName("password")[0],t=document.getElementsByName("confirmPassword")[0],a=document.getElementById("password_label"),n=document.getElementById("confirm_password_label");L||void 0===L?(e.style.border="1px solid black",t.style.border="1px solid black",a.style.color="black",n.style.color="black"):L||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.border="1px solid rgba(211, 56, 49, 1)",a.style.color="rgba(211, 56, 49, 1)",n.style.color="rgba(211, 56, 49, 1)")}),[L]),r.a.createElement(G,null,D?r.a.createElement("p",{id:H.a.confirmation_message},"Confirmation letter has been sent to your email"):r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),z()},method:"post",id:H.a.form},r.a.createElement("label",{htmlFor:"email",id:"email_label"},"Email:"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){P(void 0),W(!1),s(e.target.value)},required:"required"}),!1===T?r.a.createElement("p",null,"This email is already in use"):null,r.a.createElement("label",{htmlFor:"handle",id:"handle_label"},"Username:"),r.a.createElement("input",{type:"text",name:"handle",id:"handle",onChange:function(e){k(void 0),W(!1),f(e.target.value)},required:"required"}),!1===x?r.a.createElement("p",null,"This handle is already in use"):null,r.a.createElement("label",{htmlFor:"password",id:"password_label"},"Password:"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){h(e.target.value),W(!1),R(!0)},required:"required"}),r.a.createElement("label",{htmlFor:"confirmPassword",id:"confirm_password_label"},"Confirm password:"),r.a.createElement("input",{type:"password",name:"confirmPassword",id:"confirmPassword",onChange:function(e){O(e.target.value),W(!1),R(!0)},required:"required"}),!1===L?r.a.createElement("p",null,"Passwords don't match"):null,q&&r.a.createElement("p",null,"Error occured, please try again later"),r.a.createElement("button",{type:"submit"},"Signup")))}),"Signing up..."),we=a(17),xe=a.n(we);var ke=_((function(e){var t=e.setIsLoading,a=Object(n.useContext)(j).dispatch,o=Object(n.useState)(),c=Object(m.a)(o,2),i=c[0],l=c[1],p=Object(n.useState)(),f=Object(m.a)(p,2),b=f[0],g=f[1],_=Object(n.useState)(void 0),h=Object(m.a)(_,2),E=h[0],y=h[1],v=Object(n.useState)(void 0),O=Object(m.a)(v,2),w=O[0],x=O[1],k=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),n.preventDefault(),e.prev=2,e.next=5,V.login(i,b,!0);case 5:a({type:"LOG_IN"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),"invalid_grant: Email not confirmed"==e.t0.message?x("Email not confirmed"):"invalid_grant: No user found with that email, or password invalid."==e.t0.message?y(!1):x("Error occured, please try again later"),t(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t(!1)}),[]),Object(n.useEffect)((function(){var e=document.getElementsByName("email")[0],t=document.getElementsByName("password")[0],a=document.getElementById("email_label"),n=document.getElementById("password_label");E||void 0===E?(e.style.border="1px solid black",t.style.border="1px solid black",a.style.color="black",n.style.color="black"):E||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.border="1px solid rgba(211, 56, 49, 1)",a.style.color="rgba(211, 56, 49, 1)",n.style.color="rgba(211, 56, 49, 1)")}),[E]),Object(n.useEffect)((function(){document.body.style.overflowX="hidden"}),[]),r.a.createElement(G,null,r.a.createElement("form",{onSubmit:function(e){k(e)},method:"post",id:xe.a.form},r.a.createElement("label",{htmlFor:"email",id:"email_label"},"Email:"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){l(e.target.value),x(void 0),y(void 0)},required:"required"}),r.a.createElement("label",{htmlFor:"password",id:"password_label"},"Password:"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){g(e.target.value),x(void 0),y(void 0)},required:"required"}),void 0!==E&&!E&&r.a.createElement("p",null,"No user found with that email, or password invalid"),w&&r.a.createElement("p",null,w),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement(s.b,{to:"/restorepassword"},"Forgot password?")))}),"Logging in..."),Se=a(6),Ie=a.n(Se);var Te=_(K((function(e){var t=e.setIsLoading,a=e.setIsError,o=Object(n.useContext)(j).state,c=Object(n.useState)(),s=Object(m.a)(c,2),i=s[0],l=s[1],p=Object(n.useState)(void 0),f=Object(m.a)(p,2),b=f[0],g=f[1];Object(n.useEffect)((function(){t(!1)}),[]);var _=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,fetch("/api/addComment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:i,userHandle:o.user.handle,userImageUrl:o.user.imageUrl,postId:o.post.data.postId,recepient:o.post.data.userHandle})});case 4:404===e.sent.status?(a(!0),t(!1)):window.location.reload(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),a(!0),t(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),h=function(e){(e.preventDefault(),i.trim().length>0)?_():(document.getElementById("comment").style.border="2px solid red",g("Must not be empty"),t(!1))};return r.a.createElement("form",{className:Ie.a.new_comment_form,onSubmit:h,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),h(e))}},r.a.createElement("textarea",{name:"comment",rows:"5",required:!0,id:"comment",placeholder:"comment...",onChange:function(e){document.getElementById("comment").style.border="1px solid black",g(void 0),l(e.target.value)}}),b&&r.a.createElement("p",{className:"error_message"},b),r.a.createElement("button",{type:"submit"},"Send"))})),"Wait...");de.a.extend(pe.a);var Pe=function(e){var t=e.comment,a=Object(n.useContext)(j),o=a.state,c=a.dispatch,i=Object(n.useState)(),l=Object(m.a)(i,2),p=l[0],f=l[1],_=function(){var e=Object(d.a)(u.a.mark((function e(a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,g.query(b.Map(b.Paginate(b.Match(b.Index("notifications_by_commentid"),n)),b.Lambda("X",b.Get(b.Var("X")))));case 3:return e.sent.data.forEach((function(e){r.push(g.query(b.Delete(e.ref)))})),g.query(b.Update(o.post.ref,{data:{commentCount:o.post.data.commentCount-1}})),e.next=8,g.query(b.Map(b.Paginate(b.Match(b.Index("notifications_by_commentid"),n)),b.Lambda("X",b.Get(b.Var("X")))));case 8:return e.next=10,Promise.all(r);case 10:return e.next=12,g.query(b.Delete(a));case 12:c({type:"DELETE_COMMENT",payload:t.data.commentId});case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=new Date(t.ts/1e3),a=de()(e).fromNow();f(a)}),[]),r.a.createElement("div",{className:Ie.a.comment},r.a.createElement("p",null,t.data.body),r.a.createElement("div",{className:Ie.a.comment_info},o.user.handle===t.data.userHandle&&r.a.createElement("button",{onClick:function(){_(t.ref,t.data.commentId)}},"delete comment"),r.a.createElement(s.b,{to:"/user/".concat(t.data.userHandle)},r.a.createElement("p",null,p),r.a.createElement("div",{className:Ie.a.user_info},r.a.createElement("img",{src:t.data.userImageUrl,alt:"user"}),r.a.createElement("p",null,t.data.userHandle)))))};var Ce=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch,o=Object(n.useState)(!1),c=Object(m.a)(o,2),i=c[0],l=c[1],p=Object(n.useState)(null),f=Object(m.a)(p,2),_=f[0],h=f[1],E=new AbortController,y=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("comments_by_postId"),t.post.data.postId)),{size:10,after:O.current}),b.Lambda("X",b.Get(b.Var("X")))));case 3:n=e.sent,a({type:"ADD_COMMENTS",payload:n}),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=Object(n.useRef)(y),O=Object(n.useRef)([]),w=Object(n.useRef)(new IntersectionObserver((function(e){e[0].isIntersecting&&v.current()})));return Object(n.useEffect)((function(){var e=_,a=w.current;return e&&O.current&&O.current.length>0&&t.post&&t.post.comments&&a.observe(e),function(){e&&a.unobserve(e)}}),[_,O.current]),Object(n.useEffect)((function(){v.current=y}),[y]),Object(n.useEffect)((function(){t.post&&t.post.comments&&t.post.comments.after?O.current=t.post.comments.after:O.current=[]}),[t.post]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){return function(){E.abort()}}),[]),r.a.createElement("div",null,t.loggedIn?r.a.createElement(Te,null):r.a.createElement("p",{className:Ie.a.posts_header},r.a.createElement(s.b,{to:"/login"},r.a.createElement("strong",null,"login ")),"or",r.a.createElement(s.b,{to:"/signup"},r.a.createElement("strong",null," signup ")),"to leave a comment"),null!==t.post&&void 0!==t.post.comments&&void 0!==t.post.comments.data&&null!==t.post.comments.data&&t.post.comments.data.length>0&&t.post.comments.data.map((function(e,t){return r.a.createElement(Pe,{comment:e,key:t})})),r.a.createElement("div",{ref:h,id:"load-more",className:Ie.a.end_message},i?r.a.createElement("p",{className:Ie.a.loading_message},"Loading..."):r.a.createElement("p",{className:Ie.a.end_message},"End")))};var Ne=function(e){var t=e.url,a=e.toggleShow,o=Object(n.useRef)(null),c=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=document.getElementById("image_full_screen_overlay");e&&(e.onclick=function(){a(!1)},o.current.onclick=function(e){e.stopPropagation()},c.current.onclick=function(){a(!1)},document.onkeydown=function(e){"Escape"===e.key&&a(!1)})}),[]),Object(n.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="scroll"}}),[]),r.a.createElement("div",{id:"image_full_screen_overlay",className:Ie.a.image_full_screen_overlay},r.a.createElement("img",{src:t,id:Ie.a.full_screen_image,ref:o}),r.a.createElement("input",{type:"image",src:"/img/close-button.svg",alt:"exit full screen",id:Ie.a.close_button,ref:c}))};var Le=function(e){var t=e.setShowModal,a=e.postId,o=Object(n.useContext)(j),c=o.state,s=o.dispatch,i=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],c.post.comments.data.forEach((function(e){n.push(g.query(b.Delete(e.ref)))})),e.next=4,g.query(b.Map(b.Paginate(b.Match(b.Index("notifications_by_postid"),c.post.data.postId)),b.Lambda("X",b.Get(b.Var("X")))));case 4:return e.sent.data.forEach((function(e){n.push(g.query(b.Delete(e.ref)))})),s({type:"REMOVE_POST",payload:a}),e.next=9,Promise.all(n);case 9:return e.next=11,g.query(b.Delete(c.post.ref));case 11:t(!1),window.history.back();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:Ie.a.modal_container,id:"modal",onClick:function(){return t(!1)}},r.a.createElement("div",{className:Ie.a.modal_window,onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",null,"Are you sure you want to remove the post permanently?"),r.a.createElement("div",{className:Ie.a.button_container},r.a.createElement("button",{onClick:i},"yes"),r.a.createElement("button",{onClick:function(){t(!1)}},"no"))))};var Re=_(K((function(e){var t=Object(n.useContext)(j),a=t.state,o=t.dispatch,c=e.match.params.postId,s=e.setIsLoading,i=e.setIsError,l=Object(n.useState)(void 0),p=Object(m.a)(l,2),f=p[0],_=p[1],h=Object(n.useState)(void 0),E=Object(m.a)(h,2),y=E[0],v=E[1];return Object(n.useEffect)((function(){o({type:"SET_PATH",payload:"post"})}),[]),Object(n.useEffect)((function(){return Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Get(b.Match(b.Index("posts_by_id"),c)));case 3:n=e.sent,o({type:"SET_CURRENT_POST",payload:n}),t("success"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),"instance not found"===e.t0.message&&window.location.replace("/"),a(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}());case 3:return e.next=5,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.query(b.Map(b.Paginate(b.Reverse(b.Match(b.Index("comments_by_postId"),c)),{size:5}),b.Lambda("X",b.Get(b.Var("X")))));case 3:n=e.sent,o({type:"SET_COMMENTS",payload:n}),t("success"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}());case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),i(!0);case 11:s(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))(),function(){(new AbortController).abort()}}),[window.location.pathname]),Object(n.useEffect)((function(){var e,t=document.getElementById("post_image");t&&(t.onclick=function(){e&&clearTimeout(e),v(!0)},t.onmouseenter=function(){e&&clearTimeout(e),e=setTimeout((function(){v(!0)}),400)},t.onmouseleave=function(){clearTimeout(e)})}),[a.post]),r.a.createElement(G,null,r.a.createElement("div",{className:Ie.a.container},r.a.createElement("div",{className:Ie.a.content},null!==a.post&&r.a.createElement("div",{className:Ie.a.post},r.a.createElement("div",{className:Ie.a.post_main_body},a.post.data.imageUrl&&r.a.createElement("img",{src:a.post.data.imageUrl,width:"200",className:Ie.a.post_image,id:"post_image"}),r.a.createElement("p",null,a.post.data.body)),r.a.createElement(be,{post:a.post})),null!==a.post&&a.post.data.userHandle===a.user.handle&&r.a.createElement("button",{onClick:function(){_(!0)}},"delete post"),r.a.createElement(Ce,null)),a.loggedIn&&r.a.createElement(oe,null)),y&&a.post.data.imageUrl?r.a.createElement(Ne,{url:a.post.data.imageUrl,toggleShow:v}):null,f&&r.a.createElement(Le,{setShowModal:_,postId:c}))})),"Loading comments...");var Me=_((function(e){var t=e.setIsLoading,a=Object(n.useState)(),o=Object(m.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(),l=Object(m.a)(i,2),p=l[0],f=l[1],b=Object(n.useState)(void 0),g=Object(m.a)(b,2),_=g[0],h=g[1],E=Object(n.useState)(!1),y=Object(m.a)(E,2),v=y[0],O=y[1],j=function(){var e=Object(d.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),a.preventDefault(),e.prev=2,e.next=5,V.requestPasswordRecovery(c);case 5:t(!1),O(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),"User not found"===e.t0.message&&(f(!1),t(!1));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t(!1)}),[]),Object(n.useEffect)((function(){var e=document.getElementsByName("email")[0],t=document.getElementById("email_label");p||void 0===p?(e.style.border="1px solid black",t.style.color="black"):p||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.color="rgba(211, 56, 49, 1)")}),[p]),Object(n.useEffect)((function(){document.body.style.overflowX="hidden"}),[]),r.a.createElement(G,null,r.a.createElement("form",{onSubmit:function(e){j(e)},method:"post",id:xe.a.form},r.a.createElement("label",{htmlFor:"email",id:"email_label"},"Email:"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){s(e.target.value),h(void 0),f(void 0)},required:"required"}),p&&r.a.createElement("p",null,"No user found with that email"),_&&r.a.createElement("p",null,_),v?r.a.createElement("p",{id:xe.a.restore_password_message},"Email with a link to restore your password has been sent"):r.a.createElement("button",{type:"submit"},"Restore password")))}),"wait");var Ae=_((function(e){var t=e.setIsLoading,a=Object(n.useContext)(j).dispatch,o=Object(n.useState)(),c=Object(m.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)(),p=Object(m.a)(l,2),f=p[0],b=p[1],g=Object(n.useState)(),_=Object(m.a)(g,2),h=_[0],E=_[1],y=Object(n.useState)(void 0),v=Object(m.a)(y,2),O=v[0],w=v[1],x=Object(n.useState)(!1),k=Object(m.a)(x,2),S=k[0],I=k[1],T=Object(n.useState)(void 0),P=Object(m.a)(T,2),C=P[0],N=P[1],L=Object(n.useState)(void 0),R=Object(m.a)(L,2),M=R[0],A=R[1];Object(n.useEffect)((function(){var e=decodeURIComponent(window.location.hash).substring(1).split("recovery_token=")[1];V.recover(e).then((function(e){i(e.email)})).catch((function(e){console.log(e),A(!0)})),t(!1)}),[]),Object(n.useEffect)((function(){t(!1)}),[]),Object(n.useEffect)((function(){document.body.style.overflowX="hidden"}),[]),Object(n.useEffect)((function(){for(var e=document.getElementsByTagName("input"),t=document.getElementsByTagName("label"),a=function(a){e[a].onfocus=function(){for(var n=e[a].getAttribute("name"),r=0;r<t.length;r++)n===t[r].htmlFor&&(t[r].style.color="rgba(48, 136, 135, 1.00)")},e[a].onblur=function(){for(var n=e[a].getAttribute("name"),r=0;r<t.length;r++)n===t[r].htmlFor&&(t[r].style.color="black")}},n=0;n<e.length;n++)a(n)}),[]),Object(n.useEffect)((function(){if(void 0!==M){var e=document.getElementsByName("password")[0],t=document.getElementsByName("confirmPassword")[0],a=document.getElementById("password_label"),n=document.getElementById("confirm_password_label");O||void 0===O?(e.style.border="1px solid black",t.style.border="1px solid black",a.style.color="black",n.style.color="black"):O||(e.style.border="1px solid rgba(211, 56, 49, 1)",t.style.border="1px solid rgba(211, 56, 49, 1)",a.style.color="rgba(211, 56, 49, 1)",n.style.color="rgba(211, 56, 49, 1)")}}),[O]);var D=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(!0),!(f===h?(w(!0),!0):(w(!1),!1))){e.next=17;break}return e.prev=3,n=V.currentUser(),e.next=7,n.update({email:s,password:f});case 7:return I(!0),e.next=10,V.login(s,f,!0);case 10:setTimeout((function(){a({type:"LOG_IN"})}),2e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),N("Something went wrong, please try again later");case 17:t(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){document.body.style.overflowX="hidden"}),[]),r.a.createElement(G,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),D()},method:"post",id:xe.a.form},void 0!==M&&(M?r.a.createElement("p",null,"Password reset link is invalid"):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"email",id:"email_label"},"Email:"),r.a.createElement("input",{value:s,disabled:!0}),r.a.createElement("label",{htmlFor:"password",id:"password_label"},"Password:"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){b(e.target.value),N(void 0),w(!0)},required:"required"}),r.a.createElement("label",{htmlFor:"confirmPassword",id:"confirm_password_label"},"Confirm password:"),r.a.createElement("input",{type:"password",name:"confirmPassword",id:"confirmPassword",onChange:function(e){E(e.target.value),N(void 0),w(!0)},required:"required"}),!1===O?r.a.createElement("p",null,"Passwords don't match"):null,void 0!==C&&r.a.createElement("p",null,C),S?r.a.createElement("p",{id:xe.a.restore_password_message},"Password had been reset"):r.a.createElement("button",{type:"submit"},"Reset password")))))}));var De=function(e){var t=e.svgRef;return r.a.createElement("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",width:"113.627",height:"100.498"},r.a.createElement("defs",null,r.a.createElement("path",{d:"M-75.303-10.387h61.887v57.559h-61.887z"})),r.a.createElement("g",{transform:"rotate(-2.661 -5435.68 5428.044)"},r.a.createElement("path",{d:"M352.98 331.677c-2.717 7.613-7.742 13.938-13.266 18.571-9.902 8.305-24.628 11.733-48.385 8.75-19.646-2.469-31.204-10.526-39.616-23.337-6.429-9.79-8.62-23.664-4.33-34.867 2.437-6.365 11.381-16.985 11.381-16.985s.029-21.818 4.752-23.046c3.564-.928 17.356 8.896 17.356 8.896s9.86-4.356 21.565-2.982c7.89.925 13.792 3.534 13.792 3.534s18.774-7.37 22.52-6c1.911.699-1.72 18.382-1.72 18.382s6.1 2.817 12.5 13.221c6.582 10.699 8.077 22.902 3.451 35.863z",style:{lineHeight:"normal",fontVariantLigatures:"normal",fontVariantPosition:"normal",fontVariantCaps:"normal",fontVariantNumeric:"normal",fontVariantAlternates:"normal",fontVariantEastAsian:"normal",fontFeatureSettings:"normal",fontVariationSettings:"normal",WebkitTextIndent:"0",textIndent:"0",WebkitTextAlign:"start",textAlign:"start",WebkitTextDecorationLine:"none",textDecorationLine:"none",WebkitTextDecorationStyle:"solid",textDecorationStyle:"solid",WebkitTextDecorationColor:"#000",textDecorationColor:"#000",WebkitTextTransform:"none",textTransform:"none",WebkitTextOrientation:"mixed",textOrientation:"mixed",whiteSpace:"normal",shapePadding:"0",shapeMargin:"0",inlineSize:"0",isolation:"auto",mixBlendMode:"normal",solidColor:"#000",solidOpacity:"1"},fill:"#e4e9ec",fillRule:"evenodd",color:"#000",fontFamily:"sans-serif",fontWeight:"400",overflow:"visible",paintOrder:"fill markers stroke"}),r.a.createElement("ellipse",{cx:"301.374",cy:"272.504",fillRule:"evenodd",paintOrder:"fill markers stroke",rx:"4.218",ry:"3.741",transform:"rotate(4.126)"}),r.a.createElement("path",{fill:"#d7bf9b",fillRule:"evenodd",d:"M303.05 266.766c-2.857 6.689-5.45 14.205-4.037 20.28 5.15 22.15 24.482 36.583 45.027 31.805a35.628 35.628 0 0011.342-4.83c-.505-6.418-2.503-12.765-5.852-18.209-6.4-10.403-12.5-13.22-12.5-13.22s3.631-17.683 1.72-18.382c-3.746-1.37-22.52 6-22.52 6s-5.608-2.459-13.18-3.444z",paintOrder:"fill markers stroke"}),r.a.createElement("path",{fill:"#d387ba",stroke:"#000",strokeWidth:"3",d:"M300.595 294.42c-.22.411-.473.918-.843 1.309-.386.408-.899.655-1.444.757-.605.89-1.116 1.826-1.328 2.793a5.67 5.67 0 00.189 3.002c.297.853.77 1.468 1.47 1.782.698.314 1.622.33 2.501.076a5.274 5.274 0 002.358-1.469c.645-.693 1.104-1.557 1.378-2.361.274-.805.364-1.55.262-2.201-.09-.572-.349-1.08-.926-1.708-.59-.235-1.198-.724-1.694-1.29-.072-.082-.121-.15-.189-.233-.466-.27-.945-.474-1.382-.487a1.658 1.658 0 00-.352.03z"}),r.a.createElement("path",{d:"M295.478 293.514l-2.044 2.196c.862.802 1.814 1.806 3.297 2.21a4.157 4.157 0 004.119-1.147c.254-.27.33-.48.489-.735.026.031.031.043.059.074.756.864 1.653 1.704 3.017 1.92 1.362.215 2.542-.564 3.265-1.42.723-.855 1.18-1.832 1.624-2.727l-2.688-1.332c-.444.895-.873 1.705-1.227 2.124-.353.419-.44.402-.504.392-.062-.01-.751-.384-1.232-.933-.24-.274-.483-.626-.805-.996-.16-.185-.654-1.414-1.051-1.396-.359.016-.681.025-1.34.096-.665.072-.696.856-.828 1.19-.103.263-.318.627-.42.82-.203.386-.404.718-.54.861-.27.287-.744.425-1.151.314-.406-.11-1.178-.709-2.04-1.51z",style:{lineHeight:"normal",fontVariantLigatures:"normal",fontVariantPosition:"normal",fontVariantCaps:"normal",fontVariantNumeric:"normal",fontVariantAlternates:"normal",fontVariantEastAsian:"normal",fontFeatureSettings:"normal",fontVariationSettings:"normal",WebkitTextIndent:"0",textIndent:"0",WebkitTextAlign:"start",textAlign:"start",WebkitTextDecorationLine:"none",textDecorationLine:"none",WebkitTextDecorationStyle:"solid",textDecorationStyle:"solid",WebkitTextDecorationColor:"#000",textDecorationColor:"#000",WebkitTextTransform:"none",textTransform:"none",WebkitTextOrientation:"mixed",textOrientation:"mixed",whiteSpace:"normal",shapePadding:"0",shapeMargin:"0",inlineSize:"0",isolation:"auto",mixBlendMode:"normal",solidColor:"#000",solidOpacity:"1"},color:"#000",fontFamily:"sans-serif",fontWeight:"400",overflow:"visible"}),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"3",d:"M319.195 287.46l-5.812 4.315 7.276 4.531"}),r.a.createElement("path",{d:"M263.137 259.311c-1.113.29-1.88 1.095-2.448 1.991-.569.896-.986 1.958-1.344 3.148-.715 2.38-1.164 5.284-1.469 8.138-.578 5.426-.58 10.16-.582 10.665-.272.325-2.114 2.51-4.515 5.772-2.572 3.493-5.458 7.739-6.796 11.233-4.5 11.749-2.223 26.024 4.476 36.227 8.6 13.097 20.71 21.492 40.685 24.001 23.973 3.012 39.226-.444 49.533-9.089 5.695-4.777 10.89-11.3 13.715-19.217 4.76-13.337 3.21-26.107-3.585-37.153-3.28-5.331-6.51-8.758-8.949-10.861-1.853-1.598-2.596-1.907-3.191-2.23.162-.8.817-3.975 1.422-8.053.339-2.28.622-4.585.697-6.444.038-.93.031-1.738-.079-2.462a3.763 3.763 0 00-.303-1.079c-.174-.373-.504-.864-1.139-1.096-1.723-.63-3.563-.214-5.933.302-2.37.517-5.102 1.322-7.71 2.166-4.929 1.596-8.915 3.162-9.394 3.35-.821-.35-6.095-2.552-13.616-3.434-11.393-1.337-20.325 2.335-21.506 2.835-.525-.371-3.185-2.27-6.802-4.444-1.978-1.189-4.073-2.354-5.967-3.189-1.895-.834-3.456-1.53-5.2-1.077zm.755 2.903c.039-.01 1.54.174 3.234.92 1.694.747 3.716 1.863 5.632 3.014a126.637 126.637 0 017.244 4.732l.695.496.78-.345s9.542-4.184 20.786-2.864c7.652.898 13.361 3.416 13.361 3.416l.572.252.58-.227s4.663-1.83 9.77-3.483c2.554-.827 5.22-1.609 7.423-2.089 1.952-.425 3.307-.403 3.779-.369.042.396.07.93.04 1.65-.067 1.654-.336 3.9-.666 6.128-.661 4.454-1.563 8.847-1.563 8.847l-.238 1.164 1.08.499s1.288.577 3.5 2.483c2.21 1.907 5.229 5.09 8.35 10.162 6.368 10.352 7.807 21.99 3.316 34.573-2.609 7.31-7.465 13.437-12.816 17.925-9.497 7.965-23.696 11.367-47.235 8.41-19.318-2.427-30.326-10.145-38.55-22.671-6.157-9.377-8.263-22.85-4.182-33.508 1.1-2.87 3.902-7.118 6.412-10.526a130.359 130.359 0 014.716-6.027l.352-.419v-.545s.009-5.4.596-10.907c.293-2.754.739-5.534 1.357-7.59.31-1.029.667-1.874 1.005-2.406.337-.532.603-.678.67-.695z",style:{lineHeight:"normal",fontVariantLigatures:"normal",fontVariantPosition:"normal",fontVariantCaps:"normal",fontVariantNumeric:"normal",fontVariantAlternates:"normal",fontVariantEastAsian:"normal",fontFeatureSettings:"normal",fontVariationSettings:"normal",WebkitTextIndent:"0",textIndent:"0",WebkitTextAlign:"start",textAlign:"start",WebkitTextDecorationLine:"none",textDecorationLine:"none",WebkitTextDecorationStyle:"solid",textDecorationStyle:"solid",WebkitTextDecorationColor:"#000",textDecorationColor:"#000",WebkitTextTransform:"none",textTransform:"none",WebkitTextOrientation:"mixed",textOrientation:"mixed",whiteSpace:"normal",shapePadding:"0",shapeMargin:"0",inlineSize:"0",isolation:"auto",mixBlendMode:"normal",solidColor:"#000",solidOpacity:"1"},fillRule:"evenodd",color:"#000",fontFamily:"sans-serif",fontWeight:"400",overflow:"visible",paintOrder:"fill markers stroke"})),r.a.createElement("text",{x:"-110.804",y:"47.059",style:{lineHeight:"1.25"},fontFamily:"sans-serif",fontSize:"40",fontWeight:"400"}))};a(128);var Fe=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)((function(){var t=0,a=1;window.requestAnimationFrame((function n(){e.current&&(e.current.style.rotate="".concat(t+1*a,"deg"),359===(t+=1*a)&&(t=0),e.current.onmouseenter=function(){a=3},e.current.onmouseleave=function(){a=1},window.requestAnimationFrame(n))}))}),[]),r.a.createElement("div",{className:"page_not_found"},r.a.createElement("span",{id:"404_image"},r.a.createElement("p",null,"4"),r.a.createElement(De,{svgRef:e}),r.a.createElement("p",null,"4")),r.a.createElement("p",null,"This page doesn't exist"),r.a.createElement(s.b,{to:"/"},"Go to main page"))};a(129);var Ue=function(){var e=Object(n.useContext)(j),t=e.state,a=e.dispatch;return Object(n.useEffect)((function(){null!==V.currentUser()&&void 0!==V.currentUser()&&a({type:"LOG_IN"})}),[]),r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:Oe}),r.a.createElement(i.b,{exact:!0,path:"/search",component:Oe}),r.a.createElement(i.b,{exact:!0,path:"/signup",component:je},t.loggedIn&&r.a.createElement(i.a,{to:"/"})),r.a.createElement(i.b,{exact:!0,path:"/login",component:ke},t.loggedIn&&r.a.createElement(i.a,{to:"/"})),r.a.createElement(i.b,{exact:!0,path:"/restorepassword",component:Me},t.loggedIn&&r.a.createElement(i.a,{to:"/"})),r.a.createElement(i.b,{exact:!0,path:"/resetpassword",component:Ae},t.loggedIn&&r.a.createElement(i.a,{to:"/"})),r.a.createElement(i.b,{exact:!0,path:"/post/:postId",component:Re}),r.a.createElement(i.b,{exact:!0,path:"/user/:name",component:Oe}),r.a.createElement(i.b,{exact:!0,path:"/profile",component:Oe},!t.loggedIn&&r.a.createElement(i.a,{to:"/login"})),r.a.createElement(i.b,{component:Fe})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null,r.a.createElement(Ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},14:function(e,t,a){e.exports={posts:"Posts_container_posts__3WdrR",post:"Posts_container_post__fDS-H",post_main_body:"Posts_container_post_main_body__To7fn",image_link:"Posts_container_image_link__3S4wf",image_container:"Posts_container_image_container__1wjBw",red_heart:"Posts_container_red_heart__1AzZo",blue_heart:"Posts_container_blue_heart__3F7zq",inactive_like:"Posts_container_inactive_like__3cVW0",load_more:"Posts_container_load_more__3VKMG",loading_message:"Posts_container_loading_message__23QTr",load_more_button:"Posts_container_load_more_button__3eIQI"}},17:function(e,t,a){e.exports={form:"Login_form__1S51i",restore_password_message:"Login_restore_password_message__2sxCA"}},25:function(e,t,a){e.exports={post_info:"Post_info_post_info__1klgR",user_image:"Post_info_user_image__2oiN8",likes:"Post_info_likes__mgUj4",red_heart:"Post_info_red_heart__1UE2v",blue_heart:"Post_info_blue_heart__2h509",transparent_heart:"Post_info_transparent_heart__2ttX3"}},29:function(e,t,a){e.exports={form:"Signup_form__3X8h_",confirmation_message:"Signup_confirmation_message__1vC6z"}},47:function(e,t,a){e.exports={form:"GetInvitation_form__1wyRk",confirmation_message:"GetInvitation_confirmation_message__yFS0H"}},6:function(e,t,a){e.exports={container:"Post_container__2RaZZ",content:"Post_content__Z0AlM",post:"Post_post__1M6Tz",post_main_body:"Post_post_main_body__12Rdy",comment:"Post_comment__TH53c",comment_info:"Post_comment_info__1iSlB",user_info:"Post_user_info__2e-PZ",new_comment_form:"Post_new_comment_form__M0EXv",posts_header:"Post_posts_header__LNwLy",modal_container:"Post_modal_container__uPdpY",modal_window:"Post_modal_window__9tjNP",button_container:"Post_button_container__1KxrT",image_full_screen_overlay:"Post_image_full_screen_overlay__371eU",full_screen_image:"Post_full_screen_image__3D08V",close_button:"Post_close_button__2tcFU",loading_message:"Post_loading_message__No4Sx",end_message:"Post_end_message__3yFjb"}},68:function(e,t,a){},75:function(e,t,a){e.exports=a(130)},9:function(e,t,a){e.exports={container:"styles_container__2nyMJ",open_card_button:"styles_open_card_button__3uB4Q",user:"styles_user__36eiJ",slidein:"styles_slidein__2Lluy",upload_image_form:"styles_upload_image_form__1Y7-l",logout_button:"styles_logout_button__30Xwu",login_signup_buttons_container:"styles_login_signup_buttons_container__1pMI0",form:"styles_form__3l1lh",input:"styles_input__3GMFI",buttons_container:"styles_buttons_container__2LYWs",change_image_button:"styles_change_image_button__1F8K3"}}},[[75,1,2]]]);
//# sourceMappingURL=main.7b10884b.chunk.js.map